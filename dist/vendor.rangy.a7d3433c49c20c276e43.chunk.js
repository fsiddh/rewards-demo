(self.webpackChunkrewards_catalog=self.webpackChunkrewards_catalog||[]).push([[8520],{"./node_modules/rangy/lib/rangy-core.js":function(rt,it,Rt){var Le,qe;(function(We,at){Le=We,qe=typeof Le=="function"?Le.call(it,Rt,it,rt):Le,qe!==void 0&&(rt.exports=qe)})(function(){var We="object",at="function",Pe="undefined",Ct=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],Nt=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],Et=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],St=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"];function Ce(i,u){var c=typeof i[u];return c==at||!!(c==We&&i[u])||c=="unknown"}function Ge(i,u){return!!(typeof i[u]==We&&i[u])}function ot(i,u){return typeof i[u]!=Pe}function Qe(i){return function(u,c){for(var p=c.length;p--;)if(!i(u,c[p]))return!1;return!0}}var Xe=Qe(Ce),yt=Qe(Ge),Ze=Qe(ot);function st(i){return i&&Xe(i,St)&&Ze(i,Et)}function ct(i){return Ge(i,"body")?i.body:i.getElementsByTagName("body")[0]}var wt=[].forEach?function(i,u){i.forEach(u)}:function(i,u){for(var c=0,p=i.length;c<p;++c)u(i[c],c)},Ie={},Ne=typeof window!=Pe&&typeof document!=Pe,Ee={isHostMethod:Ce,isHostObject:Ge,isHostProperty:ot,areHostMethods:Xe,areHostObjects:yt,areHostProperties:Ze,isTextRange:st,getBody:ct,forEach:wt},P={version:"1.3.2",initialized:!1,isBrowser:Ne,supported:!0,util:Ee,features:{},modules:Ie,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==Pe?!0:rangyAutoInitialize}};function ke(i){typeof console!=Pe&&Ce(console,"log")&&console.log(i)}function ft(i,u){Ne&&u?alert(i):ke(i)}function Oe(i){P.initialized=!0,P.supported=!1,ft("Rangy is not supported in this environment. Reason: "+i,P.config.alertOnFail)}P.fail=Oe;function Tt(i){ft("Rangy warning: "+i,P.config.alertOnWarn)}P.warn=Tt;var Ve;({}).hasOwnProperty?(Ee.extend=Ve=function(i,u,c){var p,R;for(var w in u)w==="__proto__"||w==="constructor"||w==="prototype"||u.hasOwnProperty(w)&&(p=i[w],R=u[w],c&&p!==null&&typeof p=="object"&&R!==null&&typeof R=="object"&&Ve(p,R,!0),i[w]=R);return u.hasOwnProperty("toString")&&(i.toString=u.toString),i},Ee.createOptions=function(i,u){var c={};return Ve(c,u),i&&Ve(c,i),c}):Oe("hasOwnProperty not supported"),Ne||Oe("Rangy can only run in a browser"),function(){var i;if(Ne){var u=document.createElement("div");u.appendChild(document.createElement("span"));var c=[].slice;try{c.call(u.childNodes,0)[0].nodeType==1&&(i=function(p){return c.call(p,0)})}catch(p){}}i||(i=function(p){for(var R=[],w=0,T=p.length;w<T;++w)R[w]=p[w];return R}),Ee.toArray=i}();var ze;Ne&&(Ce(document,"addEventListener")?ze=function(i,u,c){i.addEventListener(u,c,!1)}:Ce(document,"attachEvent")?ze=function(i,u,c){i.attachEvent("on"+u,c)}:Oe("Document does not have required addEventListener or attachEvent method"),Ee.addListener=ze);var Ke=[];function ut(i){return i.message||i.description||String(i)}function $e(){if(!(!Ne||P.initialized)){var i,u=!1,c=!1;Ce(document,"createRange")&&(i=document.createRange(),Xe(i,Nt)&&Ze(i,Ct)&&(u=!0));var p=ct(document);if(!p||p.nodeName.toLowerCase()!="body"){Oe("No body element found");return}if(p&&Ce(p,"createTextRange")&&(i=p.createTextRange(),st(i)&&(c=!0)),!u&&!c){Oe("Neither Range nor TextRange are available");return}P.initialized=!0,P.features={implementsDomRange:u,implementsTextRange:c};var R,w;for(var T in Ie)(R=Ie[T])instanceof Ue&&R.init(R,P);for(var G=0,K=Ke.length;G<K;++G)try{Ke[G](P)}catch(j){w="Rangy init listener threw an exception. Continuing. Detail: "+ut(j),ke(w)}}}function lt(i,u,c){c&&(i+=" in module "+c.name),P.warn("DEPRECATED: "+i+" is deprecated. Please use "+u+" instead.")}function dt(i,u,c,p){i[u]=function(){return lt(u,c,p),i[c].apply(i,Ee.toArray(arguments))}}Ee.deprecationNotice=lt,Ee.createAliasForDeprecatedMethod=dt,P.init=$e,P.addInitListener=function(i){P.initialized?i(P):Ke.push(i)};var Je=[];P.addShimListener=function(i){Je.push(i)};function Ot(i){i=i||window,$e();for(var u=0,c=Je.length;u<c;++u)Je[u](i)}Ne&&(P.shim=P.createMissingNativeApi=Ot,dt(P,"createMissingNativeApi","shim"));function Ue(i,u,c){this.name=i,this.dependencies=u,this.initialized=!1,this.supported=!1,this.initializer=c}Ue.prototype={init:function(){for(var i=this.dependencies||[],u=0,c=i.length,p,R;u<c;++u){if(R=i[u],p=Ie[R],!p||!(p instanceof Ue))throw new Error("required module '"+R+"' not found");if(p.init(),!p.supported)throw new Error("required module '"+R+"' not supported")}this.initializer(this)},fail:function(i){throw this.initialized=!0,this.supported=!1,new Error(i)},warn:function(i){P.warn("Module "+this.name+": "+i)},deprecationNotice:function(i,u){P.warn("DEPRECATED: "+i+" in module "+this.name+" is deprecated. Please use "+u+" instead")},createError:function(i){return new Error("Error in Rangy "+this.name+" module: "+i)}};function ht(i,u,c){var p=new Ue(i,u,function(R){if(!R.initialized){R.initialized=!0;try{c(P,R),R.supported=!0}catch(T){var w="Module '"+i+"' failed to load: "+ut(T);ke(w),T.stack&&ke(T.stack)}}});return Ie[i]=p,p}P.createModule=function(i){var u,c;arguments.length==2?(u=arguments[1],c=[]):(u=arguments[2],c=arguments[1]);var p=ht(i,c,u);P.initialized&&P.supported&&p.init()},P.createCoreModule=function(i,u,c){ht(i,u,c)};function gt(){}P.RangePrototype=gt,P.rangePrototype=new gt;function _t(){}P.selectionPrototype=new _t,P.createCoreModule("DomUtil",[],function(i,u){var c="undefined",p=i.util,R=p.getBody;p.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||u.fail("document missing a Node creation method"),p.isHostMethod(document,"getElementsByTagName")||u.fail("document missing getElementsByTagName method");var w=document.createElement("div");p.areHostMethods(w,["insertBefore","appendChild","cloneNode"])||u.fail("Incomplete Element implementation"),p.isHostProperty(w,"innerHTML")||u.fail("Element is missing innerHTML property");var T=document.createTextNode("test");p.areHostMethods(T,["splitText","deleteData","insertData","appendData","cloneNode"])||u.fail("Incomplete Text Node implementation");var G=function(a,h){for(var _=a.length;_--;)if(a[_]===h)return!0;return!1};function K(a){var h;return typeof a.namespaceURI==c||(h=a.namespaceURI)===null||h=="http://www.w3.org/1999/xhtml"}function j(a){var h=a.parentNode;return h.nodeType==1?h:null}function z(a){for(var h=0;a=a.previousSibling;)++h;return h}function le(a){switch(a.nodeType){case 7:case 10:return 0;case 3:case 8:return a.length;default:return a.childNodes.length}}function ie(a,h){var _=[],E;for(E=a;E;E=E.parentNode)_.push(E);for(E=h;E;E=E.parentNode)if(G(_,E))return E;return null}function X(a,h,_){for(var E=_?h:h.parentNode;E;){if(E===a)return!0;E=E.parentNode}return!1}function ne(a,h){return X(a,h,!0)}function Y(a,h,_){for(var E,Z=_?a:a.parentNode;Z;){if(E=Z.parentNode,E===h)return Z;Z=E}return null}function ce(a){var h=a.nodeType;return h==3||h==4||h==8}function l(a){if(!a)return!1;var h=a.nodeType;return h==3||h==8}function B(a,h){var _=h.nextSibling,E=h.parentNode;return _?E.insertBefore(a,_):E.appendChild(a),a}function C(a,h,_){var E=a.cloneNode(!1);if(E.deleteData(0,h),a.deleteData(h,a.length-h),B(E,a),_)for(var Z=0,k;k=_[Z++];)k.node==a&&k.offset>h?(k.node=E,k.offset-=h):k.node==a.parentNode&&k.offset>z(a)&&++k.offset;return E}function L(a){if(a.nodeType==9)return a;if(typeof a.ownerDocument!=c)return a.ownerDocument;if(typeof a.document!=c)return a.document;if(a.parentNode)return L(a.parentNode);throw u.createError("getDocument: no document found for node")}function Q(a){var h=L(a);if(typeof h.defaultView!=c)return h.defaultView;if(typeof h.parentWindow!=c)return h.parentWindow;throw u.createError("Cannot get a window object for node")}function H(a){if(typeof a.contentDocument!=c)return a.contentDocument;if(typeof a.contentWindow!=c)return a.contentWindow.document;throw u.createError("getIframeDocument: No Document object found for iframe element")}function D(a){if(typeof a.contentWindow!=c)return a.contentWindow;if(typeof a.contentDocument!=c)return a.contentDocument.defaultView;throw u.createError("getIframeWindow: No Window object found for iframe element")}function q(a){return a&&p.isHostMethod(a,"setTimeout")&&p.isHostObject(a,"document")}function W(a,h,_){var E;if(a?p.isHostProperty(a,"nodeType")?E=a.nodeType==1&&a.tagName.toLowerCase()=="iframe"?H(a):L(a):q(a)&&(E=a.document):E=document,!E)throw h.createError(_+"(): Parameter must be a Window object or DOM node");return E}function F(a){for(var h;h=a.parentNode;)a=h;return a}function de(a,h,_,E){var Z,k,pe,ge,oe;if(a==_)return h===E?0:h<E?-1:1;if(Z=Y(_,a,!0))return h<=z(Z)?-1:1;if(Z=Y(a,_,!0))return z(Z)<E?-1:1;if(k=ie(a,_),!k)throw new Error("comparePoints error: nodes have no common ancestor");if(pe=a===k?k:Y(a,k,!0),ge=_===k?k:Y(_,k,!0),pe===ge)throw u.createError("comparePoints got to case 4 and childA and childB are the same!");for(oe=k.firstChild;oe;){if(oe===pe)return-1;if(oe===ge)return 1;oe=oe.nextSibling}}var v=!1;function S(a){var h;try{return h=a.parentNode,!1}catch(_){return!0}}(function(){var a=document.createElement("b");a.innerHTML="1";var h=a.firstChild;a.innerHTML="<br />",v=S(h),i.features.crashyTextNodes=v})();function M(a){if(!a)return"[No node]";if(v&&S(a))return"[Broken node]";if(ce(a))return'"'+a.data+'"';if(a.nodeType==1){var h=a.id?' id="'+a.id+'"':"";return"<"+a.nodeName+h+">[index:"+z(a)+",length:"+a.childNodes.length+"]["+(a.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return a.nodeName}function U(a){for(var h=L(a).createDocumentFragment(),_;_=a.firstChild;)h.appendChild(_);return h}var $;typeof window.getComputedStyle!=c?$=function(a,h){return Q(a).getComputedStyle(a,null)[h]}:typeof document.documentElement.currentStyle!=c?$=function(a,h){return a.currentStyle?a.currentStyle[h]:""}:u.fail("No means of obtaining computed style properties found");function he(a,h,_){var E=R(a),Z=a.createElement("div");Z.contentEditable=""+!!_,h&&(Z.innerHTML=h);var k=E.firstChild;return k?E.insertBefore(Z,k):E.appendChild(Z),Z}function ae(a){return a.parentNode.removeChild(a)}function ee(a){this.root=a,this._next=a}ee.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var a=this._current=this._next,h,_;if(this._current)if(h=a.firstChild,h)this._next=h;else{for(_=null;a!==this.root&&!(_=a.nextSibling);)a=a.parentNode;this._next=_}return this._current},detach:function(){this._current=this._next=this.root=null}};function te(a){return new ee(a)}function re(a,h){this.node=a,this.offset=h}re.prototype={equals:function(a){return!!a&&this.node===a.node&&this.offset==a.offset},inspect:function(){return"[DomPosition("+M(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}};function fe(a){this.code=this[a],this.codeName=a,this.message="DOMException: "+this.codeName}fe.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},fe.prototype.toString=function(){return this.message},i.dom={arrayContains:G,isHtmlNamespace:K,parentElement:j,getNodeIndex:z,getNodeLength:le,getCommonAncestor:ie,isAncestorOf:X,isOrIsAncestorOf:ne,getClosestAncestorIn:Y,isCharacterDataNode:ce,isTextOrCommentNode:l,insertAfter:B,splitDataNode:C,getDocument:L,getWindow:Q,getIframeWindow:D,getIframeDocument:H,getBody:R,isWindow:q,getContentDocument:W,getRootContainer:F,comparePoints:de,isBrokenNode:S,inspectNode:M,getComputedStyleProperty:$,createTestElement:he,removeNode:ae,fragmentFromNodeChildren:U,createIterator:te,DomPosition:re},i.DOMException=fe}),P.createCoreModule("DomRange",["DomUtil"],function(i,u){var c=i.dom,p=i.util,R=c.DomPosition,w=i.DOMException,T=c.isCharacterDataNode,G=c.getNodeIndex,K=c.isOrIsAncestorOf,j=c.getDocument,z=c.comparePoints,le=c.splitDataNode,ie=c.getClosestAncestorIn,X=c.getNodeLength,ne=c.arrayContains,Y=c.getRootContainer,ce=i.features.crashyTextNodes,l=c.removeNode;function B(t,n){return t.nodeType!=3&&(K(t,n.startContainer)||K(t,n.endContainer))}function C(t){return t.document||j(t.startContainer)}function L(t){return Y(t.startContainer)}function Q(t){return new R(t.parentNode,G(t))}function H(t){return new R(t.parentNode,G(t)+1)}function D(t,n,o){var d=t.nodeType==11?t.firstChild:t;return T(n)?o==n.length?c.insertAfter(t,n):n.parentNode.insertBefore(t,o==0?n:le(n,o)):o>=n.childNodes.length?n.appendChild(t):n.insertBefore(t,n.childNodes[o]),d}function q(t,n,o){if(V(t),V(n),C(n)!=C(t))throw new w("WRONG_DOCUMENT_ERR");var d=z(t.startContainer,t.startOffset,n.endContainer,n.endOffset),N=z(t.endContainer,t.endOffset,n.startContainer,n.startOffset);return o?d<=0&&N>=0:d<0&&N>0}function W(t){for(var n,o,d=C(t.range).createDocumentFragment(),N;o=t.next();){if(n=t.isPartiallySelectedSubtree(),o=o.cloneNode(!n),n&&(N=t.getSubtreeIterator(),o.appendChild(W(N)),N.detach()),o.nodeType==10)throw new w("HIERARCHY_REQUEST_ERR");d.appendChild(o)}return d}function F(t,n,o){var d,N;o=o||{stop:!1};for(var I,f;I=t.next();)if(t.isPartiallySelectedSubtree()){if(n(I)===!1){o.stop=!0;return}else if(f=t.getSubtreeIterator(),F(f,n,o),f.detach(),o.stop)return}else for(d=c.createIterator(I);N=d.next();)if(n(N)===!1){o.stop=!0;return}}function de(t){for(var n;t.next();)t.isPartiallySelectedSubtree()?(n=t.getSubtreeIterator(),de(n),n.detach()):t.remove()}function v(t){for(var n,o=C(t.range).createDocumentFragment(),d;n=t.next();){if(t.isPartiallySelectedSubtree()?(n=n.cloneNode(!1),d=t.getSubtreeIterator(),n.appendChild(v(d)),d.detach()):t.remove(),n.nodeType==10)throw new w("HIERARCHY_REQUEST_ERR");o.appendChild(n)}return o}function S(t,n,o){var d=!!(n&&n.length),N,I=!!o;d&&(N=new RegExp("^("+n.join("|")+")$"));var f=[];return F(new U(t,!1),function(m){if(!(d&&!N.test(m.nodeType))&&!(I&&!o(m))){var y=t.startContainer;if(!(m==y&&T(y)&&t.startOffset==y.length)){var x=t.endContainer;m==x&&T(x)&&t.endOffset==0||f.push(m)}}}),f}function M(t){var n=typeof t.getName=="undefined"?"Range":t.getName();return"["+n+"("+c.inspectNode(t.startContainer)+":"+t.startOffset+", "+c.inspectNode(t.endContainer)+":"+t.endOffset+")]"}function U(t,n){if(this.range=t,this.clonePartiallySelectedTextNodes=n,!t.collapsed){this.sc=t.startContainer,this.so=t.startOffset,this.ec=t.endContainer,this.eo=t.endOffset;var o=t.commonAncestorContainer;this.sc===this.ec&&T(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc===o&&!T(this.sc)?this.sc.childNodes[this.so]:ie(this.sc,o,!0),this._last=this.ec===o&&!T(this.ec)?this.ec.childNodes[this.eo-1]:ie(this.ec,o,!0))}}U.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var t=this._current=this._next;return t&&(this._next=t!==this._last?t.nextSibling:null,T(t)&&this.clonePartiallySelectedTextNodes&&(t===this.ec&&(t=t.cloneNode(!0)).deleteData(this.eo,t.length-this.eo),this._current===this.sc&&(t=t.cloneNode(!0)).deleteData(0,this.so))),t},remove:function(){var t=this._current,n,o;T(t)&&(t===this.sc||t===this.ec)?(n=t===this.sc?this.so:0,o=t===this.ec?this.eo:t.length,n!=o&&t.deleteData(n,o-n)):t.parentNode&&l(t)},isPartiallySelectedSubtree:function(){var t=this._current;return B(t,this.range)},getSubtreeIterator:function(){var t;if(this.isSingleCharacterDataNode)t=this.range.cloneRange(),t.collapse(!1);else{t=new J(C(this.range));var n=this._current,o=n,d=0,N=n,I=X(n);K(n,this.sc)&&(o=this.sc,d=this.so),K(n,this.ec)&&(N=this.ec,I=this.eo),b(t,o,d,N,I)}return new U(t,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var $=[1,3,4,5,7,8,10],he=[2,9,11],ae=[5,6,10,12],ee=[1,3,4,5,7,8,10,11],te=[1,3,4,5,7,8];function re(t){return function(n,o){for(var d,N=o?n:n.parentNode;N;){if(d=N.nodeType,ne(t,d))return N;N=N.parentNode}return null}}var fe=re([9,11]),a=re(ae),h=re([6,10,12]),_=re([1]);function E(t,n){if(h(t,n))throw new w("INVALID_NODE_TYPE_ERR")}function Z(t,n){if(!ne(n,t.nodeType))throw new w("INVALID_NODE_TYPE_ERR")}function k(t,n){if(n<0||n>(T(t)?t.length:t.childNodes.length))throw new w("INDEX_SIZE_ERR")}function pe(t,n){if(fe(t,!0)!==fe(n,!0))throw new w("WRONG_DOCUMENT_ERR")}function ge(t){if(a(t,!0))throw new w("NO_MODIFICATION_ALLOWED_ERR")}function oe(t,n){if(!t)throw new w(n)}function Be(t,n){return n<=(T(t)?t.length:t.childNodes.length)}function ye(t){return!!t.startContainer&&!!t.endContainer&&!(ce&&(c.isBrokenNode(t.startContainer)||c.isBrokenNode(t.endContainer)))&&Y(t.startContainer)==Y(t.endContainer)&&Be(t.startContainer,t.startOffset)&&Be(t.endContainer,t.endOffset)}function V(t){if(!ye(t))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+t.inspect()+")")}var He=document.createElement("style"),Re=!1;try{He.innerHTML="<b>x</b>",Re=He.firstChild.nodeType==3}catch(t){}i.features.htmlParsingConforms=Re;var Me=Re?function(t){var n=this.startContainer,o=j(n);if(!n)throw new w("INVALID_STATE_ERR");var d=null;return n.nodeType==1?d=n:T(n)&&(d=c.parentElement(n)),d===null||d.nodeName=="HTML"&&c.isHtmlNamespace(j(d).documentElement)&&c.isHtmlNamespace(d)?d=o.createElement("body"):d=d.cloneNode(!1),d.innerHTML=t,c.fragmentFromNodeChildren(d)}:function(t){var n=C(this),o=n.createElement("body");return o.innerHTML=t,c.fragmentFromNodeChildren(o)};function _e(t,n){V(t);var o=t.startContainer,d=t.startOffset,N=t.endContainer,I=t.endOffset,f=o===N;T(N)&&I>0&&I<N.length&&le(N,I,n),T(o)&&d>0&&d<o.length&&(o=le(o,d,n),f?(I-=d,N=o):N==o.parentNode&&I>=G(o)&&I++,d=0),t.setStartAndEnd(o,d,N,I)}function A(t){V(t);var n=t.commonAncestorContainer.parentNode.cloneNode(!1);return n.appendChild(t.cloneContents()),n.innerHTML}var De=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],Ae=0,we=1,Ye=2,Se=3,Te=0,be=1,Fe=2,xe=3;p.extend(i.rangePrototype,{compareBoundaryPoints:function(t,n){V(this),pe(this.startContainer,n.startContainer);var o,d,N,I,f=t==Se||t==Ae?"start":"end",m=t==we||t==Ae?"start":"end";return o=this[f+"Container"],d=this[f+"Offset"],N=n[m+"Container"],I=n[m+"Offset"],z(o,d,N,I)},insertNode:function(t){if(V(this),Z(t,ee),ge(this.startContainer),K(t,this.startContainer))throw new w("HIERARCHY_REQUEST_ERR");var n=D(t,this.startContainer,this.startOffset);this.setStartBefore(n)},cloneContents:function(){V(this);var t,n;if(this.collapsed)return C(this).createDocumentFragment();if(this.startContainer===this.endContainer&&T(this.startContainer))return t=this.startContainer.cloneNode(!0),t.data=t.data.slice(this.startOffset,this.endOffset),n=C(this).createDocumentFragment(),n.appendChild(t),n;var o=new U(this,!0);return t=W(o),o.detach(),t},canSurroundContents:function(){V(this),ge(this.startContainer),ge(this.endContainer);var t=new U(this,!0),n=t._first&&B(t._first,this)||t._last&&B(t._last,this);return t.detach(),!n},surroundContents:function(t){if(Z(t,te),!this.canSurroundContents())throw new w("INVALID_STATE_ERR");var n=this.extractContents();if(t.hasChildNodes())for(;t.lastChild;)t.removeChild(t.lastChild);D(t,this.startContainer,this.startOffset),t.appendChild(n),this.selectNode(t)},cloneRange:function(){V(this);for(var t=new J(C(this)),n=De.length,o;n--;)o=De[n],t[o]=this[o];return t},toString:function(){V(this);var t=this.startContainer;if(t===this.endContainer&&T(t))return t.nodeType==3||t.nodeType==4?t.data.slice(this.startOffset,this.endOffset):"";var n=[],o=new U(this,!0);return F(o,function(d){(d.nodeType==3||d.nodeType==4)&&n.push(d.data)}),o.detach(),n.join("")},compareNode:function(t){V(this);var n=t.parentNode,o=G(t);if(!n)throw new w("NOT_FOUND_ERR");var d=this.comparePoint(n,o),N=this.comparePoint(n,o+1);return d<0?N>0?Fe:Te:N>0?be:xe},comparePoint:function(t,n){return V(this),oe(t,"HIERARCHY_REQUEST_ERR"),pe(t,this.startContainer),z(t,n,this.startContainer,this.startOffset)<0?-1:z(t,n,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:Me,toHtml:function(){return A(this)},intersectsNode:function(t,n){if(V(this),Y(t)!=L(this))return!1;var o=t.parentNode,d=G(t);if(!o)return!0;var N=z(o,d,this.endContainer,this.endOffset),I=z(o,d+1,this.startContainer,this.startOffset);return n?N<=0&&I>=0:N<0&&I>0},isPointInRange:function(t,n){return V(this),oe(t,"HIERARCHY_REQUEST_ERR"),pe(t,this.startContainer),z(t,n,this.startContainer,this.startOffset)>=0&&z(t,n,this.endContainer,this.endOffset)<=0},intersectsRange:function(t){return q(this,t,!1)},intersectsOrTouchesRange:function(t){return q(this,t,!0)},intersection:function(t){if(this.intersectsRange(t)){var n=z(this.startContainer,this.startOffset,t.startContainer,t.startOffset),o=z(this.endContainer,this.endOffset,t.endContainer,t.endOffset),d=this.cloneRange();return n==-1&&d.setStart(t.startContainer,t.startOffset),o==1&&d.setEnd(t.endContainer,t.endOffset),d}return null},union:function(t){if(this.intersectsOrTouchesRange(t)){var n=this.cloneRange();return z(t.startContainer,t.startOffset,this.startContainer,this.startOffset)==-1&&n.setStart(t.startContainer,t.startOffset),z(t.endContainer,t.endOffset,this.endContainer,this.endOffset)==1&&n.setEnd(t.endContainer,t.endOffset),n}else throw new w("Ranges do not intersect")},containsNode:function(t,n){return n?this.intersectsNode(t,!1):this.compareNode(t)==xe},containsNodeContents:function(t){return this.comparePoint(t,0)>=0&&this.comparePoint(t,X(t))<=0},containsRange:function(t){var n=this.intersection(t);return n!==null&&t.equals(n)},containsNodeText:function(t){var n=this.cloneRange();n.selectNode(t);var o=n.getNodes([3]);if(o.length>0){n.setStart(o[0],0);var d=o.pop();return n.setEnd(d,d.length),this.containsRange(n)}else return this.containsNodeContents(t)},getNodes:function(t,n){return V(this),S(this,t,n)},getDocument:function(){return C(this)},collapseBefore:function(t){this.setEndBefore(t),this.collapse(!1)},collapseAfter:function(t){this.setStartAfter(t),this.collapse(!0)},getBookmark:function(t){var n=C(this),o=i.createRange(n);t=t||c.getBody(n),o.selectNodeContents(t);var d=this.intersection(o),N=0,I=0;return d&&(o.setEnd(d.startContainer,d.startOffset),N=o.toString().length,I=N+d.toString().length),{start:N,end:I,containerNode:t}},moveToBookmark:function(t){var n=t.containerNode,o=0;this.setStart(n,0),this.collapse(!0);for(var d=[n],N,I=!1,f=!1,m,y,x;!f&&(N=d.pop());)if(N.nodeType==3)m=o+N.length,!I&&t.start>=o&&t.start<=m&&(this.setStart(N,t.start-o),I=!0),I&&t.end>=o&&t.end<=m&&(this.setEnd(N,t.end-o),f=!0),o=m;else for(x=N.childNodes,y=x.length;y--;)d.push(x[y])},getName:function(){return"DomRange"},equals:function(t){return J.rangesEqual(this,t)},isValid:function(){return ye(this)},inspect:function(){return M(this)},detach:function(){}});function e(t){t.START_TO_START=Ae,t.START_TO_END=we,t.END_TO_END=Ye,t.END_TO_START=Se,t.NODE_BEFORE=Te,t.NODE_AFTER=be,t.NODE_BEFORE_AND_AFTER=Fe,t.NODE_INSIDE=xe}function r(t){e(t),e(t.prototype)}function s(t,n){return function(){V(this);var o=this.startContainer,d=this.startOffset,N=this.commonAncestorContainer,I=new U(this,!0),f,m;o!==N&&(f=ie(o,N,!0),m=H(f),o=m.node,d=m.offset),F(I,ge),I.reset();var y=t(I);return I.detach(),n(this,o,d,o,d),y}}function g(t,n){function o(f,m){return function(y){Z(y,$),Z(Y(y),he);var x=(f?Q:H)(y);(m?d:N)(this,x.node,x.offset)}}function d(f,m,y){var x=f.endContainer,se=f.endOffset;(m!==f.startContainer||y!==f.startOffset)&&((Y(m)!=Y(x)||z(m,y,x,se)==1)&&(x=m,se=y),n(f,m,y,x,se))}function N(f,m,y){var x=f.startContainer,se=f.startOffset;(m!==f.endContainer||y!==f.endOffset)&&((Y(m)!=Y(x)||z(m,y,x,se)==-1)&&(x=m,se=y),n(f,x,se,m,y))}var I=function(){};I.prototype=i.rangePrototype,t.prototype=new I,p.extend(t.prototype,{setStart:function(f,m){E(f,!0),k(f,m),d(this,f,m)},setEnd:function(f,m){E(f,!0),k(f,m),N(this,f,m)},setStartAndEnd:function(){var f=arguments,m=f[0],y=f[1],x=m,se=y;switch(f.length){case 3:se=f[2];break;case 4:x=f[2],se=f[3];break}E(m,!0),k(m,y),E(x,!0),k(x,se),n(this,m,y,x,se)},setBoundary:function(f,m,y){this["set"+(y?"Start":"End")](f,m)},setStartBefore:o(!0,!0),setStartAfter:o(!1,!0),setEndBefore:o(!0,!1),setEndAfter:o(!1,!1),collapse:function(f){V(this),f?n(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):n(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(f){E(f,!0),n(this,f,0,f,X(f))},selectNode:function(f){E(f,!1),Z(f,$);var m=Q(f),y=H(f);n(this,m.node,m.offset,y.node,y.offset)},extractContents:s(v,n),deleteContents:s(de,n),canSurroundContents:function(){V(this),ge(this.startContainer),ge(this.endContainer);var f=new U(this,!0),m=f._first&&B(f._first,this)||f._last&&B(f._last,this);return f.detach(),!m},splitBoundaries:function(){_e(this)},splitBoundariesPreservingPositions:function(f){_e(this,f)},normalizeBoundaries:function(){V(this);var f=this.startContainer,m=this.startOffset,y=this.endContainer,x=this.endOffset,se=function(ue){var me=ue.nextSibling;me&&me.nodeType==ue.nodeType&&(y=ue,x=ue.length,ue.appendData(me.data),l(me))},pt=function(ue){var me=ue.previousSibling;if(me&&me.nodeType==ue.nodeType){f=ue;var Dt=ue.length;if(m=me.length,ue.insertData(0,me.data),l(me),f==y)x+=m,y=f;else if(y==ue.parentNode){var mt=G(ue);x==mt?(y=ue,x=Dt):x>mt&&x--}}},et=!0,ve;if(T(y))x==y.length?se(y):x==0&&(ve=y.previousSibling,ve&&ve.nodeType==y.nodeType&&(x=ve.length,f==y&&(et=!1),ve.appendData(y.data),l(y),y=ve));else{if(x>0){var tt=y.childNodes[x-1];tt&&T(tt)&&se(tt)}et=!this.collapsed}if(et){if(T(f))m==0?pt(f):m==f.length&&(ve=f.nextSibling,ve&&ve.nodeType==f.nodeType&&(y==ve&&(y=f,x+=f.length),f.appendData(ve.data),l(ve)));else if(m<f.childNodes.length){var nt=f.childNodes[m];nt&&T(nt)&&pt(nt)}}else f=y,m=x;n(this,f,m,y,x)},collapseToPoint:function(f,m){E(f,!0),k(f,m),this.setStartAndEnd(f,m)},parentElement:function(){V(this);var f=this.commonAncestorContainer;return f?_(this.commonAncestorContainer,!0):null}}),r(t)}function O(t){t.collapsed=t.startContainer===t.endContainer&&t.startOffset===t.endOffset,t.commonAncestorContainer=t.collapsed?t.startContainer:c.getCommonAncestor(t.startContainer,t.endContainer)}function b(t,n,o,d,N){t.startContainer=n,t.startOffset=o,t.endContainer=d,t.endOffset=N,t.document=c.getDocument(n),O(t)}function J(t){b(this,t,0,t,0)}g(J,b),p.extend(J,{rangeProperties:De,RangeIterator:U,copyComparisonConstants:r,createPrototypeRange:g,inspect:M,toHtml:A,getRangeDocument:C,rangesEqual:function(t,n){return t.startContainer===n.startContainer&&t.startOffset===n.startOffset&&t.endContainer===n.endContainer&&t.endOffset===n.endOffset}}),i.DomRange=J}),P.createCoreModule("WrappedRange",["DomRange"],function(i,u){var c,p,R=i.dom,w=i.util,T=R.DomPosition,G=i.DomRange,K=R.getBody,j=R.getContentDocument,z=R.isCharacterDataNode;if(i.features.implementsDomRange&&function(){var l,B=G.rangeProperties;function C(v){for(var S=B.length,M;S--;)M=B[S],v[M]=v.nativeRange[M];v.collapsed=v.startContainer===v.endContainer&&v.startOffset===v.endOffset}function L(v,S,M,U,$){var he=v.startContainer!==S||v.startOffset!=M,ae=v.endContainer!==U||v.endOffset!=$,ee=!v.equals(v.nativeRange);(he||ae||ee)&&(v.setEnd(U,$),v.setStart(S,M))}var Q;c=function(v){if(!v)throw u.createError("WrappedRange: Range must be specified");this.nativeRange=v,C(this)},G.createPrototypeRange(c,L),l=c.prototype,l.selectNode=function(v){this.nativeRange.selectNode(v),C(this)},l.cloneContents=function(){return this.nativeRange.cloneContents()},l.surroundContents=function(v){this.nativeRange.surroundContents(v),C(this)},l.collapse=function(v){this.nativeRange.collapse(v),C(this)},l.cloneRange=function(){return new c(this.nativeRange.cloneRange())},l.refresh=function(){C(this)},l.toString=function(){return this.nativeRange.toString()};var H=document.createTextNode("test");K(document).appendChild(H);var D=document.createRange();D.setStart(H,0),D.setEnd(H,0);try{D.setStart(H,1),l.setStart=function(v,S){this.nativeRange.setStart(v,S),C(this)},l.setEnd=function(v,S){this.nativeRange.setEnd(v,S),C(this)},Q=function(v){return function(S){this.nativeRange[v](S),C(this)}}}catch(v){l.setStart=function(S,M){try{this.nativeRange.setStart(S,M)}catch(U){this.nativeRange.setEnd(S,M),this.nativeRange.setStart(S,M)}C(this)},l.setEnd=function(S,M){try{this.nativeRange.setEnd(S,M)}catch(U){this.nativeRange.setStart(S,M),this.nativeRange.setEnd(S,M)}C(this)},Q=function(S,M){return function(U){try{this.nativeRange[S](U)}catch($){this.nativeRange[M](U),this.nativeRange[S](U)}C(this)}}}l.setStartBefore=Q("setStartBefore","setEndBefore"),l.setStartAfter=Q("setStartAfter","setEndAfter"),l.setEndBefore=Q("setEndBefore","setStartBefore"),l.setEndAfter=Q("setEndAfter","setStartAfter"),l.selectNodeContents=function(v){this.setStartAndEnd(v,0,R.getNodeLength(v))},D.selectNodeContents(H),D.setEnd(H,3);var q=document.createRange();q.selectNodeContents(H),q.setEnd(H,4),q.setStart(H,2),D.compareBoundaryPoints(D.START_TO_END,q)==-1&&D.compareBoundaryPoints(D.END_TO_START,q)==1?l.compareBoundaryPoints=function(v,S){return S=S.nativeRange||S,v==S.START_TO_END?v=S.END_TO_START:v==S.END_TO_START&&(v=S.START_TO_END),this.nativeRange.compareBoundaryPoints(v,S)}:l.compareBoundaryPoints=function(v,S){return this.nativeRange.compareBoundaryPoints(v,S.nativeRange||S)};var W=document.createElement("div");W.innerHTML="123";var F=W.firstChild,de=K(document);de.appendChild(W),D.setStart(F,1),D.setEnd(F,2),D.deleteContents(),F.data=="13"&&(l.deleteContents=function(){this.nativeRange.deleteContents(),C(this)},l.extractContents=function(){var v=this.nativeRange.extractContents();return C(this),v}),de.removeChild(W),de=null,w.isHostMethod(D,"createContextualFragment")&&(l.createContextualFragment=function(v){return this.nativeRange.createContextualFragment(v)}),K(document).removeChild(H),l.getName=function(){return"WrappedRange"},i.WrappedRange=c,i.createNativeRange=function(v){return v=j(v,u,"createNativeRange"),v.createRange()}}(),i.features.implementsTextRange){var le=function(l){var B=l.parentElement(),C=l.duplicate();C.collapse(!0);var L=C.parentElement();C=l.duplicate(),C.collapse(!1);var Q=C.parentElement(),H=L==Q?L:R.getCommonAncestor(L,Q);return H==B?H:R.getCommonAncestor(B,H)},ie=function(l){return l.compareEndPoints("StartToEnd",l)==0},X=function(l,B,C,L,Q){var H=l.duplicate();H.collapse(C);var D=H.parentElement();if(R.isOrIsAncestorOf(B,D)||(D=B),!D.canHaveHTML){var q=new T(D.parentNode,R.getNodeIndex(D));return{boundaryPosition:q,nodeInfo:{nodeIndex:q.offset,containerElement:q.node}}}var W=R.getDocument(D).createElement("span");W.parentNode&&R.removeNode(W);for(var F,de=C?"StartToStart":"StartToEnd",v,S,M,U,$=Q&&Q.containerElement==D?Q.nodeIndex:0,he=D.childNodes.length,ae=he,ee=ae;ee==he?D.appendChild(W):D.insertBefore(W,D.childNodes[ee]),H.moveToElementText(W),F=H.compareEndPoints(de,l),!(F==0||$==ae);){if(F==-1){if(ae==$+1)break;$=ee}else ae=ae==$+1?$:ee;ee=Math.floor(($+ae)/2),D.removeChild(W)}if(U=W.nextSibling,F==-1&&U&&z(U)){H.setEndPoint(C?"EndToStart":"EndToEnd",l);var te;if(/[\r\n]/.test(U.data)){var re=H.duplicate(),fe=re.text.replace(/\r\n/g,"\r").length;for(te=re.moveStart("character",fe);(F=re.compareEndPoints("StartToEnd",re))==-1;)te++,re.moveStart("character",1)}else te=H.text.length;M=new T(U,te)}else v=(L||!C)&&W.previousSibling,S=(L||C)&&W.nextSibling,S&&z(S)?M=new T(S,0):v&&z(v)?M=new T(v,v.data.length):M=new T(D,R.getNodeIndex(W));return R.removeNode(W),{boundaryPosition:M,nodeInfo:{nodeIndex:ee,containerElement:D}}},ne=function(l,B){var C,L,Q=l.offset,H=R.getDocument(l.node),D,q,W=K(H).createTextRange(),F=z(l.node);return F?(C=l.node,L=C.parentNode):(q=l.node.childNodes,C=Q<q.length?q[Q]:null,L=l.node),D=H.createElement("span"),D.innerHTML="&#feff;",C?L.insertBefore(D,C):L.appendChild(D),W.moveToElementText(D),W.collapse(!B),L.removeChild(D),F&&W[B?"moveStart":"moveEnd"]("character",Q),W};p=function(l){this.textRange=l,this.refresh()},p.prototype=new G(document),p.prototype.refresh=function(){var l,B,C,L=le(this.textRange);ie(this.textRange)?B=l=X(this.textRange,L,!0,!0).boundaryPosition:(C=X(this.textRange,L,!0,!1),l=C.boundaryPosition,B=X(this.textRange,L,!1,!1,C.nodeInfo).boundaryPosition),this.setStart(l.node,l.offset),this.setEnd(B.node,B.offset)},p.prototype.getName=function(){return"WrappedTextRange"},G.copyComparisonConstants(p);var Y=function(l){if(l.collapsed)return ne(new T(l.startContainer,l.startOffset),!0);var B=ne(new T(l.startContainer,l.startOffset),!0),C=ne(new T(l.endContainer,l.endOffset),!1),L=K(G.getRangeDocument(l)).createTextRange();return L.setEndPoint("StartToStart",B),L.setEndPoint("EndToEnd",C),L};if(p.rangeToTextRange=Y,p.prototype.toTextRange=function(){return Y(this)},i.WrappedTextRange=p,!i.features.implementsDomRange||i.config.preferTextRange){var ce=function(l){return l("return this;")()}(Function);typeof ce.Range=="undefined"&&(ce.Range=p),i.createNativeRange=function(l){return l=j(l,u,"createNativeRange"),K(l).createTextRange()},i.WrappedRange=p}}i.createRange=function(l){return l=j(l,u,"createRange"),new i.WrappedRange(i.createNativeRange(l))},i.createRangyRange=function(l){return l=j(l,u,"createRangyRange"),new G(l)},w.createAliasForDeprecatedMethod(i,"createIframeRange","createRange"),w.createAliasForDeprecatedMethod(i,"createIframeRangyRange","createRangyRange"),i.addShimListener(function(l){var B=l.document;typeof B.createRange=="undefined"&&(B.createRange=function(){return i.createRange(B)}),B=l=null})}),P.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(i,u){i.config.checkSelectionRanges=!0;var c="boolean",p="number",R=i.dom,w=i.util,T=w.isHostMethod,G=i.DomRange,K=i.WrappedRange,j=i.DOMException,z=R.DomPosition,le,ie,X=i.features,ne="Control",Y=R.getDocument,ce=R.getBody,l=G.rangesEqual;function B(e){return typeof e=="string"?/^backward(s)?$/i.test(e):!!e}function C(e,r){if(e){if(R.isWindow(e))return e;if(e instanceof V)return e.win;var s=R.getContentDocument(e,u,r);return R.getWindow(s)}else return window}function L(e){return C(e,"getWinSelection").getSelection()}function Q(e){return C(e,"getDocSelection").document.selection}function H(e){var r=!1;return e.anchorNode&&(r=R.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)==1),r}var D=T(window,"getSelection"),q=w.isHostObject(document,"selection");X.implementsWinGetSelection=D,X.implementsDocSelection=q;var W=q&&(!D||i.config.preferTextRange);if(W)le=Q,i.isSelectionValid=function(e){var r=C(e,"isSelectionValid").document,s=r.selection;return s.type!="None"||Y(s.createRange().parentElement())==r};else if(D)le=L,i.isSelectionValid=function(){return!0};else return u.fail("Neither document.selection or window.getSelection() detected."),!1;i.getNativeSelection=le;var F=le();if(!F)return u.fail("Native selection was null (possibly issue 138?)"),!1;var de=i.createNativeRange(document),v=ce(document),S=w.areHostProperties(F,["anchorNode","focusNode","anchorOffset","focusOffset"]);X.selectionHasAnchorAndFocus=S;var M=T(F,"extend");X.selectionHasExtend=M;var U=T(F,"setBaseAndExtent");X.selectionHasSetBaseAndExtent=U;var $=typeof F.rangeCount==p;X.selectionHasRangeCount=$;var he=!1,ae=!0,ee=M?function(e,r){var s=G.getRangeDocument(r),g=i.createRange(s);g.collapseToPoint(r.endContainer,r.endOffset),e.addRange(E(g)),e.extend(r.startContainer,r.startOffset)}:null;w.areHostMethods(F,["addRange","getRangeAt","removeAllRanges"])&&typeof F.rangeCount==p&&X.implementsDomRange&&function(){var e=window.getSelection();if(e){for(var r=e.rangeCount,s=r>1,g=[],O=H(e),b=0;b<r;++b)g[b]=e.getRangeAt(b);var J=R.createTestElement(document,"",!1),t=J.appendChild(document.createTextNode("\xA0\xA0\xA0")),n=document.createRange();if(n.setStart(t,1),n.collapse(!0),e.removeAllRanges(),e.addRange(n),ae=e.rangeCount==1,e.removeAllRanges(),!s){var o=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(o&&parseInt(o[1])>=36)he=!1;else{var d=n.cloneRange();n.setStart(t,0),d.setEnd(t,3),d.setStart(t,2),e.addRange(n),e.addRange(d),he=e.rangeCount==2}}for(R.removeNode(J),e.removeAllRanges(),b=0;b<r;++b)b==0&&O?ee?ee(e,g[b]):(i.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),e.addRange(g[b])):e.addRange(g[b])}}(),X.selectionSupportsMultipleRanges=he,X.collapsedNonEditableSelectionsSupported=ae;var te=!1,re;v&&T(v,"createControlRange")&&(re=v.createControlRange(),w.areHostProperties(re,["item","add"])&&(te=!0)),X.implementsControlRange=te,S?ie=function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:ie=function(e){return e.rangeCount?e.getRangeAt(e.rangeCount-1).collapsed:!1};function fe(e,r,s){var g=s?"end":"start",O=s?"start":"end";e.anchorNode=r[g+"Container"],e.anchorOffset=r[g+"Offset"],e.focusNode=r[O+"Container"],e.focusOffset=r[O+"Offset"]}function a(e){var r=e.nativeSelection;e.anchorNode=r.anchorNode,e.anchorOffset=r.anchorOffset,e.focusNode=r.focusNode,e.focusOffset=r.focusOffset}function h(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0,_(e)}function _(e){e.type=e.rangeCount==0?"None":ie(e)?"Caret":"Range"}function E(e){var r;return e instanceof G?(r=i.createNativeRange(e.getDocument()),r.setEnd(e.endContainer,e.endOffset),r.setStart(e.startContainer,e.startOffset)):e instanceof K?r=e.nativeRange:X.implementsDomRange&&e instanceof R.getWindow(e.startContainer).Range&&(r=e),r}function Z(e){if(!e.length||e[0].nodeType!=1)return!1;for(var r=1,s=e.length;r<s;++r)if(!R.isAncestorOf(e[0],e[r]))return!1;return!0}function k(e){var r=e.getNodes();if(!Z(r))throw u.createError("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return r[0]}function pe(e){return!!e&&typeof e.text!="undefined"}function ge(e,r){var s=new K(r);e._ranges=[s],fe(e,s,!1),e.rangeCount=1,e.isCollapsed=s.collapsed,_(e)}function oe(e){if(e._ranges.length=0,e.docSelection.type=="None")h(e);else{var r=e.docSelection.createRange();if(pe(r))ge(e,r);else{e.rangeCount=r.length;for(var s,g=Y(r.item(0)),O=0;O<e.rangeCount;++O)s=i.createRange(g),s.selectNode(r.item(O)),e._ranges.push(s);e.isCollapsed=e.rangeCount==1&&e._ranges[0].collapsed,fe(e,e._ranges[e.rangeCount-1],!1),_(e)}}}function Be(e,r){for(var s=e.docSelection.createRange(),g=k(r),O=Y(s.item(0)),b=ce(O).createControlRange(),J=0,t=s.length;J<t;++J)b.add(s.item(J));try{b.add(g)}catch(n){throw u.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}b.select(),oe(e)}var ye;T(F,"getRangeAt")?ye=function(e,r){try{return e.getRangeAt(r)}catch(s){return null}}:S&&(ye=function(e){var r=Y(e.anchorNode),s=i.createRange(r);return s.setStartAndEnd(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),s.collapsed!==this.isCollapsed&&s.setStartAndEnd(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset),s});function V(e,r,s){this.nativeSelection=e,this.docSelection=r,this._ranges=[],this.win=s,this.refresh()}V.prototype=i.selectionPrototype;function He(e){e.win=e.anchorNode=e.focusNode=e._ranges=null,e.rangeCount=e.anchorOffset=e.focusOffset=0,e.detached=!0,_(e)}var Re=[];function Me(e,r){for(var s=Re.length,g,O;s--;)if(g=Re[s],O=g.selection,r=="deleteAll")He(O);else if(g.win==e)return r=="delete"?(Re.splice(s,1),!0):O;return r=="deleteAll"&&(Re.length=0),null}var _e=function(e){if(e&&e instanceof V)return e.refresh(),e;e=C(e,"getNativeSelection");var r=Me(e),s=le(e),g=q?Q(e):null;return r?(r.nativeSelection=s,r.docSelection=g,r.refresh()):(r=new V(s,g,e),Re.push({win:e,selection:r})),r};i.getSelection=_e,w.createAliasForDeprecatedMethod(i,"getIframeSelection","getSelection");var A=V.prototype;function De(e,r){for(var s=Y(r[0].startContainer),g=ce(s).createControlRange(),O=0,b,J=r.length;O<J;++O){b=k(r[O]);try{g.add(b)}catch(t){throw u.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}g.select(),oe(e)}if(!W&&S&&w.areHostMethods(F,["removeAllRanges","addRange"])){A.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),h(this)};var Ae=function(e,r){ee(e.nativeSelection,r),e.refresh()};$?A.addRange=function(e,r){if(te&&q&&this.docSelection.type==ne)Be(this,e);else if(B(r)&&M)Ae(this,e);else{var s;he?s=this.rangeCount:(this.removeAllRanges(),s=0);var g=E(e).cloneRange();try{this.nativeSelection.addRange(g)}catch(b){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==s+1){if(i.config.checkSelectionRanges){var O=ye(this.nativeSelection,this.rangeCount-1);O&&!l(O,e)&&(e=new K(O))}this._ranges[this.rangeCount-1]=e,fe(this,e,Se(this.nativeSelection)),this.isCollapsed=ie(this),_(this)}else this.refresh()}}:A.addRange=function(e,r){B(r)&&M?Ae(this,e):(this.nativeSelection.addRange(E(e)),this.refresh())},A.setRanges=function(e){if(te&&q&&e.length>1)De(this,e);else{this.removeAllRanges();for(var r=0,s=e.length;r<s;++r)this.addRange(e[r])}}}else if(T(F,"empty")&&T(de,"select")&&te&&W)A.removeAllRanges=function(){try{if(this.docSelection.empty(),this.docSelection.type!="None"){var e;if(this.anchorNode)e=Y(this.anchorNode);else if(this.docSelection.type==ne){var r=this.docSelection.createRange();r.length&&(e=Y(r.item(0)))}if(e){var s=ce(e).createTextRange();s.select(),this.docSelection.empty()}}}catch(g){}h(this)},A.addRange=function(e){this.docSelection.type==ne?Be(this,e):(i.WrappedTextRange.rangeToTextRange(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,fe(this,e,!1),_(this))},A.setRanges=function(e){this.removeAllRanges();var r=e.length;r>1?De(this,e):r&&this.addRange(e[0])};else return u.fail("No means of selecting a Range or TextRange was found"),!1;A.getRangeAt=function(e){if(e<0||e>=this.rangeCount)throw new j("INDEX_SIZE_ERR");return this._ranges[e].cloneRange()};var we;if(W)we=function(e){var r;i.isSelectionValid(e.win)?r=e.docSelection.createRange():(r=ce(e.win.document).createTextRange(),r.collapse(!0)),e.docSelection.type==ne?oe(e):pe(r)?ge(e,r):h(e)};else if(T(F,"getRangeAt")&&typeof F.rangeCount==p)we=function(e){if(te&&q&&e.docSelection.type==ne)oe(e);else if(e._ranges.length=e.rangeCount=e.nativeSelection.rangeCount,e.rangeCount){for(var r=0,s=e.rangeCount;r<s;++r)e._ranges[r]=new i.WrappedRange(e.nativeSelection.getRangeAt(r));fe(e,e._ranges[e.rangeCount-1],Se(e.nativeSelection)),e.isCollapsed=ie(e),_(e)}else h(e)};else if(S&&typeof F.isCollapsed==c&&typeof de.collapsed==c&&X.implementsDomRange)we=function(e){var r,s=e.nativeSelection;s.anchorNode?(r=ye(s,0),e._ranges=[r],e.rangeCount=1,a(e),e.isCollapsed=ie(e),_(e)):h(e)};else return u.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;A.refresh=function(e){var r=e?this._ranges.slice(0):null,s=this.anchorNode,g=this.anchorOffset;if(we(this),e){var O=r.length;if(O!=this._ranges.length||this.anchorNode!=s||this.anchorOffset!=g)return!0;for(;O--;)if(!l(r[O],this._ranges[O]))return!0;return!1}};var Ye=function(e,r){var s=e.getAllRanges();e.removeAllRanges();for(var g=0,O=s.length;g<O;++g)l(r,s[g])||e.addRange(s[g]);e.rangeCount||h(e)};te&&q?A.removeRange=function(e){if(this.docSelection.type==ne){for(var r=this.docSelection.createRange(),s=k(e),g=Y(r.item(0)),O=ce(g).createControlRange(),b,J=!1,t=0,n=r.length;t<n;++t)b=r.item(t),b!==s||J?O.add(r.item(t)):J=!0;O.select(),oe(this)}else Ye(this,e)}:A.removeRange=function(e){Ye(this,e)};var Se;!W&&S&&X.implementsDomRange?(Se=H,A.isBackward=function(){return Se(this)}):Se=A.isBackward=function(){return!1},A.isBackwards=A.isBackward,A.toString=function(){for(var e=[],r=0,s=this.rangeCount;r<s;++r)e[r]=""+this._ranges[r];return e.join("")};function Te(e,r){if(e.win.document!=Y(r))throw new j("WRONG_DOCUMENT_ERR")}function be(e,r){if(r<0||r>(R.isCharacterDataNode(e)?e.length:e.childNodes.length))throw new j("INDEX_SIZE_ERR")}A.collapse=function(e,r){Te(this,e);var s=i.createRange(e);s.collapseToPoint(e,r),this.setSingleRange(s),this.isCollapsed=!0},A.collapseToStart=function(){if(this.rangeCount){var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)}else throw new j("INVALID_STATE_ERR")},A.collapseToEnd=function(){if(this.rangeCount){var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)}else throw new j("INVALID_STATE_ERR")},A.selectAllChildren=function(e){Te(this,e);var r=i.createRange(e);r.selectNodeContents(e),this.setSingleRange(r)},U?A.setBaseAndExtent=function(e,r,s,g){this.nativeSelection.setBaseAndExtent(e,r,s,g),this.refresh()}:M&&(A.setBaseAndExtent=function(e,r,s,g){be(e,r),be(s,g),Te(this,e),Te(this,s);var O=i.createRange(node),b=R.comparePoints(e,r,s,g)==-1;b?O.setStartAndEnd(s,g,e,r):O.setStartAndEnd(e,r,s,g),this.setSingleRange(O,b)}),A.deleteFromDocument=function(){if(te&&q&&this.docSelection.type==ne){for(var e=this.docSelection.createRange(),r;e.length;)r=e.item(0),e.remove(r),R.removeNode(r);this.refresh()}else if(this.rangeCount){var s=this.getAllRanges();if(s.length){this.removeAllRanges();for(var g=0,O=s.length;g<O;++g)s[g].deleteContents();this.addRange(s[O-1])}}},A.eachRange=function(e,r){for(var s=0,g=this._ranges.length;s<g;++s)if(e(this.getRangeAt(s)))return r},A.getAllRanges=function(){var e=[];return this.eachRange(function(r){e.push(r)}),e},A.setSingleRange=function(e,r){this.removeAllRanges(),this.addRange(e,r)},A.callMethodOnEachRange=function(e,r){var s=[];return this.eachRange(function(g){s.push(g[e].apply(g,r||[]))}),s};function Fe(e){return function(r,s){var g;this.rangeCount?(g=this.getRangeAt(0),g["set"+(e?"Start":"End")](r,s)):(g=i.createRange(this.win.document),g.setStartAndEnd(r,s)),this.setSingleRange(g,this.isBackward())}}A.setStart=Fe(!0),A.setEnd=Fe(!1),i.rangePrototype.select=function(e){_e(this.getDocument()).setSingleRange(this,e)},A.changeEachRange=function(e){var r=[],s=this.isBackward();this.eachRange(function(g){e(g),r.push(g)}),this.removeAllRanges(),s&&r.length==1?this.addRange(r[0],"backward"):this.setRanges(r)},A.containsNode=function(e,r){return this.eachRange(function(s){return s.containsNode(e,r)},!0)||!1},A.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}},A.moveToBookmark=function(e){for(var r=[],s=0,g,O;g=e.rangeBookmarks[s++];)O=i.createRange(this.win),O.moveToBookmark(g),r.push(O);e.backward?this.setSingleRange(r[0],"backward"):this.setRanges(r)},A.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},A.restoreRanges=function(e){this.removeAllRanges();for(var r=0,s;s=e.ranges[r];++r)this.addRange(s,e.backward&&r==0)},A.toHtml=function(){var e=[];return this.eachRange(function(r){e.push(G.toHtml(r))}),e.join("")},X.implementsTextRange&&(A.getNativeTextRange=function(){var e,r;if(e=this.docSelection){var s=e.createRange();if(pe(s))return s;throw u.createError("getNativeTextRange: selection is a control selection")}else{if(this.rangeCount>0)return i.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw u.createError("getNativeTextRange: selection contains no range")}});function xe(e){var r=[],s=new z(e.anchorNode,e.anchorOffset),g=new z(e.focusNode,e.focusOffset),O=typeof e.getName=="function"?e.getName():"Selection";if(typeof e.rangeCount!="undefined")for(var b=0,J=e.rangeCount;b<J;++b)r[b]=G.inspect(e.getRangeAt(b));return"["+O+"(Ranges: "+r.join(", ")+")(anchor: "+s.inspect()+", focus: "+g.inspect()+"]"}A.getName=function(){return"WrappedSelection"},A.inspect=function(){return xe(this)},A.detach=function(){Me(this.win,"delete"),He(this)},V.detachAll=function(){Me(null,"deleteAll")},V.inspect=xe,V.isDirectionBackward=B,i.Selection=V,i.selectionPrototype=A,i.addShimListener(function(e){typeof e.getSelection=="undefined"&&(e.getSelection=function(){return _e(e)}),e=null})});var vt=!1,je=function(i){vt||(vt=!0,!P.initialized&&P.config.autoInitialize&&$e())};return Ne&&(document.readyState=="complete"?je():(Ce(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",je,!1),ze(window,"load",je))),P},this)}}]);

//# sourceMappingURL=vendor.rangy.a7d3433c49c20c276e43.chunk.js.map