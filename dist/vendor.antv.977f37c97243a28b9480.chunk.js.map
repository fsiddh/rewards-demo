{"version":3,"file":"vendor.antv.977f37c97243a28b9480.chunk.js","mappings":"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","sources":["webpack://rewards-catalog/./node_modules/@antv/x6/lib/geometry/angle.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/geometry/curve.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/geometry/ellipse.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/geometry/geometry.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/geometry/index.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/geometry/line.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/geometry/path/close.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/geometry/path/curveto.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/geometry/path/index.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/geometry/path/lineto.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/geometry/path/moveto.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/geometry/path/normalize.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/geometry/path/path.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/geometry/path/segment.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/geometry/path/util.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/geometry/point.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/geometry/polyline.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/geometry/rectangle.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/geometry/util.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/util/dom/af.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/util/dom/attr.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/util/dom/class.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/util/dom/core.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/util/dom/elem.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/util/dom/geom.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/util/dom/matrix.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/util/dom/path.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/util/dom/prefix.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/util/dom/selection.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/util/dom/style.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/util/dom/text.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/util/dom/transform.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/util/lang/lang.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/util/number/index.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/util/number/number.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/util/object/index.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/util/object/inherit.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/util/object/mixins.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/util/object/object.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/util/text/annotate.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/util/text/index.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/util/text/main.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/util/text/sanitize.js","webpack://rewards-catalog/./node_modules/@antv/x6/lib/util/vector/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Angle = void 0;\nvar Angle;\n(function (Angle) {\n    /**\n     * Converts radian angle to degree angle.\n     * @param rad The radians to convert.\n     */\n    function toDeg(rad) {\n        return ((180 * rad) / Math.PI) % 360;\n    }\n    Angle.toDeg = toDeg;\n    /**\n     * Converts degree angle to radian angle.\n     * @param deg The degree angle to convert.\n     * @param over360\n     */\n    Angle.toRad = function (deg, over360) {\n        if (over360 === void 0) { over360 = false; }\n        var d = over360 ? deg : deg % 360;\n        return (d * Math.PI) / 180;\n    };\n    /**\n     * Returns the angle in degrees and clamps its value between `0` and `360`.\n     */\n    function normalize(angle) {\n        return (angle % 360) + (angle < 0 ? 360 : 0);\n    }\n    Angle.normalize = normalize;\n})(Angle = exports.Angle || (exports.Angle = {}));\n//# sourceMappingURL=angle.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Curve = void 0;\nvar point_1 = require(\"./point\");\nvar line_1 = require(\"./line\");\nvar rectangle_1 = require(\"./rectangle\");\nvar polyline_1 = require(\"./polyline\");\nvar geometry_1 = require(\"./geometry\");\nvar Curve = /** @class */ (function (_super) {\n    __extends(Curve, _super);\n    function Curve(start, controlPoint1, controlPoint2, end) {\n        var _this = _super.call(this) || this;\n        _this.PRECISION = 3;\n        _this.start = point_1.Point.create(start);\n        _this.controlPoint1 = point_1.Point.create(controlPoint1);\n        _this.controlPoint2 = point_1.Point.create(controlPoint2);\n        _this.end = point_1.Point.create(end);\n        return _this;\n    }\n    Object.defineProperty(Curve.prototype, Symbol.toStringTag, {\n        get: function () {\n            return Curve.toStringTag;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Curve.prototype.bbox = function () {\n        var start = this.start;\n        var controlPoint1 = this.controlPoint1;\n        var controlPoint2 = this.controlPoint2;\n        var end = this.end;\n        var x0 = start.x;\n        var y0 = start.y;\n        var x1 = controlPoint1.x;\n        var y1 = controlPoint1.y;\n        var x2 = controlPoint2.x;\n        var y2 = controlPoint2.y;\n        var x3 = end.x;\n        var y3 = end.y;\n        var points = []; // local extremes\n        var tvalues = []; // t values of local extremes\n        var bounds = [[], []];\n        var a;\n        var b;\n        var c;\n        var t;\n        var t1;\n        var t2;\n        var b2ac;\n        var sqrtb2ac;\n        for (var i = 0; i < 2; i += 1) {\n            if (i === 0) {\n                b = 6 * x0 - 12 * x1 + 6 * x2;\n                a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;\n                c = 3 * x1 - 3 * x0;\n            }\n            else {\n                b = 6 * y0 - 12 * y1 + 6 * y2;\n                a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;\n                c = 3 * y1 - 3 * y0;\n            }\n            if (Math.abs(a) < 1e-12) {\n                if (Math.abs(b) < 1e-12) {\n                    continue;\n                }\n                t = -c / b;\n                if (0 < t && t < 1)\n                    tvalues.push(t);\n                continue;\n            }\n            b2ac = b * b - 4 * c * a;\n            sqrtb2ac = Math.sqrt(b2ac);\n            if (b2ac < 0)\n                continue;\n            t1 = (-b + sqrtb2ac) / (2 * a);\n            if (0 < t1 && t1 < 1)\n                tvalues.push(t1);\n            t2 = (-b - sqrtb2ac) / (2 * a);\n            if (0 < t2 && t2 < 1)\n                tvalues.push(t2);\n        }\n        var x;\n        var y;\n        var mt;\n        var j = tvalues.length;\n        var jlen = j;\n        while (j) {\n            j -= 1;\n            t = tvalues[j];\n            mt = 1 - t;\n            x =\n                mt * mt * mt * x0 +\n                    3 * mt * mt * t * x1 +\n                    3 * mt * t * t * x2 +\n                    t * t * t * x3;\n            bounds[0][j] = x;\n            y =\n                mt * mt * mt * y0 +\n                    3 * mt * mt * t * y1 +\n                    3 * mt * t * t * y2 +\n                    t * t * t * y3;\n            bounds[1][j] = y;\n            points[j] = { X: x, Y: y };\n        }\n        tvalues[jlen] = 0;\n        tvalues[jlen + 1] = 1;\n        points[jlen] = { X: x0, Y: y0 };\n        points[jlen + 1] = { X: x3, Y: y3 };\n        bounds[0][jlen] = x0;\n        bounds[1][jlen] = y0;\n        bounds[0][jlen + 1] = x3;\n        bounds[1][jlen + 1] = y3;\n        tvalues.length = jlen + 2;\n        bounds[0].length = jlen + 2;\n        bounds[1].length = jlen + 2;\n        points.length = jlen + 2;\n        var left = Math.min.apply(null, bounds[0]);\n        var top = Math.min.apply(null, bounds[1]);\n        var right = Math.max.apply(null, bounds[0]);\n        var bottom = Math.max.apply(null, bounds[1]);\n        return new rectangle_1.Rectangle(left, top, right - left, bottom - top);\n    };\n    Curve.prototype.closestPoint = function (p, options) {\n        if (options === void 0) { options = {}; }\n        return this.pointAtT(this.closestPointT(p, options));\n    };\n    Curve.prototype.closestPointLength = function (p, options) {\n        if (options === void 0) { options = {}; }\n        var opts = this.getOptions(options);\n        return this.lengthAtT(this.closestPointT(p, opts), opts);\n    };\n    Curve.prototype.closestPointNormalizedLength = function (p, options) {\n        if (options === void 0) { options = {}; }\n        var opts = this.getOptions(options);\n        var cpLength = this.closestPointLength(p, opts);\n        if (!cpLength) {\n            return 0;\n        }\n        var length = this.length(opts);\n        if (length === 0) {\n            return 0;\n        }\n        return cpLength / length;\n    };\n    Curve.prototype.closestPointT = function (p, options) {\n        if (options === void 0) { options = {}; }\n        var precision = this.getPrecision(options);\n        var subdivisions = this.getDivisions(options);\n        var precisionRatio = Math.pow(10, -precision);\n        var investigatedSubdivision = null;\n        var investigatedSubdivisionStartT = 0;\n        var investigatedSubdivisionEndT = 0;\n        var distFromStart = 0;\n        var distFromEnd = 0;\n        var chordLength = 0;\n        var minSumDist = null;\n        var count = subdivisions.length;\n        var piece = count > 0 ? 1 / count : 0;\n        subdivisions.forEach(function (division, i) {\n            var startDist = division.start.distance(p);\n            var endDist = division.end.distance(p);\n            var sumDist = startDist + endDist;\n            if (minSumDist == null || sumDist < minSumDist) {\n                investigatedSubdivision = division;\n                investigatedSubdivisionStartT = i * piece;\n                investigatedSubdivisionEndT = (i + 1) * piece;\n                distFromStart = startDist;\n                distFromEnd = endDist;\n                minSumDist = sumDist;\n                chordLength = division.endpointDistance();\n            }\n        });\n        // Recursively divide investigated subdivision, until distance between\n        // baselinePoint and closest path endpoint is within `10^(-precision)`,\n        // then return the closest endpoint of that final subdivision.\n        while (true) {\n            // check if we have reached at least one required observed precision\n            // - calculated as: the difference in distances from point to start and end divided by the distance\n            // - note that this function is not monotonic = it doesn't converge stably but has \"teeth\"\n            // - the function decreases while one of the endpoints is fixed but \"jumps\" whenever we switch\n            // - this criterion works well for points lying far away from the curve\n            var startPrecisionRatio = distFromStart\n                ? Math.abs(distFromStart - distFromEnd) / distFromStart\n                : 0;\n            var endPrecisionRatio = distFromEnd != null\n                ? Math.abs(distFromStart - distFromEnd) / distFromEnd\n                : 0;\n            var hasRequiredPrecision = startPrecisionRatio < precisionRatio ||\n                endPrecisionRatio < precisionRatio;\n            // check if we have reached at least one required minimal distance\n            // - calculated as: the subdivision chord length multiplied by precisionRatio\n            // - calculation is relative so it will work for arbitrarily large/small curves and their subdivisions\n            // - this is a backup criterion that works well for points lying \"almost at\" the curve\n            var hasMiniStartDistance = distFromStart\n                ? distFromStart < chordLength * precisionRatio\n                : true;\n            var hasMiniEndDistance = distFromEnd\n                ? distFromEnd < chordLength * precisionRatio\n                : true;\n            var hasMiniDistance = hasMiniStartDistance || hasMiniEndDistance;\n            if (hasRequiredPrecision || hasMiniDistance) {\n                return distFromStart <= distFromEnd\n                    ? investigatedSubdivisionStartT\n                    : investigatedSubdivisionEndT;\n            }\n            // otherwise, set up for next iteration\n            var divided = investigatedSubdivision.divide(0.5);\n            piece /= 2;\n            var startDist1 = divided[0].start.distance(p);\n            var endDist1 = divided[0].end.distance(p);\n            var sumDist1 = startDist1 + endDist1;\n            var startDist2 = divided[1].start.distance(p);\n            var endDist2 = divided[1].end.distance(p);\n            var sumDist2 = startDist2 + endDist2;\n            if (sumDist1 <= sumDist2) {\n                investigatedSubdivision = divided[0];\n                investigatedSubdivisionEndT -= piece;\n                distFromStart = startDist1;\n                distFromEnd = endDist1;\n            }\n            else {\n                investigatedSubdivision = divided[1];\n                investigatedSubdivisionStartT += piece;\n                distFromStart = startDist2;\n                distFromEnd = endDist2;\n            }\n        }\n    };\n    Curve.prototype.closestPointTangent = function (p, options) {\n        if (options === void 0) { options = {}; }\n        return this.tangentAtT(this.closestPointT(p, options));\n    };\n    Curve.prototype.containsPoint = function (p, options) {\n        if (options === void 0) { options = {}; }\n        var polyline = this.toPolyline(options);\n        return polyline.containsPoint(p);\n    };\n    Curve.prototype.divideAt = function (ratio, options) {\n        if (options === void 0) { options = {}; }\n        if (ratio <= 0) {\n            return this.divideAtT(0);\n        }\n        if (ratio >= 1) {\n            return this.divideAtT(1);\n        }\n        var t = this.tAt(ratio, options);\n        return this.divideAtT(t);\n    };\n    Curve.prototype.divideAtLength = function (length, options) {\n        if (options === void 0) { options = {}; }\n        var t = this.tAtLength(length, options);\n        return this.divideAtT(t);\n    };\n    Curve.prototype.divide = function (t) {\n        return this.divideAtT(t);\n    };\n    Curve.prototype.divideAtT = function (t) {\n        var start = this.start;\n        var controlPoint1 = this.controlPoint1;\n        var controlPoint2 = this.controlPoint2;\n        var end = this.end;\n        if (t <= 0) {\n            return [\n                new Curve(start, start, start, start),\n                new Curve(start, controlPoint1, controlPoint2, end),\n            ];\n        }\n        if (t >= 1) {\n            return [\n                new Curve(start, controlPoint1, controlPoint2, end),\n                new Curve(end, end, end, end),\n            ];\n        }\n        var dividerPoints = this.getSkeletonPoints(t);\n        var startControl1 = dividerPoints.startControlPoint1;\n        var startControl2 = dividerPoints.startControlPoint2;\n        var divider = dividerPoints.divider;\n        var dividerControl1 = dividerPoints.dividerControlPoint1;\n        var dividerControl2 = dividerPoints.dividerControlPoint2;\n        return [\n            new Curve(start, startControl1, startControl2, divider),\n            new Curve(divider, dividerControl1, dividerControl2, end),\n        ];\n    };\n    Curve.prototype.endpointDistance = function () {\n        return this.start.distance(this.end);\n    };\n    Curve.prototype.getSkeletonPoints = function (t) {\n        var start = this.start;\n        var control1 = this.controlPoint1;\n        var control2 = this.controlPoint2;\n        var end = this.end;\n        // shortcuts for `t` values that are out of range\n        if (t <= 0) {\n            return {\n                startControlPoint1: start.clone(),\n                startControlPoint2: start.clone(),\n                divider: start.clone(),\n                dividerControlPoint1: control1.clone(),\n                dividerControlPoint2: control2.clone(),\n            };\n        }\n        if (t >= 1) {\n            return {\n                startControlPoint1: control1.clone(),\n                startControlPoint2: control2.clone(),\n                divider: end.clone(),\n                dividerControlPoint1: end.clone(),\n                dividerControlPoint2: end.clone(),\n            };\n        }\n        var midpoint1 = new line_1.Line(start, control1).pointAt(t);\n        var midpoint2 = new line_1.Line(control1, control2).pointAt(t);\n        var midpoint3 = new line_1.Line(control2, end).pointAt(t);\n        var subControl1 = new line_1.Line(midpoint1, midpoint2).pointAt(t);\n        var subControl2 = new line_1.Line(midpoint2, midpoint3).pointAt(t);\n        var divideLine = new line_1.Line(subControl1, subControl2).pointAt(t);\n        return {\n            startControlPoint1: midpoint1,\n            startControlPoint2: subControl1,\n            divider: divideLine,\n            dividerControlPoint1: subControl2,\n            dividerControlPoint2: midpoint3,\n        };\n    };\n    Curve.prototype.getSubdivisions = function (options) {\n        if (options === void 0) { options = {}; }\n        var precision = this.getPrecision(options);\n        var subdivisions = [\n            new Curve(this.start, this.controlPoint1, this.controlPoint2, this.end),\n        ];\n        if (precision === 0) {\n            return subdivisions;\n        }\n        var previousLength = this.endpointDistance();\n        var precisionRatio = Math.pow(10, -precision);\n        // Recursively divide curve at `t = 0.5`, until the difference between\n        // observed length at subsequent iterations is lower than precision.\n        var iteration = 0;\n        var _loop_1 = function () {\n            iteration += 1;\n            var divisions = [];\n            subdivisions.forEach(function (c) {\n                // dividing at t = 0.5 (not at middle length!)\n                var divided = c.divide(0.5);\n                divisions.push(divided[0], divided[1]);\n            });\n            // measure new length\n            var length_1 = divisions.reduce(function (memo, c) { return memo + c.endpointDistance(); }, 0);\n            // check if we have reached required observed precision\n            // sine-like curves may have the same observed length in iteration 0 and 1 - skip iteration 1\n            // not a problem for further iterations because cubic curves cannot have more than two local extrema\n            // (i.e. cubic curves cannot intersect the baseline more than once)\n            // therefore two subsequent iterations cannot produce sampling with equal length\n            var ratio = length_1 !== 0 ? (length_1 - previousLength) / length_1 : 0;\n            if (iteration > 1 && ratio < precisionRatio) {\n                return { value: divisions };\n            }\n            subdivisions = divisions;\n            previousLength = length_1;\n        };\n        while (true) {\n            var state_1 = _loop_1();\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n        }\n    };\n    Curve.prototype.length = function (options) {\n        if (options === void 0) { options = {}; }\n        var divisions = this.getDivisions(options);\n        return divisions.reduce(function (memo, c) {\n            return memo + c.endpointDistance();\n        }, 0);\n    };\n    Curve.prototype.lengthAtT = function (t, options) {\n        if (options === void 0) { options = {}; }\n        if (t <= 0) {\n            return 0;\n        }\n        var precision = options.precision === undefined ? this.PRECISION : options.precision;\n        var subCurve = this.divide(t)[0];\n        return subCurve.length({ precision: precision });\n    };\n    Curve.prototype.pointAt = function (ratio, options) {\n        if (options === void 0) { options = {}; }\n        if (ratio <= 0) {\n            return this.start.clone();\n        }\n        if (ratio >= 1) {\n            return this.end.clone();\n        }\n        var t = this.tAt(ratio, options);\n        return this.pointAtT(t);\n    };\n    Curve.prototype.pointAtLength = function (length, options) {\n        if (options === void 0) { options = {}; }\n        var t = this.tAtLength(length, options);\n        return this.pointAtT(t);\n    };\n    Curve.prototype.pointAtT = function (t) {\n        if (t <= 0) {\n            return this.start.clone();\n        }\n        if (t >= 1) {\n            return this.end.clone();\n        }\n        return this.getSkeletonPoints(t).divider;\n    };\n    Curve.prototype.isDifferentiable = function () {\n        var start = this.start;\n        var control1 = this.controlPoint1;\n        var control2 = this.controlPoint2;\n        var end = this.end;\n        return !(start.equals(control1) &&\n            control1.equals(control2) &&\n            control2.equals(end));\n    };\n    Curve.prototype.tangentAt = function (ratio, options) {\n        if (options === void 0) { options = {}; }\n        if (!this.isDifferentiable())\n            return null;\n        if (ratio < 0) {\n            ratio = 0; // tslint:disable-line\n        }\n        else if (ratio > 1) {\n            ratio = 1; // tslint:disable-line\n        }\n        var t = this.tAt(ratio, options);\n        return this.tangentAtT(t);\n    };\n    Curve.prototype.tangentAtLength = function (length, options) {\n        if (options === void 0) { options = {}; }\n        if (!this.isDifferentiable()) {\n            return null;\n        }\n        var t = this.tAtLength(length, options);\n        return this.tangentAtT(t);\n    };\n    Curve.prototype.tangentAtT = function (t) {\n        if (!this.isDifferentiable()) {\n            return null;\n        }\n        if (t < 0) {\n            t = 0; // tslint:disable-line\n        }\n        if (t > 1) {\n            t = 1; // tslint:disable-line\n        }\n        var skeletonPoints = this.getSkeletonPoints(t);\n        var p1 = skeletonPoints.startControlPoint2;\n        var p2 = skeletonPoints.dividerControlPoint1;\n        var tangentStart = skeletonPoints.divider;\n        var tangentLine = new line_1.Line(p1, p2);\n        // move so that tangent line starts at the point requested\n        tangentLine.translate(tangentStart.x - p1.x, tangentStart.y - p1.y);\n        return tangentLine;\n    };\n    Curve.prototype.getPrecision = function (options) {\n        if (options === void 0) { options = {}; }\n        return options.precision == null ? this.PRECISION : options.precision;\n    };\n    Curve.prototype.getDivisions = function (options) {\n        if (options === void 0) { options = {}; }\n        if (options.subdivisions != null) {\n            return options.subdivisions;\n        }\n        var precision = this.getPrecision(options);\n        return this.getSubdivisions({ precision: precision });\n    };\n    Curve.prototype.getOptions = function (options) {\n        if (options === void 0) { options = {}; }\n        var precision = this.getPrecision(options);\n        var subdivisions = this.getDivisions(options);\n        return { precision: precision, subdivisions: subdivisions };\n    };\n    Curve.prototype.tAt = function (ratio, options) {\n        if (options === void 0) { options = {}; }\n        if (ratio <= 0) {\n            return 0;\n        }\n        if (ratio >= 1) {\n            return 1;\n        }\n        var opts = this.getOptions(options);\n        var total = this.length(opts);\n        var length = total * ratio;\n        return this.tAtLength(length, opts);\n    };\n    Curve.prototype.tAtLength = function (length, options) {\n        if (options === void 0) { options = {}; }\n        var fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // tslint:disable-line\n        }\n        var precision = this.getPrecision(options);\n        var subdivisions = this.getDivisions(options);\n        var opts = { precision: precision, subdivisions: subdivisions };\n        var investigatedSubdivision = null;\n        var investigatedSubdivisionStartT;\n        var investigatedSubdivisionEndT;\n        var baselinePointDistFromStart = 0;\n        var baselinePointDistFromEnd = 0;\n        var memo = 0;\n        var count = subdivisions.length;\n        var piece = count > 0 ? 1 / count : 0;\n        for (var i = 0; i < count; i += 1) {\n            var index = fromStart ? i : count - 1 - i;\n            var division = subdivisions[i];\n            var dist = division.endpointDistance();\n            if (length <= memo + dist) {\n                investigatedSubdivision = division;\n                investigatedSubdivisionStartT = index * piece;\n                investigatedSubdivisionEndT = (index + 1) * piece;\n                baselinePointDistFromStart = fromStart\n                    ? length - memo\n                    : dist + memo - length;\n                baselinePointDistFromEnd = fromStart\n                    ? dist + memo - length\n                    : length - memo;\n                break;\n            }\n            memo += dist;\n        }\n        if (investigatedSubdivision == null) {\n            return fromStart ? 1 : 0;\n        }\n        // note that precision affects what length is recorded\n        // (imprecise measurements underestimate length by up to 10^(-precision) of the precise length)\n        // e.g. at precision 1, the length may be underestimated by up to 10% and cause this function to return 1\n        var total = this.length(opts);\n        var precisionRatio = Math.pow(10, -precision);\n        // recursively divide investigated subdivision:\n        // until distance between baselinePoint and closest path endpoint is within 10^(-precision)\n        // then return the closest endpoint of that final subdivision\n        while (true) {\n            var ratio = void 0;\n            ratio = total !== 0 ? baselinePointDistFromStart / total : 0;\n            if (ratio < precisionRatio) {\n                return investigatedSubdivisionStartT;\n            }\n            ratio = total !== 0 ? baselinePointDistFromEnd / total : 0;\n            if (ratio < precisionRatio) {\n                return investigatedSubdivisionEndT;\n            }\n            // otherwise, set up for next iteration\n            var newBaselinePointDistFromStart = void 0;\n            var newBaselinePointDistFromEnd = void 0;\n            var divided = investigatedSubdivision.divide(0.5);\n            piece /= 2;\n            var baseline1Length = divided[0].endpointDistance();\n            var baseline2Length = divided[1].endpointDistance();\n            if (baselinePointDistFromStart <= baseline1Length) {\n                investigatedSubdivision = divided[0];\n                investigatedSubdivisionEndT -= piece;\n                newBaselinePointDistFromStart = baselinePointDistFromStart;\n                newBaselinePointDistFromEnd =\n                    baseline1Length - newBaselinePointDistFromStart;\n            }\n            else {\n                investigatedSubdivision = divided[1];\n                investigatedSubdivisionStartT += piece;\n                newBaselinePointDistFromStart =\n                    baselinePointDistFromStart - baseline1Length;\n                newBaselinePointDistFromEnd =\n                    baseline2Length - newBaselinePointDistFromStart;\n            }\n            baselinePointDistFromStart = newBaselinePointDistFromStart;\n            baselinePointDistFromEnd = newBaselinePointDistFromEnd;\n        }\n    };\n    Curve.prototype.toPoints = function (options) {\n        if (options === void 0) { options = {}; }\n        var subdivisions = this.getDivisions(options);\n        var points = [subdivisions[0].start.clone()];\n        subdivisions.forEach(function (c) { return points.push(c.end.clone()); });\n        return points;\n    };\n    Curve.prototype.toPolyline = function (options) {\n        if (options === void 0) { options = {}; }\n        return new polyline_1.Polyline(this.toPoints(options));\n    };\n    Curve.prototype.scale = function (sx, sy, origin) {\n        this.start.scale(sx, sy, origin);\n        this.controlPoint1.scale(sx, sy, origin);\n        this.controlPoint2.scale(sx, sy, origin);\n        this.end.scale(sx, sy, origin);\n        return this;\n    };\n    Curve.prototype.rotate = function (angle, origin) {\n        this.start.rotate(angle, origin);\n        this.controlPoint1.rotate(angle, origin);\n        this.controlPoint2.rotate(angle, origin);\n        this.end.rotate(angle, origin);\n        return this;\n    };\n    Curve.prototype.translate = function (tx, ty) {\n        if (typeof tx === 'number') {\n            this.start.translate(tx, ty);\n            this.controlPoint1.translate(tx, ty);\n            this.controlPoint2.translate(tx, ty);\n            this.end.translate(tx, ty);\n        }\n        else {\n            this.start.translate(tx);\n            this.controlPoint1.translate(tx);\n            this.controlPoint2.translate(tx);\n            this.end.translate(tx);\n        }\n        return this;\n    };\n    Curve.prototype.equals = function (c) {\n        return (c != null &&\n            this.start.equals(c.start) &&\n            this.controlPoint1.equals(c.controlPoint1) &&\n            this.controlPoint2.equals(c.controlPoint2) &&\n            this.end.equals(c.end));\n    };\n    Curve.prototype.clone = function () {\n        return new Curve(this.start, this.controlPoint1, this.controlPoint2, this.end);\n    };\n    Curve.prototype.toJSON = function () {\n        return {\n            start: this.start.toJSON(),\n            controlPoint1: this.controlPoint1.toJSON(),\n            controlPoint2: this.controlPoint2.toJSON(),\n            end: this.end.toJSON(),\n        };\n    };\n    Curve.prototype.serialize = function () {\n        return [\n            this.start.serialize(),\n            this.controlPoint1.serialize(),\n            this.controlPoint2.serialize(),\n            this.end.serialize(),\n        ].join(' ');\n    };\n    return Curve;\n}(geometry_1.Geometry));\nexports.Curve = Curve;\n(function (Curve) {\n    Curve.toStringTag = \"X6.Geometry.\" + Curve.name;\n    function isCurve(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Curve) {\n            return true;\n        }\n        var tag = instance[Symbol.toStringTag];\n        var curve = instance;\n        if ((tag == null || tag === Curve.toStringTag) &&\n            point_1.Point.isPoint(curve.start) &&\n            point_1.Point.isPoint(curve.controlPoint1) &&\n            point_1.Point.isPoint(curve.controlPoint2) &&\n            point_1.Point.isPoint(curve.end) &&\n            typeof curve.toPoints === 'function' &&\n            typeof curve.toPolyline === 'function') {\n            return true;\n        }\n        return false;\n    }\n    Curve.isCurve = isCurve;\n})(Curve = exports.Curve || (exports.Curve = {}));\nexports.Curve = Curve;\n(function (Curve) {\n    function getFirstControlPoints(rhs) {\n        var n = rhs.length;\n        var x = []; // `x` is a solution vector.\n        var tmp = [];\n        var b = 2.0;\n        x[0] = rhs[0] / b;\n        // Decomposition and forward substitution.\n        for (var i = 1; i < n; i += 1) {\n            tmp[i] = 1 / b;\n            b = (i < n - 1 ? 4.0 : 3.5) - tmp[i];\n            x[i] = (rhs[i] - x[i - 1]) / b;\n        }\n        for (var i = 1; i < n; i += 1) {\n            // Backsubstitution.\n            x[n - i - 1] -= tmp[n - i] * x[n - i];\n        }\n        return x;\n    }\n    function getCurveControlPoints(points) {\n        var knots = points.map(function (p) { return point_1.Point.clone(p); });\n        var firstControlPoints = [];\n        var secondControlPoints = [];\n        var n = knots.length - 1;\n        // Special case: Bezier curve should be a straight line.\n        if (n === 1) {\n            // 3P1 = 2P0 + P3\n            firstControlPoints[0] = new point_1.Point((2 * knots[0].x + knots[1].x) / 3, (2 * knots[0].y + knots[1].y) / 3);\n            // P2 = 2P1  P0\n            secondControlPoints[0] = new point_1.Point(2 * firstControlPoints[0].x - knots[0].x, 2 * firstControlPoints[0].y - knots[0].y);\n            return [firstControlPoints, secondControlPoints];\n        }\n        // Calculate first Bezier control points.\n        // Right hand side vector.\n        var rhs = [];\n        // Set right hand side X values.\n        for (var i = 1; i < n - 1; i += 1) {\n            rhs[i] = 4 * knots[i].x + 2 * knots[i + 1].x;\n        }\n        rhs[0] = knots[0].x + 2 * knots[1].x;\n        rhs[n - 1] = (8 * knots[n - 1].x + knots[n].x) / 2.0;\n        // Get first control points X-values.\n        var x = getFirstControlPoints(rhs);\n        // Set right hand side Y values.\n        for (var i = 1; i < n - 1; i += 1) {\n            rhs[i] = 4 * knots[i].y + 2 * knots[i + 1].y;\n        }\n        rhs[0] = knots[0].y + 2 * knots[1].y;\n        rhs[n - 1] = (8 * knots[n - 1].y + knots[n].y) / 2.0;\n        // Get first control points Y-values.\n        var y = getFirstControlPoints(rhs);\n        // Fill output arrays.\n        for (var i = 0; i < n; i += 1) {\n            // First control point.\n            firstControlPoints.push(new point_1.Point(x[i], y[i]));\n            // Second control point.\n            if (i < n - 1) {\n                secondControlPoints.push(new point_1.Point(2 * knots[i + 1].x - x[i + 1], 2 * knots[i + 1].y - y[i + 1]));\n            }\n            else {\n                secondControlPoints.push(new point_1.Point((knots[n].x + x[n - 1]) / 2, (knots[n].y + y[n - 1]) / 2));\n            }\n        }\n        return [firstControlPoints, secondControlPoints];\n    }\n    function throughPoints(points) {\n        if (points == null || (Array.isArray(points) && points.length < 2)) {\n            throw new Error('At least 2 points are required');\n        }\n        var controlPoints = getCurveControlPoints(points);\n        var curves = [];\n        for (var i = 0, ii = controlPoints[0].length; i < ii; i += 1) {\n            var controlPoint1 = new point_1.Point(controlPoints[0][i].x, controlPoints[0][i].y);\n            var controlPoint2 = new point_1.Point(controlPoints[1][i].x, controlPoints[1][i].y);\n            curves.push(new Curve(points[i], controlPoint1, controlPoint2, points[i + 1]));\n        }\n        return curves;\n    }\n    Curve.throughPoints = throughPoints;\n})(Curve = exports.Curve || (exports.Curve = {}));\nexports.Curve = Curve;\n//# sourceMappingURL=curve.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Ellipse = void 0;\nvar point_1 = require(\"./point\");\nvar rectangle_1 = require(\"./rectangle\");\nvar geometry_1 = require(\"./geometry\");\nvar Ellipse = /** @class */ (function (_super) {\n    __extends(Ellipse, _super);\n    function Ellipse(x, y, a, b) {\n        var _this = _super.call(this) || this;\n        _this.x = x == null ? 0 : x;\n        _this.y = y == null ? 0 : y;\n        _this.a = a == null ? 0 : a;\n        _this.b = b == null ? 0 : b;\n        return _this;\n    }\n    Object.defineProperty(Ellipse.prototype, Symbol.toStringTag, {\n        get: function () {\n            return Ellipse.toStringTag;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Ellipse.prototype, \"center\", {\n        get: function () {\n            return new point_1.Point(this.x, this.y);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Returns a rectangle that is the bounding box of the ellipse.\n     */\n    Ellipse.prototype.bbox = function () {\n        return rectangle_1.Rectangle.fromEllipse(this);\n    };\n    /**\n     * Returns a point that is the center of the ellipse.\n     */\n    Ellipse.prototype.getCenter = function () {\n        return this.center;\n    };\n    Ellipse.prototype.inflate = function (dx, dy) {\n        var w = dx;\n        var h = dy != null ? dy : dx;\n        this.a += 2 * w;\n        this.b += 2 * h;\n        return this;\n    };\n    Ellipse.prototype.normalizedDistance = function (x, y) {\n        var ref = point_1.Point.create(x, y);\n        var dx = ref.x - this.x;\n        var dy = ref.y - this.y;\n        var a = this.a;\n        var b = this.b;\n        return (dx * dx) / (a * a) + (dy * dy) / (b * b);\n    };\n    Ellipse.prototype.containsPoint = function (x, y) {\n        return this.normalizedDistance(x, y) <= 1;\n    };\n    /**\n     * Returns an array of the intersection points of the ellipse and the line.\n     * Returns `null` if no intersection exists.\n     */\n    Ellipse.prototype.intersectsWithLine = function (line) {\n        var intersections = [];\n        var rx = this.a;\n        var ry = this.b;\n        var a1 = line.start;\n        var a2 = line.end;\n        var dir = line.vector();\n        var diff = a1.diff(new point_1.Point(this.x, this.y));\n        var mDir = new point_1.Point(dir.x / (rx * rx), dir.y / (ry * ry));\n        var mDiff = new point_1.Point(diff.x / (rx * rx), diff.y / (ry * ry));\n        var a = dir.dot(mDir);\n        var b = dir.dot(mDiff);\n        var c = diff.dot(mDiff) - 1.0;\n        var d = b * b - a * c;\n        if (d < 0) {\n            return null;\n        }\n        if (d > 0) {\n            var root = Math.sqrt(d);\n            var ta = (-b - root) / a;\n            var tb = (-b + root) / a;\n            if ((ta < 0 || 1 < ta) && (tb < 0 || 1 < tb)) {\n                // outside\n                return null;\n            }\n            if (0 <= ta && ta <= 1) {\n                intersections.push(a1.lerp(a2, ta));\n            }\n            if (0 <= tb && tb <= 1) {\n                intersections.push(a1.lerp(a2, tb));\n            }\n        }\n        else {\n            var t = -b / a;\n            if (0 <= t && t <= 1) {\n                intersections.push(a1.lerp(a2, t));\n            }\n            else {\n                // outside\n                return null;\n            }\n        }\n        return intersections;\n    };\n    /**\n     * Returns the point on the boundary of the ellipse that is the\n     * intersection of the ellipse with a line starting in the center\n     * of the ellipse ending in the point `p`.\n     *\n     * If angle is specified, the intersection will take into account\n     * the rotation of the ellipse by angle degrees around its center.\n     */\n    Ellipse.prototype.intersectsWithLineFromCenterToPoint = function (p, angle) {\n        if (angle === void 0) { angle = 0; }\n        var ref = point_1.Point.clone(p);\n        if (angle) {\n            ref.rotate(angle, this.getCenter());\n        }\n        var dx = ref.x - this.x;\n        var dy = ref.y - this.y;\n        var result;\n        if (dx === 0) {\n            result = this.bbox().getNearestPointToPoint(ref);\n            if (angle) {\n                return result.rotate(-angle, this.getCenter());\n            }\n            return result;\n        }\n        var m = dy / dx;\n        var mSquared = m * m;\n        var aSquared = this.a * this.a;\n        var bSquared = this.b * this.b;\n        var x = Math.sqrt(1 / (1 / aSquared + mSquared / bSquared));\n        x = dx < 0 ? -x : x;\n        var y = m * x;\n        result = new point_1.Point(this.x + x, this.y + y);\n        if (angle) {\n            return result.rotate(-angle, this.getCenter());\n        }\n        return result;\n    };\n    /**\n     * Returns the angle between the x-axis and the tangent from a point. It is\n     * valid for points lying on the ellipse boundary only.\n     */\n    Ellipse.prototype.tangentTheta = function (p) {\n        var ref = point_1.Point.clone(p);\n        var x0 = ref.x;\n        var y0 = ref.y;\n        var a = this.a;\n        var b = this.b;\n        var center = this.bbox().center;\n        var cx = center.x;\n        var cy = center.y;\n        var refPointDelta = 30;\n        var q1 = x0 > center.x + a / 2;\n        var q3 = x0 < center.x - a / 2;\n        var x;\n        var y;\n        if (q1 || q3) {\n            y = x0 > center.x ? y0 - refPointDelta : y0 + refPointDelta;\n            x =\n                (a * a) / (x0 - cx) -\n                    (a * a * (y0 - cy) * (y - cy)) / (b * b * (x0 - cx)) +\n                    cx;\n        }\n        else {\n            x = y0 > center.y ? x0 + refPointDelta : x0 - refPointDelta;\n            y =\n                (b * b) / (y0 - cy) -\n                    (b * b * (x0 - cx) * (x - cx)) / (a * a * (y0 - cy)) +\n                    cy;\n        }\n        return new point_1.Point(x, y).theta(ref);\n    };\n    Ellipse.prototype.scale = function (sx, sy) {\n        this.a *= sx;\n        this.b *= sy;\n        return this;\n    };\n    Ellipse.prototype.rotate = function (angle, origin) {\n        var rect = rectangle_1.Rectangle.fromEllipse(this);\n        rect.rotate(angle, origin);\n        var ellipse = Ellipse.fromRect(rect);\n        this.a = ellipse.a;\n        this.b = ellipse.b;\n        this.x = ellipse.x;\n        this.y = ellipse.y;\n        return this;\n    };\n    Ellipse.prototype.translate = function (dx, dy) {\n        var p = point_1.Point.create(dx, dy);\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    };\n    Ellipse.prototype.equals = function (ellipse) {\n        return (ellipse != null &&\n            ellipse.x === this.x &&\n            ellipse.y === this.y &&\n            ellipse.a === this.a &&\n            ellipse.b === this.b);\n    };\n    Ellipse.prototype.clone = function () {\n        return new Ellipse(this.x, this.y, this.a, this.b);\n    };\n    Ellipse.prototype.toJSON = function () {\n        return { x: this.x, y: this.y, a: this.a, b: this.b };\n    };\n    Ellipse.prototype.serialize = function () {\n        return this.x + \" \" + this.y + \" \" + this.a + \" \" + this.b;\n    };\n    return Ellipse;\n}(geometry_1.Geometry));\nexports.Ellipse = Ellipse;\n(function (Ellipse) {\n    Ellipse.toStringTag = \"X6.Geometry.\" + Ellipse.name;\n    function isEllipse(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Ellipse) {\n            return true;\n        }\n        var tag = instance[Symbol.toStringTag];\n        var ellipse = instance;\n        if ((tag == null || tag === Ellipse.toStringTag) &&\n            typeof ellipse.x === 'number' &&\n            typeof ellipse.y === 'number' &&\n            typeof ellipse.a === 'number' &&\n            typeof ellipse.b === 'number' &&\n            typeof ellipse.inflate === 'function' &&\n            typeof ellipse.normalizedDistance === 'function') {\n            return true;\n        }\n        return false;\n    }\n    Ellipse.isEllipse = isEllipse;\n})(Ellipse = exports.Ellipse || (exports.Ellipse = {}));\nexports.Ellipse = Ellipse;\n(function (Ellipse) {\n    function create(x, y, a, b) {\n        if (x == null || typeof x === 'number') {\n            return new Ellipse(x, y, a, b);\n        }\n        return parse(x);\n    }\n    Ellipse.create = create;\n    function parse(e) {\n        if (Ellipse.isEllipse(e)) {\n            return e.clone();\n        }\n        if (Array.isArray(e)) {\n            return new Ellipse(e[0], e[1], e[2], e[3]);\n        }\n        return new Ellipse(e.x, e.y, e.a, e.b);\n    }\n    Ellipse.parse = parse;\n    function fromRect(rect) {\n        var center = rect.center;\n        return new Ellipse(center.x, center.y, rect.width / 2, rect.height / 2);\n    }\n    Ellipse.fromRect = fromRect;\n})(Ellipse = exports.Ellipse || (exports.Ellipse = {}));\nexports.Ellipse = Ellipse;\n//# sourceMappingURL=ellipse.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Geometry = void 0;\nvar Geometry = /** @class */ (function () {\n    function Geometry() {\n    }\n    Geometry.prototype.valueOf = function () {\n        return this.toJSON();\n    };\n    Geometry.prototype.toString = function () {\n        return JSON.stringify(this.toJSON());\n    };\n    return Geometry;\n}());\nexports.Geometry = Geometry;\n//# sourceMappingURL=geometry.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./angle\"), exports);\n__exportStar(require(\"./point\"), exports);\n__exportStar(require(\"./line\"), exports);\n__exportStar(require(\"./ellipse\"), exports);\n__exportStar(require(\"./rectangle\"), exports);\n__exportStar(require(\"./path\"), exports);\n__exportStar(require(\"./curve\"), exports);\n__exportStar(require(\"./polyline\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Line = void 0;\nvar point_1 = require(\"./point\");\nvar geometry_1 = require(\"./geometry\");\nvar rectangle_1 = require(\"./rectangle\");\nvar Line = /** @class */ (function (_super) {\n    __extends(Line, _super);\n    function Line(x1, y1, x2, y2) {\n        var _this = _super.call(this) || this;\n        if (typeof x1 === 'number' && typeof y1 === 'number') {\n            _this.start = new point_1.Point(x1, y1);\n            _this.end = new point_1.Point(x2, y2);\n        }\n        else {\n            _this.start = point_1.Point.create(x1);\n            _this.end = point_1.Point.create(y1);\n        }\n        return _this;\n    }\n    Object.defineProperty(Line.prototype, Symbol.toStringTag, {\n        get: function () {\n            return Line.toStringTag;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Line.prototype, \"center\", {\n        get: function () {\n            return new point_1.Point((this.start.x + this.end.x) / 2, (this.start.y + this.end.y) / 2);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Line.prototype.getCenter = function () {\n        return this.center;\n    };\n    /**\n     * Rounds the line to the given `precision`.\n     */\n    Line.prototype.round = function (precision) {\n        if (precision === void 0) { precision = 0; }\n        this.start.round(precision);\n        this.end.round(precision);\n        return this;\n    };\n    Line.prototype.translate = function (tx, ty) {\n        if (typeof tx === 'number') {\n            this.start.translate(tx, ty);\n            this.end.translate(tx, ty);\n        }\n        else {\n            this.start.translate(tx);\n            this.end.translate(tx);\n        }\n        return this;\n    };\n    /**\n     * Rotate the line by `angle` around `origin`.\n     */\n    Line.prototype.rotate = function (angle, origin) {\n        this.start.rotate(angle, origin);\n        this.end.rotate(angle, origin);\n        return this;\n    };\n    /**\n     * Scale the line by `sx` and `sy` about the given `origin`. If origin is not\n     * specified, the line is scaled around `0,0`.\n     */\n    Line.prototype.scale = function (sx, sy, origin) {\n        this.start.scale(sx, sy, origin);\n        this.end.scale(sx, sy, origin);\n        return this;\n    };\n    /**\n     * Returns the length of the line.\n     */\n    Line.prototype.length = function () {\n        return Math.sqrt(this.squaredLength());\n    };\n    /**\n     * Useful for distance comparisons in which real length is not necessary\n     * (saves one `Math.sqrt()` operation).\n     */\n    Line.prototype.squaredLength = function () {\n        var dx = this.start.x - this.end.x;\n        var dy = this.start.y - this.end.y;\n        return dx * dx + dy * dy;\n    };\n    /**\n     * Scale the line so that it has the requested length. The start point of\n     * the line is preserved.\n     */\n    Line.prototype.setLength = function (length) {\n        var total = this.length();\n        if (!total) {\n            return this;\n        }\n        var scale = length / total;\n        return this.scale(scale, scale, this.start);\n    };\n    Line.prototype.parallel = function (distance) {\n        var line = this.clone();\n        if (!line.isDifferentiable()) {\n            return line;\n        }\n        var start = line.start, end = line.end;\n        var eRef = start.clone().rotate(270, end);\n        var sRef = end.clone().rotate(90, start);\n        start.move(sRef, distance);\n        end.move(eRef, distance);\n        return line;\n    };\n    /**\n     * Returns the vector of the line with length equal to length of the line.\n     */\n    Line.prototype.vector = function () {\n        return new point_1.Point(this.end.x - this.start.x, this.end.y - this.start.y);\n    };\n    /**\n     * Returns the angle of incline of the line.\n     *\n     * The function returns `NaN` if the start and end endpoints of the line\n     * both lie at the same coordinates(it is impossible to determine the angle\n     * of incline of a line that appears to be a point). The\n     * `line.isDifferentiable()` function may be used in advance to determine\n     * whether the angle of incline can be computed for a given line.\n     */\n    Line.prototype.angle = function () {\n        var horizontal = new point_1.Point(this.start.x + 1, this.start.y);\n        return this.start.angleBetween(this.end, horizontal);\n    };\n    /**\n     * Returns a rectangle that is the bounding box of the line.\n     */\n    Line.prototype.bbox = function () {\n        var left = Math.min(this.start.x, this.end.x);\n        var top = Math.min(this.start.y, this.end.y);\n        var right = Math.max(this.start.x, this.end.x);\n        var bottom = Math.max(this.start.y, this.end.y);\n        return new rectangle_1.Rectangle(left, top, right - left, bottom - top);\n    };\n    /**\n     * Returns the bearing (cardinal direction) of the line.\n     *\n     * The return value is one of the following strings:\n     * 'NE', 'E', 'SE', 'S', 'SW', 'W', 'NW' and 'N'.\n     *\n     * The function returns 'N' if the two endpoints of the line are coincident.\n     */\n    Line.prototype.bearing = function () {\n        return this.start.bearing(this.end);\n    };\n    /**\n     * Returns the point on the line that lies closest to point `p`.\n     */\n    Line.prototype.closestPoint = function (p) {\n        return this.pointAt(this.closestPointNormalizedLength(p));\n    };\n    /**\n     * Returns the length of the line up to the point that lies closest to point `p`.\n     */\n    Line.prototype.closestPointLength = function (p) {\n        return this.closestPointNormalizedLength(p) * this.length();\n    };\n    /**\n     * Returns a line that is tangent to the line at the point that lies closest\n     * to point `p`.\n     */\n    Line.prototype.closestPointTangent = function (p) {\n        return this.tangentAt(this.closestPointNormalizedLength(p));\n    };\n    /**\n     * Returns the normalized length (distance from the start of the line / total\n     * line length) of the line up to the point that lies closest to point.\n     */\n    Line.prototype.closestPointNormalizedLength = function (p) {\n        var product = this.vector().dot(new Line(this.start, p).vector());\n        var normalized = Math.min(1, Math.max(0, product / this.squaredLength()));\n        // normalized returns `NaN` if this line has zero length\n        if (normalized !== normalized) {\n            return 0;\n        }\n        return normalized;\n    };\n    /**\n     * Returns a point on the line that lies `rate` (normalized length) away from\n     * the beginning of the line.\n     */\n    Line.prototype.pointAt = function (ratio) {\n        var start = this.start;\n        var end = this.end;\n        if (ratio <= 0) {\n            return start.clone();\n        }\n        if (ratio >= 1) {\n            return end.clone();\n        }\n        return start.lerp(end, ratio);\n    };\n    /**\n     * Returns a point on the line that lies length away from the beginning of\n     * the line.\n     */\n    Line.prototype.pointAtLength = function (length) {\n        var start = this.start;\n        var end = this.end;\n        var fromStart = true;\n        if (length < 0) {\n            fromStart = false; // start calculation from end point\n            length = -length; // tslint:disable-line\n        }\n        var total = this.length();\n        if (length >= total) {\n            return fromStart ? end.clone() : start.clone();\n        }\n        var rate = (fromStart ? length : total - length) / total;\n        return this.pointAt(rate);\n    };\n    /**\n     * Divides the line into two lines at the point that lies `rate` (normalized\n     * length) away from the beginning of the line.\n     */\n    Line.prototype.divideAt = function (ratio) {\n        var dividerPoint = this.pointAt(ratio);\n        return [\n            new Line(this.start, dividerPoint),\n            new Line(dividerPoint, this.end),\n        ];\n    };\n    /**\n     * Divides the line into two lines at the point that lies length away from\n     * the beginning of the line.\n     */\n    Line.prototype.divideAtLength = function (length) {\n        var dividerPoint = this.pointAtLength(length);\n        return [\n            new Line(this.start, dividerPoint),\n            new Line(dividerPoint, this.end),\n        ];\n    };\n    /**\n     * Returns `true` if the point `p` lies on the line. Return `false` otherwise.\n     */\n    Line.prototype.containsPoint = function (p) {\n        var start = this.start;\n        var end = this.end;\n        // cross product of 0 indicates that this line and\n        // the vector to `p` are collinear.\n        if (start.cross(p, end) !== 0) {\n            return false;\n        }\n        var length = this.length();\n        if (new Line(start, p).length() > length) {\n            return false;\n        }\n        if (new Line(p, end).length() > length) {\n            return false;\n        }\n        return true;\n    };\n    Line.prototype.intersect = function (shape, options) {\n        var ret = shape.intersectsWithLine(this, options);\n        if (ret) {\n            return Array.isArray(ret) ? ret : [ret];\n        }\n        return null;\n    };\n    /**\n     * Returns the intersection point of the line with another line. Returns\n     * `null` if no intersection exists.\n     */\n    Line.prototype.intersectsWithLine = function (line) {\n        var pt1Dir = new point_1.Point(this.end.x - this.start.x, this.end.y - this.start.y);\n        var pt2Dir = new point_1.Point(line.end.x - line.start.x, line.end.y - line.start.y);\n        var det = pt1Dir.x * pt2Dir.y - pt1Dir.y * pt2Dir.x;\n        var deltaPt = new point_1.Point(line.start.x - this.start.x, line.start.y - this.start.y);\n        var alpha = deltaPt.x * pt2Dir.y - deltaPt.y * pt2Dir.x;\n        var beta = deltaPt.x * pt1Dir.y - deltaPt.y * pt1Dir.x;\n        if (det === 0 || alpha * det < 0 || beta * det < 0) {\n            return null;\n        }\n        if (det > 0) {\n            if (alpha > det || beta > det) {\n                return null;\n            }\n        }\n        else {\n            if (alpha < det || beta < det) {\n                return null;\n            }\n        }\n        return new point_1.Point(this.start.x + (alpha * pt1Dir.x) / det, this.start.y + (alpha * pt1Dir.y) / det);\n    };\n    /**\n     * Returns `true` if a tangent line can be found for the line.\n     *\n     * Tangents cannot be found if both of the line endpoints are coincident\n     * (the line appears to be a point).\n     */\n    Line.prototype.isDifferentiable = function () {\n        return !this.start.equals(this.end);\n    };\n    /**\n     * Returns the perpendicular distance between the line and point. The\n     * distance is positive if the point lies to the right of the line, negative\n     * if the point lies to the left of the line, and `0` if the point lies on\n     * the line.\n     */\n    Line.prototype.pointOffset = function (p) {\n        var ref = point_1.Point.clone(p);\n        var start = this.start;\n        var end = this.end;\n        var determinant = (end.x - start.x) * (ref.y - start.y) -\n            (end.y - start.y) * (ref.x - start.x);\n        return determinant / this.length();\n    };\n    Line.prototype.pointSquaredDistance = function (x, y) {\n        var p = point_1.Point.create(x, y);\n        return this.closestPoint(p).squaredDistance(p);\n    };\n    Line.prototype.pointDistance = function (x, y) {\n        var p = point_1.Point.create(x, y);\n        return this.closestPoint(p).distance(p);\n    };\n    /**\n     * Returns a line tangent to the line at point that lies `rate` (normalized\n     * length) away from the beginning of the line.\n     */\n    Line.prototype.tangentAt = function (ratio) {\n        if (!this.isDifferentiable()) {\n            return null;\n        }\n        var start = this.start;\n        var end = this.end;\n        var tangentStart = this.pointAt(ratio);\n        var tangentLine = new Line(start, end);\n        tangentLine.translate(tangentStart.x - start.x, tangentStart.y - start.y);\n        return tangentLine;\n    };\n    /**\n     * Returns a line tangent to the line at point that lies `length` away from\n     * the beginning of the line.\n     */\n    Line.prototype.tangentAtLength = function (length) {\n        if (!this.isDifferentiable()) {\n            return null;\n        }\n        var start = this.start;\n        var end = this.end;\n        var tangentStart = this.pointAtLength(length);\n        var tangentLine = new Line(start, end);\n        tangentLine.translate(tangentStart.x - start.x, tangentStart.y - start.y);\n        return tangentLine;\n    };\n    Line.prototype.relativeCcw = function (x, y) {\n        var ref = point_1.Point.create(x, y);\n        var dx1 = ref.x - this.start.x;\n        var dy1 = ref.y - this.start.y;\n        var dx2 = this.end.x - this.start.x;\n        var dy2 = this.end.y - this.start.y;\n        var ccw = dx1 * dy2 - dy1 * dx2;\n        if (ccw === 0) {\n            ccw = dx1 * dx2 + dy1 * dy2;\n            if (ccw > 0.0) {\n                dx1 -= dx2;\n                dy1 -= dy2;\n                ccw = dx1 * dx2 + dy1 * dy2;\n                if (ccw < 0.0) {\n                    ccw = 0.0;\n                }\n            }\n        }\n        return ccw < 0.0 ? -1 : ccw > 0.0 ? 1 : 0;\n    };\n    /**\n     * Return `true` if the line equals the other line.\n     */\n    Line.prototype.equals = function (l) {\n        return (l != null &&\n            this.start.x === l.start.x &&\n            this.start.y === l.start.y &&\n            this.end.x === l.end.x &&\n            this.end.y === l.end.y);\n    };\n    /**\n     * Returns another line which is a clone of the line.\n     */\n    Line.prototype.clone = function () {\n        return new Line(this.start, this.end);\n    };\n    Line.prototype.toJSON = function () {\n        return { start: this.start.toJSON(), end: this.end.toJSON() };\n    };\n    Line.prototype.serialize = function () {\n        return [this.start.serialize(), this.end.serialize()].join(' ');\n    };\n    return Line;\n}(geometry_1.Geometry));\nexports.Line = Line;\n(function (Line) {\n    Line.toStringTag = \"X6.Geometry.\" + Line.name;\n    function isLine(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Line) {\n            return true;\n        }\n        var tag = instance[Symbol.toStringTag];\n        var line = instance;\n        if ((tag == null || tag === Line.toStringTag) &&\n            point_1.Point.isPoint(line.start) &&\n            point_1.Point.isPoint(line.end) &&\n            typeof line.vector === 'function' &&\n            typeof line.bearing === 'function' &&\n            typeof line.parallel === 'function' &&\n            typeof line.intersect === 'function') {\n            return true;\n        }\n        return false;\n    }\n    Line.isLine = isLine;\n})(Line = exports.Line || (exports.Line = {}));\nexports.Line = Line;\n//# sourceMappingURL=line.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Close = void 0;\nvar line_1 = require(\"../line\");\nvar lineto_1 = require(\"./lineto\");\nvar segment_1 = require(\"./segment\");\nvar Close = /** @class */ (function (_super) {\n    __extends(Close, _super);\n    function Close() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(Close.prototype, \"end\", {\n        get: function () {\n            if (!this.subpathStartSegment) {\n                throw new Error('Missing subpath start segment. (This segment needs a subpath ' +\n                    'start segment (e.g. MoveTo), or segment has not yet been added' +\n                    ' to a path.)');\n            }\n            return this.subpathStartSegment.end;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Close.prototype, \"type\", {\n        get: function () {\n            return 'Z';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Close.prototype, \"line\", {\n        get: function () {\n            return new line_1.Line(this.start, this.end);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Close.prototype.bbox = function () {\n        return this.line.bbox();\n    };\n    Close.prototype.closestPoint = function (p) {\n        return this.line.closestPoint(p);\n    };\n    Close.prototype.closestPointLength = function (p) {\n        return this.line.closestPointLength(p);\n    };\n    Close.prototype.closestPointNormalizedLength = function (p) {\n        return this.line.closestPointNormalizedLength(p);\n    };\n    Close.prototype.closestPointTangent = function (p) {\n        return this.line.closestPointTangent(p);\n    };\n    Close.prototype.length = function () {\n        return this.line.length();\n    };\n    Close.prototype.divideAt = function (ratio) {\n        var divided = this.line.divideAt(ratio);\n        return [\n            // do not actually cut into the segment, first divided part can stay as Z\n            divided[1].isDifferentiable() ? new lineto_1.LineTo(divided[0]) : this.clone(),\n            new lineto_1.LineTo(divided[1]),\n        ];\n    };\n    Close.prototype.divideAtLength = function (length) {\n        var divided = this.line.divideAtLength(length);\n        return [\n            divided[1].isDifferentiable() ? new lineto_1.LineTo(divided[0]) : this.clone(),\n            new lineto_1.LineTo(divided[1]),\n        ];\n    };\n    Close.prototype.getSubdivisions = function () {\n        return [];\n    };\n    Close.prototype.pointAt = function (ratio) {\n        return this.line.pointAt(ratio);\n    };\n    Close.prototype.pointAtLength = function (length) {\n        return this.line.pointAtLength(length);\n    };\n    Close.prototype.tangentAt = function (ratio) {\n        return this.line.tangentAt(ratio);\n    };\n    Close.prototype.tangentAtLength = function (length) {\n        return this.line.tangentAtLength(length);\n    };\n    Close.prototype.isDifferentiable = function () {\n        if (!this.previousSegment || !this.subpathStartSegment) {\n            return false;\n        }\n        return !this.start.equals(this.end);\n    };\n    Close.prototype.scale = function () {\n        return this;\n    };\n    Close.prototype.rotate = function () {\n        return this;\n    };\n    Close.prototype.translate = function () {\n        return this;\n    };\n    Close.prototype.equals = function (s) {\n        return (this.type === s.type &&\n            this.start.equals(s.start) &&\n            this.end.equals(s.end));\n    };\n    Close.prototype.clone = function () {\n        return new Close();\n    };\n    Close.prototype.toJSON = function () {\n        return {\n            type: this.type,\n            start: this.start.toJSON(),\n            end: this.end.toJSON(),\n        };\n    };\n    Close.prototype.serialize = function () {\n        return this.type;\n    };\n    return Close;\n}(segment_1.Segment));\nexports.Close = Close;\n(function (Close) {\n    function create() {\n        return new Close();\n    }\n    Close.create = create;\n})(Close = exports.Close || (exports.Close = {}));\nexports.Close = Close;\n//# sourceMappingURL=close.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CurveTo = void 0;\nvar curve_1 = require(\"../curve\");\nvar point_1 = require(\"../point\");\nvar segment_1 = require(\"./segment\");\nvar CurveTo = /** @class */ (function (_super) {\n    __extends(CurveTo, _super);\n    function CurveTo(arg0, arg1, arg2, arg3, arg4, arg5) {\n        var _this = _super.call(this) || this;\n        if (curve_1.Curve.isCurve(arg0)) {\n            _this.controlPoint1 = arg0.controlPoint1.clone().round(2);\n            _this.controlPoint2 = arg0.controlPoint2.clone().round(2);\n            _this.endPoint = arg0.end.clone().round(2);\n        }\n        else if (typeof arg0 === 'number') {\n            _this.controlPoint1 = new point_1.Point(arg0, arg1).round(2);\n            _this.controlPoint2 = new point_1.Point(arg2, arg3).round(2);\n            _this.endPoint = new point_1.Point(arg4, arg5).round(2);\n        }\n        else {\n            _this.controlPoint1 = point_1.Point.create(arg0).round(2);\n            _this.controlPoint2 = point_1.Point.create(arg1).round(2);\n            _this.endPoint = point_1.Point.create(arg2).round(2);\n        }\n        return _this;\n    }\n    Object.defineProperty(CurveTo.prototype, \"type\", {\n        get: function () {\n            return 'C';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(CurveTo.prototype, \"curve\", {\n        get: function () {\n            return new curve_1.Curve(this.start, this.controlPoint1, this.controlPoint2, this.end);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CurveTo.prototype.bbox = function () {\n        return this.curve.bbox();\n    };\n    CurveTo.prototype.closestPoint = function (p) {\n        return this.curve.closestPoint(p);\n    };\n    CurveTo.prototype.closestPointLength = function (p) {\n        return this.curve.closestPointLength(p);\n    };\n    CurveTo.prototype.closestPointNormalizedLength = function (p) {\n        return this.curve.closestPointNormalizedLength(p);\n    };\n    CurveTo.prototype.closestPointTangent = function (p) {\n        return this.curve.closestPointTangent(p);\n    };\n    CurveTo.prototype.length = function () {\n        return this.curve.length();\n    };\n    CurveTo.prototype.divideAt = function (ratio, options) {\n        if (options === void 0) { options = {}; }\n        // TODO: fix options\n        var divided = this.curve.divideAt(ratio, options);\n        return [new CurveTo(divided[0]), new CurveTo(divided[1])];\n    };\n    CurveTo.prototype.divideAtLength = function (length, options) {\n        if (options === void 0) { options = {}; }\n        // TODO: fix options\n        var divided = this.curve.divideAtLength(length, options);\n        return [new CurveTo(divided[0]), new CurveTo(divided[1])];\n    };\n    CurveTo.prototype.divideAtT = function (t) {\n        var divided = this.curve.divideAtT(t);\n        return [new CurveTo(divided[0]), new CurveTo(divided[1])];\n    };\n    CurveTo.prototype.getSubdivisions = function () {\n        return [];\n    };\n    CurveTo.prototype.pointAt = function (ratio) {\n        return this.curve.pointAt(ratio);\n    };\n    CurveTo.prototype.pointAtLength = function (length) {\n        return this.curve.pointAtLength(length);\n    };\n    CurveTo.prototype.tangentAt = function (ratio) {\n        return this.curve.tangentAt(ratio);\n    };\n    CurveTo.prototype.tangentAtLength = function (length) {\n        return this.curve.tangentAtLength(length);\n    };\n    CurveTo.prototype.isDifferentiable = function () {\n        if (!this.previousSegment) {\n            return false;\n        }\n        var start = this.start;\n        var control1 = this.controlPoint1;\n        var control2 = this.controlPoint2;\n        var end = this.end;\n        return !(start.equals(control1) &&\n            control1.equals(control2) &&\n            control2.equals(end));\n    };\n    CurveTo.prototype.scale = function (sx, sy, origin) {\n        this.controlPoint1.scale(sx, sy, origin);\n        this.controlPoint2.scale(sx, sy, origin);\n        this.end.scale(sx, sy, origin);\n        return this;\n    };\n    CurveTo.prototype.rotate = function (angle, origin) {\n        this.controlPoint1.rotate(angle, origin);\n        this.controlPoint2.rotate(angle, origin);\n        this.end.rotate(angle, origin);\n        return this;\n    };\n    CurveTo.prototype.translate = function (tx, ty) {\n        if (typeof tx === 'number') {\n            this.controlPoint1.translate(tx, ty);\n            this.controlPoint2.translate(tx, ty);\n            this.end.translate(tx, ty);\n        }\n        else {\n            this.controlPoint1.translate(tx);\n            this.controlPoint2.translate(tx);\n            this.end.translate(tx);\n        }\n        return this;\n    };\n    CurveTo.prototype.equals = function (s) {\n        return (this.start.equals(s.start) &&\n            this.end.equals(s.end) &&\n            this.controlPoint1.equals(s.controlPoint1) &&\n            this.controlPoint2.equals(s.controlPoint2));\n    };\n    CurveTo.prototype.clone = function () {\n        return new CurveTo(this.controlPoint1, this.controlPoint2, this.end);\n    };\n    CurveTo.prototype.toJSON = function () {\n        return {\n            type: this.type,\n            start: this.start.toJSON(),\n            controlPoint1: this.controlPoint1.toJSON(),\n            controlPoint2: this.controlPoint2.toJSON(),\n            end: this.end.toJSON(),\n        };\n    };\n    CurveTo.prototype.serialize = function () {\n        var c1 = this.controlPoint1;\n        var c2 = this.controlPoint2;\n        var end = this.end;\n        return [this.type, c1.x, c1.y, c2.x, c2.y, end.x, end.y].join(' ');\n    };\n    return CurveTo;\n}(segment_1.Segment));\nexports.CurveTo = CurveTo;\n(function (CurveTo) {\n    function create() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var len = args.length;\n        var arg0 = args[0];\n        // curve provided\n        if (curve_1.Curve.isCurve(arg0)) {\n            return new CurveTo(arg0);\n        }\n        // points provided\n        if (point_1.Point.isPointLike(arg0)) {\n            if (len === 3) {\n                return new CurveTo(args[0], args[1], args[2]);\n            }\n            // this is a poly-bezier segment\n            var segments_1 = [];\n            for (var i = 0; i < len; i += 3) {\n                segments_1.push(new CurveTo(args[i], args[i + 1], args[i + 2]));\n            }\n            return segments_1;\n        }\n        // coordinates provided\n        if (len === 6) {\n            return new CurveTo(args[0], args[1], args[2], args[3], args[4], args[5]);\n        }\n        // this is a poly-bezier segment\n        var segments = [];\n        for (var i = 0; i < len; i += 6) {\n            segments.push(new CurveTo(args[i], args[i + 1], args[i + 2], args[i + 3], args[i + 4], args[i + 5]));\n        }\n        return segments;\n    }\n    CurveTo.create = create;\n})(CurveTo = exports.CurveTo || (exports.CurveTo = {}));\nexports.CurveTo = CurveTo;\n//# sourceMappingURL=curveto.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./path\"), exports);\n__exportStar(require(\"./segment\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LineTo = void 0;\nvar line_1 = require(\"../line\");\nvar point_1 = require(\"../point\");\nvar segment_1 = require(\"./segment\");\nvar LineTo = /** @class */ (function (_super) {\n    __extends(LineTo, _super);\n    function LineTo(x, y) {\n        var _this = _super.call(this) || this;\n        if (line_1.Line.isLine(x)) {\n            _this.endPoint = x.end.clone().round(2);\n        }\n        else {\n            _this.endPoint = point_1.Point.create(x, y).round(2);\n        }\n        return _this;\n    }\n    Object.defineProperty(LineTo.prototype, \"type\", {\n        get: function () {\n            return 'L';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(LineTo.prototype, \"line\", {\n        get: function () {\n            return new line_1.Line(this.start, this.end);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LineTo.prototype.bbox = function () {\n        return this.line.bbox();\n    };\n    LineTo.prototype.closestPoint = function (p) {\n        return this.line.closestPoint(p);\n    };\n    LineTo.prototype.closestPointLength = function (p) {\n        return this.line.closestPointLength(p);\n    };\n    LineTo.prototype.closestPointNormalizedLength = function (p) {\n        return this.line.closestPointNormalizedLength(p);\n    };\n    LineTo.prototype.closestPointTangent = function (p) {\n        return this.line.closestPointTangent(p);\n    };\n    LineTo.prototype.length = function () {\n        return this.line.length();\n    };\n    LineTo.prototype.divideAt = function (ratio) {\n        var divided = this.line.divideAt(ratio);\n        return [new LineTo(divided[0]), new LineTo(divided[1])];\n    };\n    LineTo.prototype.divideAtLength = function (length) {\n        var divided = this.line.divideAtLength(length);\n        return [new LineTo(divided[0]), new LineTo(divided[1])];\n    };\n    LineTo.prototype.getSubdivisions = function () {\n        return [];\n    };\n    LineTo.prototype.pointAt = function (ratio) {\n        return this.line.pointAt(ratio);\n    };\n    LineTo.prototype.pointAtLength = function (length) {\n        return this.line.pointAtLength(length);\n    };\n    LineTo.prototype.tangentAt = function (ratio) {\n        return this.line.tangentAt(ratio);\n    };\n    LineTo.prototype.tangentAtLength = function (length) {\n        return this.line.tangentAtLength(length);\n    };\n    LineTo.prototype.isDifferentiable = function () {\n        if (this.previousSegment == null) {\n            return false;\n        }\n        return !this.start.equals(this.end);\n    };\n    LineTo.prototype.clone = function () {\n        return new LineTo(this.end);\n    };\n    LineTo.prototype.scale = function (sx, sy, origin) {\n        this.end.scale(sx, sy, origin);\n        return this;\n    };\n    LineTo.prototype.rotate = function (angle, origin) {\n        this.end.rotate(angle, origin);\n        return this;\n    };\n    LineTo.prototype.translate = function (tx, ty) {\n        if (typeof tx === 'number') {\n            this.end.translate(tx, ty);\n        }\n        else {\n            this.end.translate(tx);\n        }\n        return this;\n    };\n    LineTo.prototype.equals = function (s) {\n        return (this.type === s.type &&\n            this.start.equals(s.start) &&\n            this.end.equals(s.end));\n    };\n    LineTo.prototype.toJSON = function () {\n        return {\n            type: this.type,\n            start: this.start.toJSON(),\n            end: this.end.toJSON(),\n        };\n    };\n    LineTo.prototype.serialize = function () {\n        var end = this.end;\n        return this.type + \" \" + end.x + \" \" + end.y;\n    };\n    return LineTo;\n}(segment_1.Segment));\nexports.LineTo = LineTo;\n(function (LineTo) {\n    function create() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var len = args.length;\n        var arg0 = args[0];\n        // line provided\n        if (line_1.Line.isLine(arg0)) {\n            return new LineTo(arg0);\n        }\n        // points provided\n        if (point_1.Point.isPointLike(arg0)) {\n            if (len === 1) {\n                return new LineTo(arg0);\n            }\n            // poly-line segment\n            return args.map(function (arg) { return new LineTo(arg); });\n        }\n        // coordinates provided\n        if (len === 2) {\n            return new LineTo(+args[0], +args[1]);\n        }\n        // poly-line segment\n        var segments = [];\n        for (var i = 0; i < len; i += 2) {\n            var x = +args[i];\n            var y = +args[i + 1];\n            segments.push(new LineTo(x, y));\n        }\n        return segments;\n    }\n    LineTo.create = create;\n})(LineTo = exports.LineTo || (exports.LineTo = {}));\nexports.LineTo = LineTo;\n//# sourceMappingURL=lineto.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MoveTo = void 0;\nvar line_1 = require(\"../line\");\nvar curve_1 = require(\"../curve\");\nvar point_1 = require(\"../point\");\nvar lineto_1 = require(\"./lineto\");\nvar segment_1 = require(\"./segment\");\nvar MoveTo = /** @class */ (function (_super) {\n    __extends(MoveTo, _super);\n    function MoveTo(x, y) {\n        var _this = _super.call(this) || this;\n        _this.isVisible = false;\n        _this.isSubpathStart = true;\n        if (line_1.Line.isLine(x) || curve_1.Curve.isCurve(x)) {\n            _this.endPoint = x.end.clone().round(2);\n        }\n        else {\n            _this.endPoint = point_1.Point.create(x, y).round(2);\n        }\n        return _this;\n    }\n    Object.defineProperty(MoveTo.prototype, \"start\", {\n        get: function () {\n            throw new Error('Illegal access. Moveto segments should not need a start property.');\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(MoveTo.prototype, \"type\", {\n        get: function () {\n            return 'M';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    MoveTo.prototype.bbox = function () {\n        return null;\n    };\n    MoveTo.prototype.closestPoint = function () {\n        return this.end.clone();\n    };\n    MoveTo.prototype.closestPointLength = function () {\n        return 0;\n    };\n    MoveTo.prototype.closestPointNormalizedLength = function () {\n        return 0;\n    };\n    MoveTo.prototype.closestPointT = function () {\n        return 1;\n    };\n    MoveTo.prototype.closestPointTangent = function () {\n        return null;\n    };\n    MoveTo.prototype.length = function () {\n        return 0;\n    };\n    MoveTo.prototype.lengthAtT = function () {\n        return 0;\n    };\n    MoveTo.prototype.divideAt = function () {\n        return [this.clone(), this.clone()];\n    };\n    MoveTo.prototype.divideAtLength = function () {\n        return [this.clone(), this.clone()];\n    };\n    MoveTo.prototype.getSubdivisions = function () {\n        return [];\n    };\n    MoveTo.prototype.pointAt = function () {\n        return this.end.clone();\n    };\n    MoveTo.prototype.pointAtLength = function () {\n        return this.end.clone();\n    };\n    MoveTo.prototype.pointAtT = function () {\n        return this.end.clone();\n    };\n    MoveTo.prototype.tangentAt = function () {\n        return null;\n    };\n    MoveTo.prototype.tangentAtLength = function () {\n        return null;\n    };\n    MoveTo.prototype.tangentAtT = function () {\n        return null;\n    };\n    MoveTo.prototype.isDifferentiable = function () {\n        return false;\n    };\n    MoveTo.prototype.scale = function (sx, sy, origin) {\n        this.end.scale(sx, sy, origin);\n        return this;\n    };\n    MoveTo.prototype.rotate = function (angle, origin) {\n        this.end.rotate(angle, origin);\n        return this;\n    };\n    MoveTo.prototype.translate = function (tx, ty) {\n        if (typeof tx === 'number') {\n            this.end.translate(tx, ty);\n        }\n        else {\n            this.end.translate(tx);\n        }\n        return this;\n    };\n    MoveTo.prototype.clone = function () {\n        return new MoveTo(this.end);\n    };\n    MoveTo.prototype.equals = function (s) {\n        return this.type === s.type && this.end.equals(s.end);\n    };\n    MoveTo.prototype.toJSON = function () {\n        return {\n            type: this.type,\n            end: this.end.toJSON(),\n        };\n    };\n    MoveTo.prototype.serialize = function () {\n        var end = this.end;\n        return this.type + \" \" + end.x + \" \" + end.y;\n    };\n    return MoveTo;\n}(segment_1.Segment));\nexports.MoveTo = MoveTo;\n(function (MoveTo) {\n    function create() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var len = args.length;\n        var arg0 = args[0];\n        // line provided\n        if (line_1.Line.isLine(arg0)) {\n            return new MoveTo(arg0);\n        }\n        // curve provided\n        if (curve_1.Curve.isCurve(arg0)) {\n            return new MoveTo(arg0);\n        }\n        // points provided\n        if (point_1.Point.isPointLike(arg0)) {\n            if (len === 1) {\n                return new MoveTo(arg0);\n            }\n            // this is a moveto-with-subsequent-poly-line segment\n            var segments_1 = [];\n            // points come one by one\n            for (var i = 0; i < len; i += 1) {\n                if (i === 0) {\n                    segments_1.push(new MoveTo(args[i]));\n                }\n                else {\n                    segments_1.push(new lineto_1.LineTo(args[i]));\n                }\n            }\n            return segments_1;\n        }\n        // coordinates provided\n        if (len === 2) {\n            return new MoveTo(+args[0], +args[1]);\n        }\n        // this is a moveto-with-subsequent-poly-line segment\n        var segments = [];\n        for (var i = 0; i < len; i += 2) {\n            var x = +args[i];\n            var y = +args[i + 1];\n            if (i === 0) {\n                segments.push(new MoveTo(x, y));\n            }\n            else {\n                segments.push(new lineto_1.LineTo(x, y));\n            }\n        }\n        return segments;\n    }\n    MoveTo.create = create;\n})(MoveTo = exports.MoveTo || (exports.MoveTo = {}));\nexports.MoveTo = MoveTo;\n//# sourceMappingURL=moveto.js.map","\"use strict\";\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.normalizePathData = void 0;\nvar util_1 = require(\"../util\");\nfunction rotate(x, y, rad) {\n    return {\n        x: x * Math.cos(rad) - y * Math.sin(rad),\n        y: x * Math.sin(rad) + y * Math.cos(rad),\n    };\n}\nfunction q2c(x1, y1, ax, ay, x2, y2) {\n    var v13 = 1 / 3;\n    var v23 = 2 / 3;\n    return [\n        v13 * x1 + v23 * ax,\n        v13 * y1 + v23 * ay,\n        v13 * x2 + v23 * ax,\n        v13 * y2 + v23 * ay,\n        x2,\n        y2,\n    ];\n}\nfunction a2c(x1, y1, rx, ry, angle, largeArcFlag, sweepFlag, x2, y2, recursive) {\n    // for more information of where this math came from visit:\n    // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n    var v120 = (Math.PI * 120) / 180;\n    var rad = (Math.PI / 180) * (+angle || 0);\n    var res = [];\n    var xy;\n    var f1;\n    var f2;\n    var cx;\n    var cy;\n    if (!recursive) {\n        xy = rotate(x1, y1, -rad);\n        x1 = xy.x; // tslint:disable-line\n        y1 = xy.y; // tslint:disable-line\n        xy = rotate(x2, y2, -rad);\n        x2 = xy.x; // tslint:disable-line\n        y2 = xy.y; // tslint:disable-line\n        var x = (x1 - x2) / 2;\n        var y = (y1 - y2) / 2;\n        var h = (x * x) / (rx * rx) + (y * y) / (ry * ry);\n        if (h > 1) {\n            h = Math.sqrt(h);\n            rx = h * rx; // tslint:disable-line\n            ry = h * ry; // tslint:disable-line\n        }\n        var rx2 = rx * rx;\n        var ry2 = ry * ry;\n        var k = (largeArcFlag === sweepFlag ? -1 : 1) *\n            Math.sqrt(Math.abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x)));\n        cx = (k * rx * y) / ry + (x1 + x2) / 2;\n        cy = (k * -ry * x) / rx + (y1 + y2) / 2;\n        f1 = Math.asin((y1 - cy) / ry);\n        f2 = Math.asin((y2 - cy) / ry);\n        f1 = x1 < cx ? Math.PI - f1 : f1;\n        f2 = x2 < cx ? Math.PI - f2 : f2;\n        if (f1 < 0) {\n            f1 = Math.PI * 2 + f1;\n        }\n        if (f2 < 0) {\n            f2 = Math.PI * 2 + f2;\n        }\n        if (sweepFlag && f1 > f2) {\n            f1 = f1 - Math.PI * 2;\n        }\n        if (!sweepFlag && f2 > f1) {\n            f2 = f2 - Math.PI * 2;\n        }\n    }\n    else {\n        f1 = recursive[0];\n        f2 = recursive[1];\n        cx = recursive[2];\n        cy = recursive[3];\n    }\n    var df = f2 - f1;\n    if (Math.abs(df) > v120) {\n        var f2old = f2;\n        var x2old = x2;\n        var y2old = y2;\n        f2 = f1 + v120 * (sweepFlag && f2 > f1 ? 1 : -1);\n        x2 = cx + rx * Math.cos(f2); // tslint:disable-line\n        y2 = cy + ry * Math.sin(f2); // tslint:disable-line\n        res = a2c(x2, y2, rx, ry, angle, 0, sweepFlag, x2old, y2old, [\n            f2,\n            f2old,\n            cx,\n            cy,\n        ]);\n    }\n    df = f2 - f1;\n    var c1 = Math.cos(f1);\n    var s1 = Math.sin(f1);\n    var c2 = Math.cos(f2);\n    var s2 = Math.sin(f2);\n    var t = Math.tan(df / 4);\n    var hx = (4 / 3) * (rx * t);\n    var hy = (4 / 3) * (ry * t);\n    var m1 = [x1, y1];\n    var m2 = [x1 + hx * s1, y1 - hy * c1];\n    var m3 = [x2 + hx * s2, y2 - hy * c2];\n    var m4 = [x2, y2];\n    m2[0] = 2 * m1[0] - m2[0];\n    m2[1] = 2 * m1[1] - m2[1];\n    if (recursive) {\n        return [m2, m3, m4].concat(res);\n    }\n    {\n        res = [m2, m3, m4].concat(res).join().split(',');\n        var newres = [];\n        var ii = res.length;\n        for (var i = 0; i < ii; i += 1) {\n            newres[i] =\n                i % 2\n                    ? rotate(+res[i - 1], +res[i], rad).y\n                    : rotate(+res[i], +res[i + 1], rad).x;\n        }\n        return newres;\n    }\n}\nfunction parse(pathData) {\n    if (!pathData) {\n        return null;\n    }\n    var spaces = '\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029';\n    // https://regexper.com/#%28%5Ba-z%5D%29%5B%5Cs%2C%5D*%28%28-%3F%5Cd*%5C.%3F%5C%5Cd*%28%3F%3Ae%5B%5C-%2B%5D%3F%5Cd%2B%29%3F%5B%5Cs%5D*%2C%3F%5B%5Cs%5D*%29%2B%29\n    var segmentReg = new RegExp('([a-z])[' +\n        spaces +\n        ',]*((-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?[' +\n        spaces +\n        ']*,?[' +\n        spaces +\n        ']*)+)', // tslint:disable-line\n    'ig');\n    // https://regexper.com/#%28-%3F%5Cd*%5C.%3F%5Cd*%28%3F%3Ae%5B%5C-%2B%5D%3F%5Cd%2B%29%3F%29%5B%5Cs%5D*%2C%3F%5B%5Cs%5D*\n    var commandParamReg = new RegExp(\n    // tslint:disable-next-line\n    '(-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?)[' + spaces + ']*,?[' + spaces + ']*', 'ig');\n    var paramsCount = {\n        a: 7,\n        c: 6,\n        h: 1,\n        l: 2,\n        m: 2,\n        q: 4,\n        s: 4,\n        t: 2,\n        v: 1,\n        z: 0,\n    };\n    var segmetns = [];\n    pathData.replace(segmentReg, function (input, cmd, args) {\n        var params = [];\n        var command = cmd.toLowerCase();\n        args.replace(commandParamReg, function (a, b) {\n            if (b) {\n                params.push(+b);\n            }\n            return a;\n        });\n        if (command === 'm' && params.length > 2) {\n            segmetns.push(__spreadArrays([cmd], params.splice(0, 2)));\n            command = 'l';\n            cmd = cmd === 'm' ? 'l' : 'L'; // tslint:disable-line\n        }\n        var count = paramsCount[command];\n        while (params.length >= count) {\n            segmetns.push(__spreadArrays([cmd], params.splice(0, count)));\n            if (!count) {\n                break;\n            }\n        }\n        return input;\n    });\n    return segmetns;\n}\nfunction abs(pathString) {\n    var pathArray = parse(pathString);\n    // if invalid string, return 'M 0 0'\n    if (!pathArray || !pathArray.length) {\n        return [['M', 0, 0]];\n    }\n    var x = 0;\n    var y = 0;\n    var mx = 0;\n    var my = 0;\n    var segments = [];\n    for (var i = 0, ii = pathArray.length; i < ii; i += 1) {\n        var r = [];\n        segments.push(r);\n        var segment = pathArray[i];\n        var command = segment[0];\n        if (command !== command.toUpperCase()) {\n            r[0] = command.toUpperCase();\n            switch (r[0]) {\n                case 'A':\n                    r[1] = segment[1];\n                    r[2] = segment[2];\n                    r[3] = segment[3];\n                    r[4] = segment[4];\n                    r[5] = segment[5];\n                    r[6] = +segment[6] + x;\n                    r[7] = +segment[7] + y;\n                    break;\n                case 'V':\n                    r[1] = +segment[1] + y;\n                    break;\n                case 'H':\n                    r[1] = +segment[1] + x;\n                    break;\n                case 'M':\n                    mx = +segment[1] + x;\n                    my = +segment[2] + y;\n                    for (var j = 1, jj = segment.length; j < jj; j += 1) {\n                        r[j] = +segment[j] + (j % 2 ? x : y);\n                    }\n                    break;\n                default:\n                    for (var j = 1, jj = segment.length; j < jj; j += 1) {\n                        r[j] = +segment[j] + (j % 2 ? x : y);\n                    }\n                    break;\n            }\n        }\n        else {\n            for (var j = 0, jj = segment.length; j < jj; j += 1) {\n                r[j] = segment[j];\n            }\n        }\n        switch (r[0]) {\n            case 'Z':\n                x = +mx;\n                y = +my;\n                break;\n            case 'H':\n                x = r[1];\n                break;\n            case 'V':\n                y = r[1];\n                break;\n            case 'M':\n                mx = r[r.length - 2];\n                my = r[r.length - 1];\n                x = r[r.length - 2];\n                y = r[r.length - 1];\n                break;\n            default:\n                x = r[r.length - 2];\n                y = r[r.length - 1];\n                break;\n        }\n    }\n    return segments;\n}\nfunction normalize(path) {\n    var pathArray = abs(path);\n    var attrs = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null };\n    function processPath(path, d, pcom) {\n        var nx;\n        var ny;\n        if (!path) {\n            return ['C', d.x, d.y, d.x, d.y, d.x, d.y];\n        }\n        if (!(path[0] in { T: 1, Q: 1 })) {\n            d.qx = null;\n            d.qy = null;\n        }\n        switch (path[0]) {\n            case 'M':\n                d.X = path[1];\n                d.Y = path[2];\n                break;\n            case 'A':\n                if (parseFloat(path[1]) === 0 || parseFloat(path[2]) === 0) {\n                    // https://www.w3.org/TR/SVG/paths.html#ArcOutOfRangeParameters\n                    // \"If either rx or ry is 0, then this arc is treated as a\n                    // straight line segment (a \"lineto\") joining the endpoints.\"\n                    return ['L', path[6], path[7]];\n                }\n                return ['C'].concat(a2c.apply(0, [d.x, d.y].concat(path.slice(1))));\n            case 'S':\n                if (pcom === 'C' || pcom === 'S') {\n                    // In 'S' case we have to take into account, if the previous command is C/S.\n                    nx = d.x * 2 - d.bx; // And reflect the previous\n                    ny = d.y * 2 - d.by; // command's control point relative to the current point.\n                }\n                else {\n                    // or some else or nothing\n                    nx = d.x;\n                    ny = d.y;\n                }\n                return ['C', nx, ny].concat(path.slice(1));\n            case 'T':\n                if (pcom === 'Q' || pcom === 'T') {\n                    // In 'T' case we have to take into account, if the previous command is Q/T.\n                    d.qx = d.x * 2 - d.qx; // And make a reflection similar\n                    d.qy = d.y * 2 - d.qy; // to case 'S'.\n                }\n                else {\n                    // or something else or nothing\n                    d.qx = d.x;\n                    d.qy = d.y;\n                }\n                return ['C'].concat(q2c(d.x, d.y, d.qx, d.qy, path[1], path[2]));\n            case 'Q':\n                d.qx = path[1];\n                d.qy = path[2];\n                return ['C'].concat(q2c(d.x, d.y, path[1], path[2], path[3], path[4]));\n            case 'H':\n                return ['L'].concat(path[1], d.y);\n            case 'V':\n                return ['L'].concat(d.x, path[1]);\n            case 'L':\n                break;\n            case 'Z':\n                break;\n        }\n        return path;\n    }\n    function fixArc(pp, i) {\n        if (pp[i].length > 7) {\n            pp[i].shift();\n            var pi = pp[i];\n            while (pi.length) {\n                // if created multiple 'C's, their original seg is saved\n                commands[i] = 'A';\n                i += 1; // tslint:disable-line\n                pp.splice(i, 0, ['C'].concat(pi.splice(0, 6)));\n            }\n            pp.splice(i, 1);\n            ii = pathArray.length;\n        }\n    }\n    var commands = []; // path commands of original path p\n    var prevCommand = ''; // holder for previous path command of original path\n    var ii = pathArray.length;\n    for (var i = 0; i < ii; i += 1) {\n        var command = ''; // temporary holder for original path command\n        if (pathArray[i]) {\n            command = pathArray[i][0]; // save current path command\n        }\n        if (command !== 'C') {\n            // C is not saved yet, because it may be result of conversion\n            commands[i] = command; // Save current path command\n            if (i > 0) {\n                prevCommand = commands[i - 1]; // Get previous path command pcom\n            }\n        }\n        // Previous path command is inputted to processPath\n        pathArray[i] = processPath(pathArray[i], attrs, prevCommand);\n        if (commands[i] !== 'A' && command === 'C') {\n            commands[i] = 'C'; // 'A' is the only command\n        }\n        // which may produce multiple 'C's\n        // so we have to make sure that 'C' is also 'C' in original path\n        fixArc(pathArray, i); // fixArc adds also the right amount of 'A's to pcoms\n        var seg = pathArray[i];\n        var seglen = seg.length;\n        attrs.x = seg[seglen - 2];\n        attrs.y = seg[seglen - 1];\n        attrs.bx = parseFloat(seg[seglen - 4]) || attrs.x;\n        attrs.by = parseFloat(seg[seglen - 3]) || attrs.y;\n    }\n    // make sure normalized path data string starts with an M segment\n    if (!pathArray[0][0] || pathArray[0][0] !== 'M') {\n        pathArray.unshift(['M', 0, 0]);\n    }\n    return pathArray;\n}\n/**\n * Converts provided SVG path data string into a normalized path data string.\n *\n * The normalization uses a restricted subset of path commands; all segments\n * are translated into lineto, curveto, moveto, and closepath segments.\n *\n * Relative path commands are changed into their absolute counterparts,\n * and chaining of coordinates is disallowed.\n *\n * The function will always return a valid path data string; if an input\n * string cannot be normalized, 'M 0 0' is returned.\n */\nfunction normalizePathData(pathData) {\n    return normalize(pathData)\n        .map(function (segment) {\n        return segment.map(function (item) { return (typeof item === 'string' ? item : util_1.round(item, 2)); });\n    })\n        .join(',')\n        .split(',')\n        .join(' ');\n}\nexports.normalizePathData = normalizePathData;\n//# sourceMappingURL=normalize.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Path = void 0;\nvar util_1 = require(\"../util\");\nvar line_1 = require(\"../line\");\nvar point_1 = require(\"../point\");\nvar curve_1 = require(\"../curve\");\nvar polyline_1 = require(\"../polyline\");\nvar rectangle_1 = require(\"../rectangle\");\nvar geometry_1 = require(\"../geometry\");\nvar close_1 = require(\"./close\");\nvar lineto_1 = require(\"./lineto\");\nvar moveto_1 = require(\"./moveto\");\nvar curveto_1 = require(\"./curveto\");\nvar normalize_1 = require(\"./normalize\");\nvar Util = __importStar(require(\"./util\"));\nvar Path = /** @class */ (function (_super) {\n    __extends(Path, _super);\n    function Path(args) {\n        var _this = _super.call(this) || this;\n        _this.PRECISION = 3;\n        _this.segments = [];\n        if (Array.isArray(args)) {\n            if (line_1.Line.isLine(args[0]) || curve_1.Curve.isCurve(args[0])) {\n                var previousObj_1 = null;\n                var arr = args;\n                arr.forEach(function (o, i) {\n                    if (i === 0) {\n                        _this.appendSegment(Path.createSegment('M', o.start));\n                    }\n                    if (previousObj_1 != null && !previousObj_1.end.equals(o.start)) {\n                        _this.appendSegment(Path.createSegment('M', o.start));\n                    }\n                    if (line_1.Line.isLine(o)) {\n                        _this.appendSegment(Path.createSegment('L', o.end));\n                    }\n                    else if (curve_1.Curve.isCurve(o)) {\n                        _this.appendSegment(Path.createSegment('C', o.controlPoint1, o.controlPoint2, o.end));\n                    }\n                    previousObj_1 = o;\n                });\n            }\n            else {\n                var arr = args;\n                arr.forEach(function (s) {\n                    if (s.isSegment) {\n                        _this.appendSegment(s);\n                    }\n                });\n            }\n        }\n        else if (args != null) {\n            if (line_1.Line.isLine(args)) {\n                _this.appendSegment(Path.createSegment('M', args.start));\n                _this.appendSegment(Path.createSegment('L', args.end));\n            }\n            else if (curve_1.Curve.isCurve(args)) {\n                _this.appendSegment(Path.createSegment('M', args.start));\n                _this.appendSegment(Path.createSegment('C', args.controlPoint1, args.controlPoint2, args.end));\n            }\n            else if (polyline_1.Polyline.isPolyline(args)) {\n                if (args.points && args.points.length) {\n                    args.points.forEach(function (point, index) {\n                        var segment = index === 0\n                            ? Path.createSegment('M', point)\n                            : Path.createSegment('L', point);\n                        _this.appendSegment(segment);\n                    });\n                }\n            }\n            else if (args.isSegment) {\n                _this.appendSegment(args);\n            }\n        }\n        return _this;\n    }\n    Object.defineProperty(Path.prototype, Symbol.toStringTag, {\n        get: function () {\n            return Path.toStringTag;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Path.prototype, \"start\", {\n        get: function () {\n            var segments = this.segments;\n            var count = segments.length;\n            if (count === 0) {\n                return null;\n            }\n            for (var i = 0; i < count; i += 1) {\n                var segment = segments[i];\n                if (segment.isVisible) {\n                    return segment.start;\n                }\n            }\n            // if no visible segment, return last segment end point\n            return segments[count - 1].end;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Path.prototype, \"end\", {\n        get: function () {\n            var segments = this.segments;\n            var count = segments.length;\n            if (count === 0) {\n                return null;\n            }\n            for (var i = count - 1; i >= 0; i -= 1) {\n                var segment = segments[i];\n                if (segment.isVisible) {\n                    return segment.end;\n                }\n            }\n            // if no visible segment, return last segment end point\n            return segments[count - 1].end;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Path.prototype.moveTo = function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return this.appendSegment((_a = moveto_1.MoveTo.create).call.apply(_a, __spreadArrays([null], args)));\n    };\n    Path.prototype.lineTo = function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return this.appendSegment((_a = lineto_1.LineTo.create).call.apply(_a, __spreadArrays([null], args)));\n    };\n    Path.prototype.curveTo = function () {\n        var _a;\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return this.appendSegment((_a = curveto_1.CurveTo.create).call.apply(_a, __spreadArrays([null], args)));\n    };\n    Path.prototype.arcTo = function (rx, ry, xAxisRotation, largeArcFlag, sweepFlag, endX, endY) {\n        var start = this.end || new point_1.Point();\n        var points = typeof endX === 'number'\n            ? Util.arcToCurves(start.x, start.y, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, endX, endY)\n            : Util.arcToCurves(start.x, start.y, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, endX.x, endX.y);\n        if (points != null) {\n            for (var i = 0, ii = points.length; i < ii; i += 6) {\n                this.curveTo(points[i], points[i + 1], points[i + 2], points[i + 3], points[i + 4], points[i + 5]);\n            }\n        }\n        return this;\n    };\n    Path.prototype.quadTo = function (x1, y1, x, y) {\n        var start = this.end || new point_1.Point();\n        var data = ['M', start.x, start.y];\n        if (typeof x1 === 'number') {\n            data.push('Q', x1, y1, x, y);\n        }\n        else {\n            var p = y1;\n            data.push(\"Q\", x1.x, x1.y, p.x, p.y);\n        }\n        var path = Path.parse(data.join(' '));\n        this.appendSegment(path.segments.slice(1));\n        return this;\n    };\n    Path.prototype.close = function () {\n        return this.appendSegment(close_1.Close.create());\n    };\n    Path.prototype.drawPoints = function (points, options) {\n        if (options === void 0) { options = {}; }\n        var raw = Util.drawPoints(points, options);\n        var sub = Path.parse(raw);\n        if (sub && sub.segments) {\n            this.appendSegment(sub.segments);\n        }\n    };\n    Path.prototype.bbox = function () {\n        var segments = this.segments;\n        var count = segments.length;\n        if (count === 0) {\n            return null;\n        }\n        var bbox;\n        for (var i = 0; i < count; i += 1) {\n            var segment = segments[i];\n            if (segment.isVisible) {\n                var segmentBBox = segment.bbox();\n                if (segmentBBox != null) {\n                    bbox = bbox ? bbox.union(segmentBBox) : segmentBBox;\n                }\n            }\n        }\n        if (bbox != null) {\n            return bbox;\n        }\n        // if the path has only invisible elements, return end point of last segment\n        var lastSegment = segments[count - 1];\n        return new rectangle_1.Rectangle(lastSegment.end.x, lastSegment.end.y, 0, 0);\n    };\n    Path.prototype.appendSegment = function (seg) {\n        var count = this.segments.length;\n        var previousSegment = count !== 0 ? this.segments[count - 1] : null;\n        var currentSegment;\n        var nextSegment = null;\n        if (Array.isArray(seg)) {\n            for (var i = 0, ii = seg.length; i < ii; i += 1) {\n                var segment = seg[i];\n                currentSegment = this.prepareSegment(segment, previousSegment, nextSegment);\n                this.segments.push(currentSegment);\n                previousSegment = currentSegment;\n            }\n        }\n        else {\n            if (seg != null && seg.isSegment) {\n                currentSegment = this.prepareSegment(seg, previousSegment, nextSegment);\n                this.segments.push(currentSegment);\n            }\n        }\n        return this;\n    };\n    Path.prototype.insertSegment = function (index, seg) {\n        var count = this.segments.length;\n        if (index < 0) {\n            index = count + index + 1; // tslint:disable-line\n        }\n        if (index > count || index < 0) {\n            throw new Error('Index out of range.');\n        }\n        var currentSegment;\n        var previousSegment = null;\n        var nextSegment = null;\n        if (count !== 0) {\n            if (index >= 1) {\n                previousSegment = this.segments[index - 1];\n                nextSegment = previousSegment.nextSegment;\n            }\n            else {\n                previousSegment = null;\n                nextSegment = this.segments[0];\n            }\n        }\n        if (!Array.isArray(seg)) {\n            currentSegment = this.prepareSegment(seg, previousSegment, nextSegment);\n            this.segments.splice(index, 0, currentSegment);\n        }\n        else {\n            for (var i = 0, ii = seg.length; i < ii; i += 1) {\n                var segment = seg[i];\n                currentSegment = this.prepareSegment(segment, previousSegment, nextSegment);\n                this.segments.splice(index + i, 0, currentSegment);\n                previousSegment = currentSegment;\n            }\n        }\n        return this;\n    };\n    Path.prototype.removeSegment = function (index) {\n        var idx = this.fixIndex(index);\n        var removedSegment = this.segments.splice(idx, 1)[0];\n        var previousSegment = removedSegment.previousSegment;\n        var nextSegment = removedSegment.nextSegment;\n        // link the previous and next segments together (if present)\n        if (previousSegment) {\n            previousSegment.nextSegment = nextSegment;\n        }\n        if (nextSegment) {\n            nextSegment.previousSegment = previousSegment;\n        }\n        if (removedSegment.isSubpathStart && nextSegment) {\n            this.updateSubpathStartSegment(nextSegment);\n        }\n        return removedSegment;\n    };\n    Path.prototype.replaceSegment = function (index, seg) {\n        var idx = this.fixIndex(index);\n        var currentSegment;\n        var replacedSegment = this.segments[idx];\n        var previousSegment = replacedSegment.previousSegment;\n        var nextSegment = replacedSegment.nextSegment;\n        var updateSubpathStart = replacedSegment.isSubpathStart;\n        if (!Array.isArray(seg)) {\n            currentSegment = this.prepareSegment(seg, previousSegment, nextSegment);\n            this.segments.splice(idx, 1, currentSegment);\n            if (updateSubpathStart && currentSegment.isSubpathStart) {\n                // already updated by `prepareSegment`\n                updateSubpathStart = false;\n            }\n        }\n        else {\n            this.segments.splice(index, 1);\n            for (var i = 0, ii = seg.length; i < ii; i += 1) {\n                var segment = seg[i];\n                currentSegment = this.prepareSegment(segment, previousSegment, nextSegment);\n                this.segments.splice(index + i, 0, currentSegment);\n                previousSegment = currentSegment;\n                if (updateSubpathStart && currentSegment.isSubpathStart) {\n                    updateSubpathStart = false;\n                }\n            }\n        }\n        if (updateSubpathStart && nextSegment) {\n            this.updateSubpathStartSegment(nextSegment);\n        }\n    };\n    Path.prototype.getSegment = function (index) {\n        var idx = this.fixIndex(index);\n        return this.segments[idx];\n    };\n    Path.prototype.fixIndex = function (index) {\n        var length = this.segments.length;\n        if (length === 0) {\n            throw new Error('Path has no segments.');\n        }\n        var i = index;\n        while (i < 0) {\n            i = length + i;\n        }\n        if (i >= length || i < 0) {\n            throw new Error('Index out of range.');\n        }\n        return i;\n    };\n    Path.prototype.segmentAt = function (ratio, options) {\n        if (options === void 0) { options = {}; }\n        var index = this.segmentIndexAt(ratio, options);\n        if (!index) {\n            return null;\n        }\n        return this.getSegment(index);\n    };\n    Path.prototype.segmentAtLength = function (length, options) {\n        if (options === void 0) { options = {}; }\n        var index = this.segmentIndexAtLength(length, options);\n        if (!index)\n            return null;\n        return this.getSegment(index);\n    };\n    Path.prototype.segmentIndexAt = function (ratio, options) {\n        if (options === void 0) { options = {}; }\n        if (this.segments.length === 0) {\n            return null;\n        }\n        var rate = util_1.clamp(ratio, 0, 1);\n        var opt = this.getOptions(options);\n        var len = this.length(opt);\n        var length = len * rate;\n        return this.segmentIndexAtLength(length, opt);\n    };\n    Path.prototype.segmentIndexAtLength = function (length, options) {\n        if (options === void 0) { options = {}; }\n        var count = this.segments.length;\n        if (count === 0) {\n            return null;\n        }\n        var fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // tslint:disable-line\n        }\n        var precision = this.getPrecision(options);\n        var segmentSubdivisions = this.getSubdivisions(options);\n        var memo = 0;\n        var lastVisibleIndex = null;\n        for (var i = 0; i < count; i += 1) {\n            var index = fromStart ? i : count - 1 - i;\n            var segment = this.segments[index];\n            var subdivisions = segmentSubdivisions[index];\n            var len = segment.length({ precision: precision, subdivisions: subdivisions });\n            if (segment.isVisible) {\n                if (length <= memo + len) {\n                    return index;\n                }\n                lastVisibleIndex = index;\n            }\n            memo += len;\n        }\n        // If length requested is higher than the length of the path, return\n        // last visible segment index. If no visible segment, return null.\n        return lastVisibleIndex;\n    };\n    Path.prototype.getSegmentSubdivisions = function (options) {\n        if (options === void 0) { options = {}; }\n        var precision = this.getPrecision(options);\n        var segmentSubdivisions = [];\n        for (var i = 0, ii = this.segments.length; i < ii; i += 1) {\n            var segment = this.segments[i];\n            var subdivisions = segment.getSubdivisions({ precision: precision });\n            segmentSubdivisions.push(subdivisions);\n        }\n        return segmentSubdivisions;\n    };\n    Path.prototype.updateSubpathStartSegment = function (segment) {\n        var previous = segment.previousSegment;\n        var current = segment;\n        while (current && !current.isSubpathStart) {\n            // assign previous segment's subpath start segment to this segment\n            if (previous != null) {\n                current.subpathStartSegment = previous.subpathStartSegment;\n            }\n            else {\n                current.subpathStartSegment = null;\n            }\n            previous = current;\n            current = current.nextSegment;\n        }\n    };\n    Path.prototype.prepareSegment = function (segment, previousSegment, nextSegment) {\n        segment.previousSegment = previousSegment;\n        segment.nextSegment = nextSegment;\n        if (previousSegment != null) {\n            previousSegment.nextSegment = segment;\n        }\n        if (nextSegment != null) {\n            nextSegment.previousSegment = segment;\n        }\n        var updateSubpathStart = segment;\n        if (segment.isSubpathStart) {\n            // move to\n            segment.subpathStartSegment = segment;\n            updateSubpathStart = nextSegment;\n        }\n        // assign previous segment's subpath start (or self if it is a subpath start) to subsequent segments\n        if (updateSubpathStart != null) {\n            this.updateSubpathStartSegment(updateSubpathStart);\n        }\n        return segment;\n    };\n    Path.prototype.closestPoint = function (p, options) {\n        if (options === void 0) { options = {}; }\n        var t = this.closestPointT(p, options);\n        if (!t) {\n            return null;\n        }\n        return this.pointAtT(t);\n    };\n    Path.prototype.closestPointLength = function (p, options) {\n        if (options === void 0) { options = {}; }\n        var opts = this.getOptions(options);\n        var t = this.closestPointT(p, opts);\n        if (!t) {\n            return 0;\n        }\n        return this.lengthAtT(t, opts);\n    };\n    Path.prototype.closestPointNormalizedLength = function (p, options) {\n        if (options === void 0) { options = {}; }\n        var opts = this.getOptions(options);\n        var cpLength = this.closestPointLength(p, opts);\n        if (cpLength === 0) {\n            return 0;\n        }\n        var length = this.length(opts);\n        if (length === 0) {\n            return 0;\n        }\n        return cpLength / length;\n    };\n    Path.prototype.closestPointT = function (p, options) {\n        if (options === void 0) { options = {}; }\n        if (this.segments.length === 0) {\n            return null;\n        }\n        var precision = this.getPrecision(options);\n        var segmentSubdivisions = this.getSubdivisions(options);\n        var closestPointT;\n        var minSquaredDistance = Infinity;\n        for (var i = 0, ii = this.segments.length; i < ii; i += 1) {\n            var segment = this.segments[i];\n            var subdivisions = segmentSubdivisions[i];\n            if (segment.isVisible) {\n                var segmentClosestPointT = segment.closestPointT(p, {\n                    precision: precision,\n                    subdivisions: subdivisions,\n                });\n                var segmentClosestPoint = segment.pointAtT(segmentClosestPointT);\n                var squaredDistance = util_1.squaredLength(segmentClosestPoint, p);\n                if (squaredDistance < minSquaredDistance) {\n                    closestPointT = { segmentIndex: i, value: segmentClosestPointT };\n                    minSquaredDistance = squaredDistance;\n                }\n            }\n        }\n        if (closestPointT) {\n            return closestPointT;\n        }\n        return { segmentIndex: this.segments.length - 1, value: 1 };\n    };\n    Path.prototype.closestPointTangent = function (p, options) {\n        if (options === void 0) { options = {}; }\n        if (this.segments.length === 0) {\n            return null;\n        }\n        var precision = this.getPrecision(options);\n        var segmentSubdivisions = this.getSubdivisions(options);\n        var closestPointTangent;\n        var minSquaredDistance = Infinity;\n        for (var i = 0, ii = this.segments.length; i < ii; i += 1) {\n            var segment = this.segments[i];\n            var subdivisions = segmentSubdivisions[i];\n            if (segment.isDifferentiable()) {\n                var segmentClosestPointT = segment.closestPointT(p, {\n                    precision: precision,\n                    subdivisions: subdivisions,\n                });\n                var segmentClosestPoint = segment.pointAtT(segmentClosestPointT);\n                var squaredDistance = util_1.squaredLength(segmentClosestPoint, p);\n                if (squaredDistance < minSquaredDistance) {\n                    closestPointTangent = segment.tangentAtT(segmentClosestPointT);\n                    minSquaredDistance = squaredDistance;\n                }\n            }\n        }\n        if (closestPointTangent) {\n            return closestPointTangent;\n        }\n        return null;\n    };\n    Path.prototype.containsPoint = function (p, options) {\n        if (options === void 0) { options = {}; }\n        var polylines = this.toPolylines(options);\n        if (!polylines) {\n            return false;\n        }\n        var numIntersections = 0;\n        for (var i = 0, ii = polylines.length; i < ii; i += 1) {\n            var polyline = polylines[i];\n            if (polyline.containsPoint(p)) {\n                numIntersections += 1;\n            }\n        }\n        // returns `true` for odd numbers of intersections (even-odd algorithm)\n        return numIntersections % 2 === 1;\n    };\n    Path.prototype.pointAt = function (ratio, options) {\n        if (options === void 0) { options = {}; }\n        if (this.segments.length === 0) {\n            return null;\n        }\n        if (ratio <= 0) {\n            return this.start.clone();\n        }\n        if (ratio >= 1) {\n            return this.end.clone();\n        }\n        var opts = this.getOptions(options);\n        var pathLength = this.length(opts);\n        var length = pathLength * ratio;\n        return this.pointAtLength(length, opts);\n    };\n    Path.prototype.pointAtLength = function (length, options) {\n        if (options === void 0) { options = {}; }\n        if (this.segments.length === 0) {\n            return null;\n        }\n        if (length === 0) {\n            return this.start.clone();\n        }\n        var fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // tslint:disable-line\n        }\n        var precision = this.getPrecision(options);\n        var segmentSubdivisions = this.getSubdivisions(options);\n        var lastVisibleSegment;\n        var memo = 0;\n        for (var i = 0, ii = this.segments.length; i < ii; i += 1) {\n            var index = fromStart ? i : ii - 1 - i;\n            var segment = this.segments[index];\n            var subdivisions = segmentSubdivisions[index];\n            var d = segment.length({\n                precision: precision,\n                subdivisions: subdivisions,\n            });\n            if (segment.isVisible) {\n                if (length <= memo + d) {\n                    return segment.pointAtLength((fromStart ? 1 : -1) * (length - memo), {\n                        precision: precision,\n                        subdivisions: subdivisions,\n                    });\n                }\n                lastVisibleSegment = segment;\n            }\n            memo += d;\n        }\n        // if length requested is higher than the length of the path,\n        // return last visible segment endpoint\n        if (lastVisibleSegment) {\n            return fromStart ? lastVisibleSegment.end : lastVisibleSegment.start;\n        }\n        // if no visible segment, return last segment end point\n        var lastSegment = this.segments[this.segments.length - 1];\n        return lastSegment.end.clone();\n    };\n    Path.prototype.pointAtT = function (t) {\n        var segments = this.segments;\n        var numSegments = segments.length;\n        if (numSegments === 0)\n            return null; // if segments is an empty array\n        var segmentIndex = t.segmentIndex;\n        if (segmentIndex < 0)\n            return segments[0].pointAtT(0);\n        if (segmentIndex >= numSegments) {\n            return segments[numSegments - 1].pointAtT(1);\n        }\n        var tValue = util_1.clamp(t.value, 0, 1);\n        return segments[segmentIndex].pointAtT(tValue);\n    };\n    Path.prototype.divideAt = function (ratio, options) {\n        if (options === void 0) { options = {}; }\n        if (this.segments.length === 0) {\n            return null;\n        }\n        var rate = util_1.clamp(ratio, 0, 1);\n        var opts = this.getOptions(options);\n        var len = this.length(opts);\n        var length = len * rate;\n        return this.divideAtLength(length, opts);\n    };\n    Path.prototype.divideAtLength = function (length, options) {\n        if (options === void 0) { options = {}; }\n        if (this.segments.length === 0) {\n            return null;\n        }\n        var fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // tslint:disable-line\n        }\n        var precision = this.getPrecision(options);\n        var segmentSubdivisions = this.getSubdivisions(options);\n        var memo = 0;\n        var divided;\n        var dividedSegmentIndex;\n        var lastValidSegment;\n        var lastValidSegmentIndex;\n        var t;\n        for (var i = 0, ii = this.segments.length; i < ii; i += 1) {\n            var index_1 = fromStart ? i : ii - 1 - i;\n            var segment = this.getSegment(index_1);\n            var subdivisions = segmentSubdivisions[index_1];\n            var opts = { precision: precision, subdivisions: subdivisions };\n            var len = segment.length(opts);\n            if (segment.isDifferentiable()) {\n                lastValidSegment = segment;\n                lastValidSegmentIndex = index_1;\n                if (length <= memo + len) {\n                    dividedSegmentIndex = index_1;\n                    divided = segment.divideAtLength((fromStart ? 1 : -1) * (length - memo), opts);\n                    break;\n                }\n            }\n            memo += len;\n        }\n        if (!lastValidSegment) {\n            return null;\n        }\n        if (!divided) {\n            dividedSegmentIndex = lastValidSegmentIndex;\n            t = fromStart ? 1 : 0;\n            divided = lastValidSegment.divideAtT(t);\n        }\n        // create a copy of this path and replace the identified segment with its two divided parts:\n        var pathCopy = this.clone();\n        var index = dividedSegmentIndex;\n        pathCopy.replaceSegment(index, divided);\n        var divisionStartIndex = index;\n        var divisionMidIndex = index + 1;\n        var divisionEndIndex = index + 2;\n        // do not insert the part if it looks like a point\n        if (!divided[0].isDifferentiable()) {\n            pathCopy.removeSegment(divisionStartIndex);\n            divisionMidIndex -= 1;\n            divisionEndIndex -= 1;\n        }\n        // insert a Moveto segment to ensure secondPath will be valid:\n        var movetoEnd = pathCopy.getSegment(divisionMidIndex).start;\n        pathCopy.insertSegment(divisionMidIndex, Path.createSegment('M', movetoEnd));\n        divisionEndIndex += 1;\n        // do not insert the part if it looks like a point\n        if (!divided[1].isDifferentiable()) {\n            pathCopy.removeSegment(divisionEndIndex - 1);\n            divisionEndIndex -= 1;\n        }\n        // ensure that Closepath segments in secondPath will be assigned correct subpathStartSegment:\n        var secondPathSegmentIndexConversion = divisionEndIndex - divisionStartIndex - 1;\n        for (var i = divisionEndIndex, ii = pathCopy.segments.length; i < ii; i += 1) {\n            var originalSegment = this.getSegment(i - secondPathSegmentIndexConversion);\n            var segment = pathCopy.getSegment(i);\n            if (segment.type === 'Z' &&\n                !originalSegment.subpathStartSegment.end.equals(segment.subpathStartSegment.end)) {\n                // pathCopy segment's subpathStartSegment is different from original segment's one\n                // convert this Closepath segment to a Lineto and replace it in pathCopy\n                var convertedSegment = Path.createSegment('L', originalSegment.end);\n                pathCopy.replaceSegment(i, convertedSegment);\n            }\n        }\n        // distribute pathCopy segments into two paths and return those:\n        var firstPath = new Path(pathCopy.segments.slice(0, divisionMidIndex));\n        var secondPath = new Path(pathCopy.segments.slice(divisionMidIndex));\n        return [firstPath, secondPath];\n    };\n    Path.prototype.intersectsWithLine = function (line, options) {\n        if (options === void 0) { options = {}; }\n        var polylines = this.toPolylines(options);\n        if (polylines == null) {\n            return null;\n        }\n        var intersections = null;\n        for (var i = 0, ii = polylines.length; i < ii; i += 1) {\n            var polyline = polylines[i];\n            var intersection = line.intersect(polyline);\n            if (intersection) {\n                if (intersections == null) {\n                    intersections = [];\n                }\n                if (Array.isArray(intersection)) {\n                    intersections.push.apply(intersections, intersection);\n                }\n                else {\n                    intersections.push(intersection);\n                }\n            }\n        }\n        return intersections;\n    };\n    Path.prototype.isDifferentiable = function () {\n        for (var i = 0, ii = this.segments.length; i < ii; i += 1) {\n            var segment = this.segments[i];\n            if (segment.isDifferentiable()) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Path.prototype.isValid = function () {\n        var segments = this.segments;\n        var isValid = segments.length === 0 || segments[0].type === 'M';\n        return isValid;\n    };\n    Path.prototype.length = function (options) {\n        if (options === void 0) { options = {}; }\n        if (this.segments.length === 0) {\n            return 0;\n        }\n        var segmentSubdivisions = this.getSubdivisions(options);\n        var length = 0;\n        for (var i = 0, ii = this.segments.length; i < ii; i += 1) {\n            var segment = this.segments[i];\n            var subdivisions = segmentSubdivisions[i];\n            length += segment.length({ subdivisions: subdivisions });\n        }\n        return length;\n    };\n    Path.prototype.lengthAtT = function (t, options) {\n        if (options === void 0) { options = {}; }\n        var count = this.segments.length;\n        if (count === 0) {\n            return 0;\n        }\n        var segmentIndex = t.segmentIndex;\n        if (segmentIndex < 0) {\n            return 0;\n        }\n        var tValue = util_1.clamp(t.value, 0, 1);\n        if (segmentIndex >= count) {\n            segmentIndex = count - 1;\n            tValue = 1;\n        }\n        var precision = this.getPrecision(options);\n        var segmentSubdivisions = this.getSubdivisions(options);\n        var length = 0;\n        for (var i = 0; i < segmentIndex; i += 1) {\n            var segment_1 = this.segments[i];\n            var subdivisions_1 = segmentSubdivisions[i];\n            length += segment_1.length({ precision: precision, subdivisions: subdivisions_1 });\n        }\n        var segment = this.segments[segmentIndex];\n        var subdivisions = segmentSubdivisions[segmentIndex];\n        length += segment.lengthAtT(tValue, { precision: precision, subdivisions: subdivisions });\n        return length;\n    };\n    Path.prototype.tangentAt = function (ratio, options) {\n        if (options === void 0) { options = {}; }\n        if (this.segments.length === 0) {\n            return null;\n        }\n        var rate = util_1.clamp(ratio, 0, 1);\n        var opts = this.getOptions(options);\n        var len = this.length(opts);\n        var length = len * rate;\n        return this.tangentAtLength(length, opts);\n    };\n    Path.prototype.tangentAtLength = function (length, options) {\n        if (options === void 0) { options = {}; }\n        if (this.segments.length === 0) {\n            return null;\n        }\n        var fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // tslint:disable-line\n        }\n        var precision = this.getPrecision(options);\n        var segmentSubdivisions = this.getSubdivisions(options);\n        var lastValidSegment;\n        var memo = 0;\n        for (var i = 0, ii = this.segments.length; i < ii; i += 1) {\n            var index = fromStart ? i : ii - 1 - i;\n            var segment = this.segments[index];\n            var subdivisions = segmentSubdivisions[index];\n            var len = segment.length({ precision: precision, subdivisions: subdivisions });\n            if (segment.isDifferentiable()) {\n                if (length <= memo + len) {\n                    return segment.tangentAtLength((fromStart ? 1 : -1) * (length - memo), {\n                        precision: precision,\n                        subdivisions: subdivisions,\n                    });\n                }\n                lastValidSegment = segment;\n            }\n            memo += len;\n        }\n        // if length requested is higher than the length of the path, return tangent of endpoint of last valid segment\n        if (lastValidSegment) {\n            var t = fromStart ? 1 : 0;\n            return lastValidSegment.tangentAtT(t);\n        }\n        // if no valid segment, return null\n        return null;\n    };\n    Path.prototype.tangentAtT = function (t) {\n        var count = this.segments.length;\n        if (count === 0) {\n            return null;\n        }\n        var segmentIndex = t.segmentIndex;\n        if (segmentIndex < 0) {\n            return this.segments[0].tangentAtT(0);\n        }\n        if (segmentIndex >= count) {\n            return this.segments[count - 1].tangentAtT(1);\n        }\n        var tValue = util_1.clamp(t.value, 0, 1);\n        return this.segments[segmentIndex].tangentAtT(tValue);\n    };\n    Path.prototype.getPrecision = function (options) {\n        if (options === void 0) { options = {}; }\n        return options.precision == null ? this.PRECISION : options.precision;\n    };\n    Path.prototype.getSubdivisions = function (options) {\n        if (options === void 0) { options = {}; }\n        if (options.segmentSubdivisions == null) {\n            var precision = this.getPrecision(options);\n            return this.getSegmentSubdivisions({ precision: precision });\n        }\n        return options.segmentSubdivisions;\n    };\n    Path.prototype.getOptions = function (options) {\n        if (options === void 0) { options = {}; }\n        var precision = this.getPrecision(options);\n        var segmentSubdivisions = this.getSubdivisions(options);\n        return { precision: precision, segmentSubdivisions: segmentSubdivisions };\n    };\n    Path.prototype.toPoints = function (options) {\n        if (options === void 0) { options = {}; }\n        var segments = this.segments;\n        var count = segments.length;\n        if (count === 0) {\n            return null;\n        }\n        var segmentSubdivisions = this.getSubdivisions(options);\n        var points = [];\n        var partialPoints = [];\n        for (var i = 0; i < count; i += 1) {\n            var segment = segments[i];\n            if (segment.isVisible) {\n                var divisions = segmentSubdivisions[i];\n                if (divisions.length > 0) {\n                    divisions.forEach(function (c) { return partialPoints.push(c.start); });\n                }\n                else {\n                    partialPoints.push(segment.start);\n                }\n            }\n            else if (partialPoints.length > 0) {\n                partialPoints.push(segments[i - 1].end);\n                points.push(partialPoints);\n                partialPoints = [];\n            }\n        }\n        if (partialPoints.length > 0) {\n            partialPoints.push(this.end);\n            points.push(partialPoints);\n        }\n        return points;\n    };\n    Path.prototype.toPolylines = function (options) {\n        if (options === void 0) { options = {}; }\n        var points = this.toPoints(options);\n        if (!points) {\n            return null;\n        }\n        return points.map(function (arr) { return new polyline_1.Polyline(arr); });\n    };\n    Path.prototype.scale = function (sx, sy, origin) {\n        this.segments.forEach(function (s) { return s.scale(sx, sy, origin); });\n        return this;\n    };\n    Path.prototype.rotate = function (angle, origin) {\n        this.segments.forEach(function (segment) { return segment.rotate(angle, origin); });\n        return this;\n    };\n    Path.prototype.translate = function (tx, ty) {\n        if (typeof tx === 'number') {\n            this.segments.forEach(function (s) { return s.translate(tx, ty); });\n        }\n        else {\n            this.segments.forEach(function (s) { return s.translate(tx); });\n        }\n        return this;\n    };\n    Path.prototype.clone = function () {\n        var path = new Path();\n        this.segments.forEach(function (s) { return path.appendSegment(s.clone()); });\n        return path;\n    };\n    Path.prototype.equals = function (p) {\n        if (p == null) {\n            return false;\n        }\n        var segments = this.segments;\n        var otherSegments = p.segments;\n        var count = segments.length;\n        if (otherSegments.length !== count) {\n            return false;\n        }\n        for (var i = 0; i < count; i += 1) {\n            var a = segments[i];\n            var b = otherSegments[i];\n            if (a.type !== b.type || !a.equals(b)) {\n                return false;\n            }\n        }\n        return true;\n    };\n    Path.prototype.toJSON = function () {\n        return this.segments.map(function (s) { return s.toJSON(); });\n    };\n    Path.prototype.serialize = function () {\n        if (!this.isValid()) {\n            throw new Error('Invalid path segments.');\n        }\n        return this.segments.map(function (s) { return s.serialize(); }).join(' ');\n    };\n    Path.prototype.toString = function () {\n        return this.serialize();\n    };\n    return Path;\n}(geometry_1.Geometry));\nexports.Path = Path;\n(function (Path) {\n    Path.toStringTag = \"X6.Geometry.\" + Path.name;\n    function isPath(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Path) {\n            return true;\n        }\n        var tag = instance[Symbol.toStringTag];\n        var path = instance;\n        if ((tag == null || tag === Path.toStringTag) &&\n            Array.isArray(path.segments) &&\n            typeof path.moveTo === 'function' &&\n            typeof path.lineTo === 'function' &&\n            typeof path.curveTo === 'function') {\n            return true;\n        }\n        return false;\n    }\n    Path.isPath = isPath;\n})(Path = exports.Path || (exports.Path = {}));\nexports.Path = Path;\n(function (Path) {\n    function parse(pathData) {\n        if (!pathData) {\n            return new Path();\n        }\n        var path = new Path();\n        var commandRe = /(?:[a-zA-Z] *)(?:(?:-?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)? *,? *)|(?:-?\\.\\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\\d|-|\\.)/g;\n        var commands = Path.normalize(pathData).match(commandRe);\n        if (commands != null) {\n            for (var i = 0, ii = commands.length; i < ii; i += 1) {\n                var command = commands[i];\n                var argRe = /(?:[a-zA-Z])|(?:(?:-?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))|(?:(?:-?\\.\\d+))/g;\n                // args = [type, coordinate1, coordinate2...]\n                var args = command.match(argRe);\n                if (args != null) {\n                    var type = args[0];\n                    var coords = args.slice(1).map(function (a) { return +a; });\n                    var segment = createSegment.call.apply(createSegment, __spreadArrays([null, type], coords));\n                    path.appendSegment(segment);\n                }\n            }\n        }\n        return path;\n    }\n    Path.parse = parse;\n    function createSegment(type) {\n        var _a, _b, _c;\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (type === 'M') {\n            return (_a = moveto_1.MoveTo.create).call.apply(_a, __spreadArrays([null], args));\n        }\n        if (type === 'L') {\n            return (_b = lineto_1.LineTo.create).call.apply(_b, __spreadArrays([null], args));\n        }\n        if (type === 'C') {\n            return (_c = curveto_1.CurveTo.create).call.apply(_c, __spreadArrays([null], args));\n        }\n        if (type === 'z' || type === 'Z') {\n            return close_1.Close.create();\n        }\n        throw new Error(\"Invalid path segment type \\\"\" + type + \"\\\"\");\n    }\n    Path.createSegment = createSegment;\n})(Path = exports.Path || (exports.Path = {}));\nexports.Path = Path;\n(function (Path) {\n    Path.normalize = normalize_1.normalizePathData;\n    Path.isValid = Util.isValid;\n    Path.drawArc = Util.drawArc;\n    Path.drawPoints = Util.drawPoints;\n    Path.arcToCurves = Util.arcToCurves;\n})(Path = exports.Path || (exports.Path = {}));\nexports.Path = Path;\n//# sourceMappingURL=path.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Segment = void 0;\nvar geometry_1 = require(\"../geometry\");\nvar Segment = /** @class */ (function (_super) {\n    __extends(Segment, _super);\n    function Segment() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.isVisible = true;\n        _this.isSegment = true;\n        _this.isSubpathStart = false;\n        return _this;\n    }\n    Object.defineProperty(Segment.prototype, \"end\", {\n        get: function () {\n            return this.endPoint;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Segment.prototype, \"start\", {\n        get: function () {\n            if (this.previousSegment == null) {\n                throw new Error('Missing previous segment. (This segment cannot be the ' +\n                    'first segment of a path, or segment has not yet been ' +\n                    'added to a path.)');\n            }\n            return this.previousSegment.end;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Segment.prototype.closestPointT = function (p, options) {\n        if (this.closestPointNormalizedLength) {\n            return this.closestPointNormalizedLength(p);\n        }\n        throw new Error('Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.');\n    };\n    Segment.prototype.lengthAtT = function (t, options) {\n        if (t <= 0) {\n            return 0;\n        }\n        var length = this.length();\n        if (t >= 1) {\n            return length;\n        }\n        return length * t;\n    };\n    Segment.prototype.divideAtT = function (t) {\n        if (this.divideAt) {\n            return this.divideAt(t);\n        }\n        throw new Error('Neither `divideAtT` nor `divideAt` method is implemented.');\n    };\n    Segment.prototype.pointAtT = function (t) {\n        if (this.pointAt) {\n            return this.pointAt(t);\n        }\n        throw new Error('Neither `pointAtT` nor `pointAt` method is implemented.');\n    };\n    Segment.prototype.tangentAtT = function (t) {\n        if (this.tangentAt) {\n            return this.tangentAt(t);\n        }\n        throw new Error('Neither `tangentAtT` nor `tangentAt` method is implemented.');\n    };\n    return Segment;\n}(geometry_1.Geometry));\nexports.Segment = Segment;\n//# sourceMappingURL=segment.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.drawArc = exports.arcToCurves = exports.drawPoints = exports.isValid = void 0;\nvar point_1 = require(\"../point\");\nvar regexSupportedData = new RegExp(\"^[\\\\s\\\\dLMCZz,.]*$\");\nfunction isValid(data) {\n    if (typeof data !== 'string') {\n        return false;\n    }\n    return regexSupportedData.test(data);\n}\nexports.isValid = isValid;\n/**\n * Returns the remainder of division of `n` by `m`. You should use this\n * instead of the built-in operation as the built-in operation does not\n * properly handle negative numbers.\n */\nfunction mod(n, m) {\n    return ((n % m) + m) % m;\n}\nfunction draw(points, round, initialMove, close, exclude) {\n    var data = [];\n    var end = points[points.length - 1];\n    var rounded = round != null && round > 0;\n    var arcSize = round || 0;\n    // Adds virtual waypoint in the center between start and end point\n    if (close && rounded) {\n        points = points.slice(); // tslint:disable-line\n        var p0 = points[0];\n        var wp = new point_1.Point(end.x + (p0.x - end.x) / 2, end.y + (p0.y - end.y) / 2);\n        points.splice(0, 0, wp);\n    }\n    var pt = points[0];\n    var i = 1;\n    // Draws the line segments\n    if (initialMove) {\n        data.push('M', pt.x, pt.y);\n    }\n    else {\n        data.push('L', pt.x, pt.y);\n    }\n    while (i < (close ? points.length : points.length - 1)) {\n        var tmp = points[mod(i, points.length)];\n        var dx = pt.x - tmp.x;\n        var dy = pt.y - tmp.y;\n        if (rounded &&\n            (dx !== 0 || dy !== 0) &&\n            (exclude == null || exclude.indexOf(i - 1) < 0)) {\n            // Draws a line from the last point to the current\n            // point with a spacing of size off the current point\n            // into direction of the last point\n            var dist = Math.sqrt(dx * dx + dy * dy);\n            var nx1 = (dx * Math.min(arcSize, dist / 2)) / dist;\n            var ny1 = (dy * Math.min(arcSize, dist / 2)) / dist;\n            var x1 = tmp.x + nx1;\n            var y1 = tmp.y + ny1;\n            data.push('L', x1, y1);\n            // Draws a curve from the last point to the current\n            // point with a spacing of size off the current point\n            // into direction of the next point\n            var next = points[mod(i + 1, points.length)];\n            // Uses next non-overlapping point\n            while (i < points.length - 2 &&\n                Math.round(next.x - tmp.x) === 0 &&\n                Math.round(next.y - tmp.y) === 0) {\n                next = points[mod(i + 2, points.length)];\n                i += 1;\n            }\n            dx = next.x - tmp.x;\n            dy = next.y - tmp.y;\n            dist = Math.max(1, Math.sqrt(dx * dx + dy * dy));\n            var nx2 = (dx * Math.min(arcSize, dist / 2)) / dist;\n            var ny2 = (dy * Math.min(arcSize, dist / 2)) / dist;\n            var x2 = tmp.x + nx2;\n            var y2 = tmp.y + ny2;\n            data.push('Q', tmp.x, tmp.y, x2, y2);\n            tmp = new point_1.Point(x2, y2);\n        }\n        else {\n            data.push('L', tmp.x, tmp.y);\n        }\n        pt = tmp;\n        i += 1;\n    }\n    if (close) {\n        data.push('Z');\n    }\n    else {\n        data.push('L', end.x, end.y);\n    }\n    return data.map(function (v) { return (typeof v === 'string' ? v : +v.toFixed(3)); }).join(' ');\n}\nfunction drawPoints(points, options) {\n    if (options === void 0) { options = {}; }\n    var pts = [];\n    if (points && points.length) {\n        points.forEach(function (p) {\n            if (Array.isArray(p)) {\n                pts.push({ x: p[0], y: p[1] });\n            }\n            else {\n                pts.push({ x: p.x, y: p.y });\n            }\n        });\n    }\n    return draw(pts, options.round, options.initialMove == null || options.initialMove, options.close, options.exclude);\n}\nexports.drawPoints = drawPoints;\n/**\n * Converts the given arc to a series of curves.\n */\nfunction arcToCurves(x0, y0, r1, r2, angle, largeArcFlag, sweepFlag, x, y) {\n    if (angle === void 0) { angle = 0; }\n    if (largeArcFlag === void 0) { largeArcFlag = 0; }\n    if (sweepFlag === void 0) { sweepFlag = 0; }\n    if (r1 === 0 || r2 === 0) {\n        return [];\n    }\n    x -= x0; // tslint:disable-line\n    y -= y0; // tslint:disable-line\n    r1 = Math.abs(r1); // tslint:disable-line\n    r2 = Math.abs(r2); // tslint:disable-line\n    var ctx = -x / 2;\n    var cty = -y / 2;\n    var cpsi = Math.cos((angle * Math.PI) / 180);\n    var spsi = Math.sin((angle * Math.PI) / 180);\n    var rxd = cpsi * ctx + spsi * cty;\n    var ryd = -1 * spsi * ctx + cpsi * cty;\n    var rxdd = rxd * rxd;\n    var rydd = ryd * ryd;\n    var r1x = r1 * r1;\n    var r2y = r2 * r2;\n    var lamda = rxdd / r1x + rydd / r2y;\n    var sds;\n    if (lamda > 1) {\n        r1 = Math.sqrt(lamda) * r1; // tslint:disable-line\n        r2 = Math.sqrt(lamda) * r2; // tslint:disable-line\n        sds = 0;\n    }\n    else {\n        var seif = 1;\n        if (largeArcFlag === sweepFlag) {\n            seif = -1;\n        }\n        sds =\n            seif *\n                Math.sqrt((r1x * r2y - r1x * rydd - r2y * rxdd) / (r1x * rydd + r2y * rxdd));\n    }\n    var txd = (sds * r1 * ryd) / r2;\n    var tyd = (-1 * sds * r2 * rxd) / r1;\n    var tx = cpsi * txd - spsi * tyd + x / 2;\n    var ty = spsi * txd + cpsi * tyd + y / 2;\n    var rad = Math.atan2((ryd - tyd) / r2, (rxd - txd) / r1) - Math.atan2(0, 1);\n    var s1 = rad >= 0 ? rad : 2 * Math.PI + rad;\n    rad =\n        Math.atan2((-ryd - tyd) / r2, (-rxd - txd) / r1) -\n            Math.atan2((ryd - tyd) / r2, (rxd - txd) / r1);\n    var dr = rad >= 0 ? rad : 2 * Math.PI + rad;\n    if (sweepFlag === 0 && dr > 0) {\n        dr -= 2 * Math.PI;\n    }\n    else if (sweepFlag !== 0 && dr < 0) {\n        dr += 2 * Math.PI;\n    }\n    var sse = (dr * 2) / Math.PI;\n    var seg = Math.ceil(sse < 0 ? -1 * sse : sse);\n    var segr = dr / seg;\n    var t = ((8 / 3) * Math.sin(segr / 4) * Math.sin(segr / 4)) / Math.sin(segr / 2);\n    var cpsir1 = cpsi * r1;\n    var cpsir2 = cpsi * r2;\n    var spsir1 = spsi * r1;\n    var spsir2 = spsi * r2;\n    var mc = Math.cos(s1);\n    var ms = Math.sin(s1);\n    var x2 = -t * (cpsir1 * ms + spsir2 * mc);\n    var y2 = -t * (spsir1 * ms - cpsir2 * mc);\n    var x3 = 0;\n    var y3 = 0;\n    var result = [];\n    for (var n = 0; n < seg; n += 1) {\n        s1 += segr;\n        mc = Math.cos(s1);\n        ms = Math.sin(s1);\n        x3 = cpsir1 * mc - spsir2 * ms + tx;\n        y3 = spsir1 * mc + cpsir2 * ms + ty;\n        var dx = -t * (cpsir1 * ms + spsir2 * mc);\n        var dy = -t * (spsir1 * ms - cpsir2 * mc);\n        // CurveTo updates x0, y0 so need to restore it\n        var index = n * 6;\n        result[index] = Number(x2 + x0);\n        result[index + 1] = Number(y2 + y0);\n        result[index + 2] = Number(x3 - dx + x0);\n        result[index + 3] = Number(y3 - dy + y0);\n        result[index + 4] = Number(x3 + x0);\n        result[index + 5] = Number(y3 + y0);\n        x2 = x3 + dx;\n        y2 = y3 + dy;\n    }\n    return result.map(function (num) { return +num.toFixed(2); });\n}\nexports.arcToCurves = arcToCurves;\nfunction drawArc(startX, startY, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, stopX, stopY) {\n    if (xAxisRotation === void 0) { xAxisRotation = 0; }\n    if (largeArcFlag === void 0) { largeArcFlag = 0; }\n    if (sweepFlag === void 0) { sweepFlag = 0; }\n    var data = [];\n    var points = arcToCurves(startX, startY, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, stopX, stopY);\n    if (points != null) {\n        for (var i = 0, ii = points.length; i < ii; i += 6) {\n            data.push('C', points[i], points[i + 1], points[i + 2], points[i + 3], points[i + 4], points[i + 5]);\n        }\n    }\n    return data.join(' ');\n}\nexports.drawArc = drawArc;\n//# sourceMappingURL=util.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Point = void 0;\nvar util = __importStar(require(\"./util\"));\nvar angle_1 = require(\"./angle\");\nvar geometry_1 = require(\"./geometry\");\nvar Point = /** @class */ (function (_super) {\n    __extends(Point, _super);\n    function Point(x, y) {\n        var _this = _super.call(this) || this;\n        _this.x = x == null ? 0 : x;\n        _this.y = y == null ? 0 : y;\n        return _this;\n    }\n    Object.defineProperty(Point.prototype, Symbol.toStringTag, {\n        get: function () {\n            return Point.toStringTag;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Rounds the point to the given precision.\n     */\n    Point.prototype.round = function (precision) {\n        if (precision === void 0) { precision = 0; }\n        this.x = util.round(this.x, precision);\n        this.y = util.round(this.y, precision);\n        return this;\n    };\n    Point.prototype.add = function (x, y) {\n        var p = Point.create(x, y);\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    };\n    Point.prototype.update = function (x, y) {\n        var p = Point.create(x, y);\n        this.x = p.x;\n        this.y = p.y;\n        return this;\n    };\n    Point.prototype.translate = function (dx, dy) {\n        var t = Point.create(dx, dy);\n        this.x += t.x;\n        this.y += t.y;\n        return this;\n    };\n    /**\n     * Rotate the point by `degree` around `center`.\n     */\n    Point.prototype.rotate = function (degree, center) {\n        var p = Point.rotate(this, degree, center);\n        this.x = p.x;\n        this.y = p.y;\n        return this;\n    };\n    /**\n     * Scale point by `sx` and `sy` around the given `origin`. If origin is not\n     * specified, the point is scaled around `0,0`.\n     */\n    Point.prototype.scale = function (sx, sy, origin) {\n        if (origin === void 0) { origin = new Point(); }\n        var ref = Point.create(origin);\n        this.x = ref.x + sx * (this.x - ref.x);\n        this.y = ref.y + sy * (this.y - ref.y);\n        return this;\n    };\n    /**\n     * Chooses the point closest to this point from among `points`. If `points`\n     * is an empty array, `null` is returned.\n     */\n    Point.prototype.closest = function (points) {\n        var _this = this;\n        if (points.length === 1) {\n            return Point.create(points[0]);\n        }\n        var ret = null;\n        var min = Infinity;\n        points.forEach(function (p) {\n            var dist = _this.squaredDistance(p);\n            if (dist < min) {\n                ret = p;\n                min = dist;\n            }\n        });\n        return ret ? Point.create(ret) : null;\n    };\n    /**\n     * Returns the distance between the point and another point `p`.\n     */\n    Point.prototype.distance = function (p) {\n        return Math.sqrt(this.squaredDistance(p));\n    };\n    /**\n     * Returns the squared distance between the point and another point `p`.\n     *\n     * Useful for distance comparisons in which real distance is not necessary\n     * (saves one `Math.sqrt()` operation).\n     */\n    Point.prototype.squaredDistance = function (p) {\n        var ref = Point.create(p);\n        var dx = this.x - ref.x;\n        var dy = this.y - ref.y;\n        return dx * dx + dy * dy;\n    };\n    Point.prototype.manhattanDistance = function (p) {\n        var ref = Point.create(p);\n        return Math.abs(ref.x - this.x) + Math.abs(ref.y - this.y);\n    };\n    /**\n     * Returns the magnitude of the point vector.\n     *\n     * @see http://en.wikipedia.org/wiki/Magnitude_(mathematics)\n     */\n    Point.prototype.magnitude = function () {\n        return Math.sqrt(this.x * this.x + this.y * this.y) || 0.01;\n    };\n    /**\n     * Returns the angle(in degrees) between vector from this point to `p` and\n     * the x-axis.\n     */\n    Point.prototype.theta = function (p) {\n        if (p === void 0) { p = new Point(); }\n        var ref = Point.create(p);\n        var y = -(ref.y - this.y); // invert the y-axis.\n        var x = ref.x - this.x;\n        var rad = Math.atan2(y, x);\n        // Correction for III. and IV. quadrant.\n        if (rad < 0) {\n            rad = 2 * Math.PI + rad;\n        }\n        return (180 * rad) / Math.PI;\n    };\n    /**\n     * Returns the angle(in degrees) between vector from this point to `p1` and\n     * the vector from this point to `p2`.\n     *\n     * The ordering of points `p1` and `p2` is important.\n     *\n     * The function returns a value between `0` and `180` when the angle (in the\n     * direction from `p1` to `p2`) is clockwise, and a value between `180` and\n     * `360` when the angle is counterclockwise.\n     *\n     * Returns `NaN` if either of the points `p1` and `p2` is equal with this point.\n     */\n    Point.prototype.angleBetween = function (p1, p2) {\n        if (this.equals(p1) || this.equals(p2)) {\n            return NaN;\n        }\n        var angle = this.theta(p2) - this.theta(p1);\n        if (angle < 0) {\n            angle += 360;\n        }\n        return angle;\n    };\n    /**\n     * Returns the angle(in degrees) between the line from `(0,0)` and this point\n     * and the line from `(0,0)` to `p`.\n     *\n     * The function returns a value between `0` and `180` when the angle (in the\n     * direction from this point to `p`) is clockwise, and a value between `180`\n     * and `360` when the angle is counterclockwise. Returns `NaN` if called from\n     * point `(0,0)` or if `p` is `(0,0)`.\n     */\n    Point.prototype.vectorAngle = function (p) {\n        var zero = new Point(0, 0);\n        return zero.angleBetween(this, p);\n    };\n    /**\n     * Converts rectangular to polar coordinates.\n     */\n    Point.prototype.toPolar = function (origin) {\n        this.update(Point.toPolar(this, origin));\n        return this;\n    };\n    /**\n     * Returns the change in angle(in degrees) that is the result of moving the\n     * point from its previous position to its current position.\n     *\n     * More specifically, this function computes the angle between the line from\n     * the ref point to the previous position of this point(i.e. current position\n     * `-dx`, `-dy`) and the line from the `ref` point to the current position of\n     * this point.\n     *\n     * The function returns a positive value between `0` and `180` when the angle\n     * (in the direction from previous position of this point to its current\n     * position) is clockwise, and a negative value between `0` and `-180` when\n     * the angle is counterclockwise.\n     *\n     * The function returns `0` if the previous and current positions of this\n     * point are the same (i.e. both `dx` and `dy` are `0`).\n     */\n    Point.prototype.changeInAngle = function (dx, dy, ref) {\n        if (ref === void 0) { ref = new Point(); }\n        // Revert the translation and measure the change in angle around x-axis.\n        return this.clone().translate(-dx, -dy).theta(ref) - this.theta(ref);\n    };\n    /**\n     * If the point lies outside the rectangle `rect`, adjust the point so that\n     * it becomes the nearest point on the boundary of `rect`.\n     */\n    Point.prototype.adhereToRect = function (rect) {\n        if (!util.containsPoint(rect, this)) {\n            this.x = Math.min(Math.max(this.x, rect.x), rect.x + rect.width);\n            this.y = Math.min(Math.max(this.y, rect.y), rect.y + rect.height);\n        }\n        return this;\n    };\n    /**\n     * Returns the bearing(cardinal direction) between me and the given point.\n     *\n     * @see https://en.wikipedia.org/wiki/Cardinal_direction\n     */\n    Point.prototype.bearing = function (p) {\n        var ref = Point.create(p);\n        var lat1 = angle_1.Angle.toRad(this.y);\n        var lat2 = angle_1.Angle.toRad(ref.y);\n        var lon1 = this.x;\n        var lon2 = ref.x;\n        var dLon = angle_1.Angle.toRad(lon2 - lon1);\n        var y = Math.sin(dLon) * Math.cos(lat2);\n        var x = Math.cos(lat1) * Math.sin(lat2) -\n            Math.sin(lat1) * Math.cos(lat2) * Math.cos(dLon);\n        var brng = angle_1.Angle.toDeg(Math.atan2(y, x));\n        var bearings = ['NE', 'E', 'SE', 'S', 'SW', 'W', 'NW', 'N'];\n        var index = brng - 22.5;\n        if (index < 0) {\n            index += 360;\n        }\n        index = parseInt((index / 45), 10);\n        return bearings[index];\n    };\n    /**\n     * Returns the cross product of the vector from me to `p1` and the vector\n     * from me to `p2`.\n     *\n     * The left-hand rule is used because the coordinate system is left-handed.\n     */\n    Point.prototype.cross = function (p1, p2) {\n        if (p1 != null && p2 != null) {\n            var a = Point.create(p1);\n            var b = Point.create(p2);\n            return (b.x - this.x) * (a.y - this.y) - (b.y - this.y) * (a.x - this.x);\n        }\n        return NaN;\n    };\n    /**\n     * Returns the dot product of this point with given other point.\n     */\n    Point.prototype.dot = function (p) {\n        var ref = Point.create(p);\n        return this.x * ref.x + this.y * ref.y;\n    };\n    Point.prototype.diff = function (dx, dy) {\n        if (typeof dx === 'number') {\n            return new Point(this.x - dx, this.y - dy);\n        }\n        var p = Point.create(dx);\n        return new Point(this.x - p.x, this.y - p.y);\n    };\n    /**\n     * Returns an interpolation between me and point `p` for a parametert in\n     * the closed interval `[0, 1]`.\n     */\n    Point.prototype.lerp = function (p, t) {\n        var ref = Point.create(p);\n        return new Point((1 - t) * this.x + t * ref.x, (1 - t) * this.y + t * ref.y);\n    };\n    /**\n     * Normalize the point vector, scale the line segment between `(0, 0)`\n     * and the point in order for it to have the given length. If length is\n     * not specified, it is considered to be `1`; in that case, a unit vector\n     * is computed.\n     */\n    Point.prototype.normalize = function (length) {\n        if (length === void 0) { length = 1; }\n        var scale = length / this.magnitude();\n        return this.scale(scale, scale);\n    };\n    /**\n     * Moves this point along the line starting from `ref` to this point by a\n     * certain `distance`.\n     */\n    Point.prototype.move = function (ref, distance) {\n        var p = Point.create(ref);\n        var rad = angle_1.Angle.toRad(p.theta(this));\n        return this.translate(Math.cos(rad) * distance, -Math.sin(rad) * distance);\n    };\n    /**\n     * Returns a point that is the reflection of me with the center of inversion\n     * in `ref` point.\n     */\n    Point.prototype.reflection = function (ref) {\n        return Point.create(ref).move(this, this.distance(ref));\n    };\n    Point.prototype.snapToGrid = function (gx, gy) {\n        this.x = util.snapToGrid(this.x, gx);\n        this.y = util.snapToGrid(this.y, gy == null ? gx : gy);\n        return this;\n    };\n    Point.prototype.equals = function (p) {\n        var ref = Point.create(p);\n        return ref != null && ref.x === this.x && ref.y === this.y;\n    };\n    Point.prototype.clone = function () {\n        return Point.clone(this);\n    };\n    /**\n     * Returns the point as a simple JSON object. For example: `{ x: 0, y: 0 }`.\n     */\n    Point.prototype.toJSON = function () {\n        return Point.toJSON(this);\n    };\n    Point.prototype.serialize = function () {\n        return this.x + \" \" + this.y;\n    };\n    return Point;\n}(geometry_1.Geometry));\nexports.Point = Point;\n(function (Point) {\n    Point.toStringTag = \"X6.Geometry.\" + Point.name;\n    function isPoint(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Point) {\n            return true;\n        }\n        var tag = instance[Symbol.toStringTag];\n        var point = instance;\n        if ((tag == null || tag === Point.toStringTag) &&\n            typeof point.x === 'number' &&\n            typeof point.y === 'number' &&\n            typeof point.toPolar === 'function') {\n            return true;\n        }\n        return false;\n    }\n    Point.isPoint = isPoint;\n})(Point = exports.Point || (exports.Point = {}));\nexports.Point = Point;\n(function (Point) {\n    function isPointLike(p) {\n        return (p != null &&\n            typeof p === 'object' &&\n            typeof p.x === 'number' &&\n            typeof p.y === 'number');\n    }\n    Point.isPointLike = isPointLike;\n    function isPointData(p) {\n        return (p != null &&\n            Array.isArray(p) &&\n            p.length === 2 &&\n            typeof p[0] === 'number' &&\n            typeof p[1] === 'number');\n    }\n    Point.isPointData = isPointData;\n})(Point = exports.Point || (exports.Point = {}));\nexports.Point = Point;\n(function (Point) {\n    function create(x, y) {\n        if (x == null || typeof x === 'number') {\n            return new Point(x, y);\n        }\n        return clone(x);\n    }\n    Point.create = create;\n    function clone(p) {\n        if (Point.isPoint(p)) {\n            return new Point(p.x, p.y);\n        }\n        if (Array.isArray(p)) {\n            return new Point(p[0], p[1]);\n        }\n        return new Point(p.x, p.y);\n    }\n    Point.clone = clone;\n    function toJSON(p) {\n        if (Point.isPoint(p)) {\n            return { x: p.x, y: p.y };\n        }\n        if (Array.isArray(p)) {\n            return { x: p[0], y: p[1] };\n        }\n        return { x: p.x, y: p.y };\n    }\n    Point.toJSON = toJSON;\n    /**\n     * Returns a new Point object from the given polar coordinates.\n     * @see http://en.wikipedia.org/wiki/Polar_coordinate_system\n     */\n    function fromPolar(r, rad, origin) {\n        if (origin === void 0) { origin = new Point(); }\n        var x = Math.abs(r * Math.cos(rad));\n        var y = Math.abs(r * Math.sin(rad));\n        var org = clone(origin);\n        var deg = angle_1.Angle.normalize(angle_1.Angle.toDeg(rad));\n        if (deg < 90) {\n            y = -y;\n        }\n        else if (deg < 180) {\n            x = -x;\n            y = -y;\n        }\n        else if (deg < 270) {\n            x = -x;\n        }\n        return new Point(org.x + x, org.y + y);\n    }\n    Point.fromPolar = fromPolar;\n    /**\n     * Converts rectangular to polar coordinates.\n     */\n    function toPolar(point, origin) {\n        if (origin === void 0) { origin = new Point(); }\n        var p = clone(point);\n        var o = clone(origin);\n        var dx = p.x - o.x;\n        var dy = p.y - o.y;\n        return new Point(Math.sqrt(dx * dx + dy * dy), // r\n        angle_1.Angle.toRad(o.theta(p)));\n    }\n    Point.toPolar = toPolar;\n    function equals(p1, p2) {\n        if (p1 === p2) {\n            return true;\n        }\n        if (p1 != null && p2 != null) {\n            return p1.x === p2.x && p1.y === p2.y;\n        }\n        return false;\n    }\n    Point.equals = equals;\n    function equalPoints(p1, p2) {\n        if ((p1 == null && p2 != null) ||\n            (p1 != null && p2 == null) ||\n            (p1 != null && p2 != null && p1.length !== p2.length)) {\n            return false;\n        }\n        if (p1 != null && p2 != null) {\n            for (var i = 0, ii = p1.length; i < ii; i += 1) {\n                if (!equals(p1[i], p2[i])) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n    Point.equalPoints = equalPoints;\n    /**\n     * Returns a point with random coordinates that fall within the range\n     * `[x1, x2]` and `[y1, y2]`.\n     */\n    function random(x1, x2, y1, y2) {\n        return new Point(util.random(x1, x2), util.random(y1, y2));\n    }\n    Point.random = random;\n    function rotate(point, angle, center) {\n        var rad = angle_1.Angle.toRad(angle_1.Angle.normalize(-angle));\n        var sin = Math.sin(rad);\n        var cos = Math.cos(rad);\n        return rotateEx(point, cos, sin, center);\n    }\n    Point.rotate = rotate;\n    function rotateEx(point, cos, sin, center) {\n        if (center === void 0) { center = new Point(); }\n        var source = clone(point);\n        var origin = clone(center);\n        var dx = source.x - origin.x;\n        var dy = source.y - origin.y;\n        var x1 = dx * cos - dy * sin;\n        var y1 = dy * cos + dx * sin;\n        return new Point(x1 + origin.x, y1 + origin.y);\n    }\n    Point.rotateEx = rotateEx;\n})(Point = exports.Point || (exports.Point = {}));\nexports.Point = Point;\n//# sourceMappingURL=point.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Polyline = void 0;\nvar point_1 = require(\"./point\");\nvar rectangle_1 = require(\"./rectangle\");\nvar line_1 = require(\"./line\");\nvar geometry_1 = require(\"./geometry\");\nvar Polyline = /** @class */ (function (_super) {\n    __extends(Polyline, _super);\n    function Polyline(points) {\n        var _this = _super.call(this) || this;\n        if (points != null) {\n            if (typeof points === 'string') {\n                return Polyline.parse(points);\n            }\n            _this.points = points.map(function (p) { return point_1.Point.create(p); });\n        }\n        else {\n            _this.points = [];\n        }\n        return _this;\n    }\n    Object.defineProperty(Polyline.prototype, Symbol.toStringTag, {\n        get: function () {\n            return Polyline.toStringTag;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Polyline.prototype, \"start\", {\n        get: function () {\n            if (this.points.length === 0) {\n                return null;\n            }\n            return this.points[0];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Polyline.prototype, \"end\", {\n        get: function () {\n            if (this.points.length === 0) {\n                return null;\n            }\n            return this.points[this.points.length - 1];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Polyline.prototype.scale = function (sx, sy, origin) {\n        if (origin === void 0) { origin = new point_1.Point(); }\n        this.points.forEach(function (p) { return p.scale(sx, sy, origin); });\n        return this;\n    };\n    Polyline.prototype.rotate = function (angle, origin) {\n        this.points.forEach(function (p) { return p.rotate(angle, origin); });\n        return this;\n    };\n    Polyline.prototype.translate = function (dx, dy) {\n        var t = point_1.Point.create(dx, dy);\n        this.points.forEach(function (p) { return p.translate(t.x, t.y); });\n        return this;\n    };\n    Polyline.prototype.bbox = function () {\n        if (this.points.length === 0) {\n            return new rectangle_1.Rectangle();\n        }\n        var x1 = Infinity;\n        var x2 = -Infinity;\n        var y1 = Infinity;\n        var y2 = -Infinity;\n        var points = this.points;\n        for (var i = 0, ii = points.length; i < ii; i += 1) {\n            var point = points[i];\n            var x = point.x;\n            var y = point.y;\n            if (x < x1)\n                x1 = x;\n            if (x > x2)\n                x2 = x;\n            if (y < y1)\n                y1 = y;\n            if (y > y2)\n                y2 = y;\n        }\n        return new rectangle_1.Rectangle(x1, y1, x2 - x1, y2 - y1);\n    };\n    Polyline.prototype.closestPoint = function (p) {\n        var cpLength = this.closestPointLength(p);\n        return this.pointAtLength(cpLength);\n    };\n    Polyline.prototype.closestPointLength = function (p) {\n        var points = this.points;\n        var count = points.length;\n        if (count === 0 || count === 1) {\n            return 0;\n        }\n        var length = 0;\n        var cpLength = 0;\n        var minSqrDistance = Infinity;\n        for (var i = 0, ii = count - 1; i < ii; i += 1) {\n            var line = new line_1.Line(points[i], points[i + 1]);\n            var lineLength = line.length();\n            var cpNormalizedLength = line.closestPointNormalizedLength(p);\n            var cp = line.pointAt(cpNormalizedLength);\n            var sqrDistance = cp.squaredDistance(p);\n            if (sqrDistance < minSqrDistance) {\n                minSqrDistance = sqrDistance;\n                cpLength = length + cpNormalizedLength * lineLength;\n            }\n            length += lineLength;\n        }\n        return cpLength;\n    };\n    Polyline.prototype.closestPointNormalizedLength = function (p) {\n        var cpLength = this.closestPointLength(p);\n        if (cpLength === 0) {\n            return 0;\n        }\n        var length = this.length();\n        if (length === 0) {\n            return 0;\n        }\n        return cpLength / length;\n    };\n    Polyline.prototype.closestPointTangent = function (p) {\n        var cpLength = this.closestPointLength(p);\n        return this.tangentAtLength(cpLength);\n    };\n    Polyline.prototype.containsPoint = function (p) {\n        if (this.points.length === 0) {\n            return false;\n        }\n        var ref = point_1.Point.clone(p);\n        var x = ref.x;\n        var y = ref.y;\n        var points = this.points;\n        var count = points.length;\n        var startIndex = count - 1;\n        var intersectionCount = 0;\n        for (var endIndex = 0; endIndex < count; endIndex += 1) {\n            var start = points[startIndex];\n            var end = points[endIndex];\n            if (ref.equals(start)) {\n                return true;\n            }\n            var segment = new line_1.Line(start, end);\n            if (segment.containsPoint(p)) {\n                return true;\n            }\n            // do we have an intersection?\n            if ((y <= start.y && y > end.y) || (y > start.y && y <= end.y)) {\n                // this conditional branch IS NOT entered when `segment` is collinear/coincident with `ray`\n                // (when `y === start.y === end.y`)\n                // this conditional branch IS entered when `segment` touches `ray` at only one point\n                // (e.g. when `y === start.y !== end.y`)\n                // since this branch is entered again for the following segment, the two touches cancel out\n                var xDifference = start.x - x > end.x - x ? start.x - x : end.x - x;\n                if (xDifference >= 0) {\n                    // segment lies at least partially to the right of `p`\n                    var rayEnd = new point_1.Point(x + xDifference, y); // right\n                    var ray = new line_1.Line(p, rayEnd);\n                    if (segment.intersectsWithLine(ray)) {\n                        // an intersection was detected to the right of `p`\n                        intersectionCount += 1;\n                    }\n                } // else: `segment` lies completely to the left of `p` (i.e. no intersection to the right)\n            }\n            // move to check the next polyline segment\n            startIndex = endIndex;\n        }\n        // returns `true` for odd numbers of intersections (even-odd algorithm)\n        return intersectionCount % 2 === 1;\n    };\n    Polyline.prototype.intersectsWithLine = function (line) {\n        var intersections = [];\n        for (var i = 0, n = this.points.length - 1; i < n; i += 1) {\n            var a = this.points[i];\n            var b = this.points[i + 1];\n            var int = line.intersectsWithLine(new line_1.Line(a, b));\n            if (int) {\n                intersections.push(int);\n            }\n        }\n        return intersections.length > 0 ? intersections : null;\n    };\n    Polyline.prototype.isDifferentiable = function () {\n        for (var i = 0, ii = this.points.length - 1; i < ii; i += 1) {\n            var a = this.points[i];\n            var b = this.points[i + 1];\n            var line = new line_1.Line(a, b);\n            if (line.isDifferentiable()) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Polyline.prototype.length = function () {\n        var len = 0;\n        for (var i = 0, ii = this.points.length - 1; i < ii; i += 1) {\n            var a = this.points[i];\n            var b = this.points[i + 1];\n            len += a.distance(b);\n        }\n        return len;\n    };\n    Polyline.prototype.pointAt = function (ratio) {\n        var points = this.points;\n        var count = points.length;\n        if (count === 0) {\n            return null;\n        }\n        if (count === 1) {\n            return points[0].clone();\n        }\n        if (ratio <= 0) {\n            return points[0].clone();\n        }\n        if (ratio >= 1) {\n            return points[count - 1].clone();\n        }\n        var total = this.length();\n        var length = total * ratio;\n        return this.pointAtLength(length);\n    };\n    Polyline.prototype.pointAtLength = function (length) {\n        var points = this.points;\n        var count = points.length;\n        if (count === 0) {\n            return null;\n        }\n        if (count === 1) {\n            return points[0].clone();\n        }\n        var fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // tslint:disable-line\n        }\n        var tmp = 0;\n        for (var i = 0, ii = count - 1; i < ii; i += 1) {\n            var index = fromStart ? i : ii - 1 - i;\n            var a = points[index];\n            var b = points[index + 1];\n            var l = new line_1.Line(a, b);\n            var d = a.distance(b);\n            if (length <= tmp + d) {\n                return l.pointAtLength((fromStart ? 1 : -1) * (length - tmp));\n            }\n            tmp += d;\n        }\n        var lastPoint = fromStart ? points[count - 1] : points[0];\n        return lastPoint.clone();\n    };\n    Polyline.prototype.tangentAt = function (ratio) {\n        var points = this.points;\n        var count = points.length;\n        if (count === 0 || count === 1) {\n            return null;\n        }\n        if (ratio < 0) {\n            ratio = 0; // tslint:disable-line\n        }\n        if (ratio > 1) {\n            ratio = 1; // tslint:disable-line\n        }\n        var total = this.length();\n        var length = total * ratio;\n        return this.tangentAtLength(length);\n    };\n    Polyline.prototype.tangentAtLength = function (length) {\n        var points = this.points;\n        var count = points.length;\n        if (count === 0 || count === 1) {\n            return null;\n        }\n        var fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // tslint:disable-line\n        }\n        var lastValidLine;\n        var tmp = 0;\n        for (var i = 0, ii = count - 1; i < ii; i += 1) {\n            var index = fromStart ? i : ii - 1 - i;\n            var a = points[index];\n            var b = points[index + 1];\n            var l = new line_1.Line(a, b);\n            var d = a.distance(b);\n            if (l.isDifferentiable()) {\n                // has a tangent line (line length is not 0)\n                if (length <= tmp + d) {\n                    return l.tangentAtLength((fromStart ? 1 : -1) * (length - tmp));\n                }\n                lastValidLine = l;\n            }\n            tmp += d;\n        }\n        if (lastValidLine) {\n            var ratio = fromStart ? 1 : 0;\n            return lastValidLine.tangentAt(ratio);\n        }\n        return null;\n    };\n    Polyline.prototype.simplify = function (\n    // TODO: Accept startIndex and endIndex to specify where to start and end simplification\n    options) {\n        if (options === void 0) { options = {}; }\n        var points = this.points;\n        // we need at least 3 points\n        if (points.length < 3) {\n            return this;\n        }\n        var threshold = options.threshold || 0;\n        // start at the beginning of the polyline and go forward\n        var currentIndex = 0;\n        // we need at least one intermediate point (3 points) in every iteration\n        // as soon as that stops being true, we know we reached the end of the polyline\n        while (points[currentIndex + 2]) {\n            var firstIndex = currentIndex;\n            var middleIndex = currentIndex + 1;\n            var lastIndex = currentIndex + 2;\n            var firstPoint = points[firstIndex];\n            var middlePoint = points[middleIndex];\n            var lastPoint = points[lastIndex];\n            var chord = new line_1.Line(firstPoint, lastPoint); // = connection between first and last point\n            var closestPoint = chord.closestPoint(middlePoint); // = closest point on chord from middle point\n            var closestPointDistance = closestPoint.distance(middlePoint);\n            if (closestPointDistance <= threshold) {\n                // middle point is close enough to the chord = simplify\n                // 1) remove middle point:\n                points.splice(middleIndex, 1);\n                // 2) in next iteration, investigate the newly-created triplet of points\n                //    - do not change `currentIndex`\n                //    = (first point stays, point after removed point becomes middle point)\n            }\n            else {\n                // middle point is far from the chord\n                // 1) preserve middle point\n                // 2) in next iteration, move `currentIndex` by one step:\n                currentIndex += 1;\n                //    = (point after first point becomes first point)\n            }\n        }\n        // `points` array was modified in-place\n        return this;\n    };\n    Polyline.prototype.toHull = function () {\n        var points = this.points;\n        var count = points.length;\n        if (count === 0) {\n            return new Polyline();\n        }\n        // Step 1: find the starting point -- point with\n        // the lowest y (if equality, highest x).\n        var startPoint = points[0];\n        for (var i = 1; i < count; i += 1) {\n            if (points[i].y < startPoint.y) {\n                startPoint = points[i];\n            }\n            else if (points[i].y === startPoint.y && points[i].x > startPoint.x) {\n                startPoint = points[i];\n            }\n        }\n        // Step 2: sort the list of points by angle between line\n        // from start point to current point and the x-axis (theta).\n        // Step 2a: create the point records = [point, originalIndex, angle]\n        var sortedRecords = [];\n        for (var i = 0; i < count; i += 1) {\n            var angle = startPoint.theta(points[i]);\n            if (angle === 0) {\n                // Give highest angle to start point.\n                // The start point will end up at end of sorted list.\n                // The start point will end up at beginning of hull points list.\n                angle = 360;\n            }\n            sortedRecords.push([points[i], i, angle]);\n        }\n        // Step 2b: sort the list in place\n        sortedRecords.sort(function (record1, record2) {\n            var ret = record1[2] - record2[2];\n            if (ret === 0) {\n                ret = record2[1] - record1[1];\n            }\n            return ret;\n        });\n        // Step 2c: duplicate start record from the top of\n        // the stack to the bottom of the stack.\n        if (sortedRecords.length > 2) {\n            var startPoint_1 = sortedRecords[sortedRecords.length - 1];\n            sortedRecords.unshift(startPoint_1);\n        }\n        // Step 3\n        // ------\n        // Step 3a: go through sorted points in order and find those with\n        // right turns, and we want to get our results in clockwise order.\n        // Dictionary of points with left turns - cannot be on the hull.\n        var insidePoints = {};\n        // Stack of records with right turns - hull point candidates.\n        var hullRecords = [];\n        var getKey = function (record) {\n            return record[0].toString() + \"@\" + record[1];\n        };\n        while (sortedRecords.length !== 0) {\n            var currentRecord = sortedRecords.pop();\n            var currentPoint = currentRecord[0];\n            // Check if point has already been discarded.\n            if (insidePoints[getKey(currentRecord)]) {\n                continue;\n            }\n            var correctTurnFound = false;\n            while (!correctTurnFound) {\n                if (hullRecords.length < 2) {\n                    // Not enough points for comparison, just add current point.\n                    hullRecords.push(currentRecord);\n                    correctTurnFound = true;\n                }\n                else {\n                    var lastHullRecord = hullRecords.pop();\n                    var lastHullPoint = lastHullRecord[0];\n                    var secondLastHullRecord = hullRecords.pop();\n                    var secondLastHullPoint = secondLastHullRecord[0];\n                    var crossProduct = secondLastHullPoint.cross(lastHullPoint, currentPoint);\n                    if (crossProduct < 0) {\n                        // Found a right turn.\n                        hullRecords.push(secondLastHullRecord);\n                        hullRecords.push(lastHullRecord);\n                        hullRecords.push(currentRecord);\n                        correctTurnFound = true;\n                    }\n                    else if (crossProduct === 0) {\n                        // the three points are collinear\n                        // three options:\n                        // there may be a 180 or 0 degree angle at lastHullPoint\n                        // or two of the three points are coincident\n                        // we have to take rounding errors into account\n                        var THRESHOLD = 1e-10;\n                        var angleBetween = lastHullPoint.angleBetween(secondLastHullPoint, currentPoint);\n                        if (Math.abs(angleBetween - 180) < THRESHOLD) {\n                            // rouding around 180 to 180\n                            // if the cross product is 0 because the angle is 180 degrees\n                            // discard last hull point (add to insidePoints)\n                            // insidePoints.unshift(lastHullPoint);\n                            insidePoints[getKey(lastHullRecord)] = lastHullPoint;\n                            // reenter second-to-last hull point (will be last at next iter)\n                            hullRecords.push(secondLastHullRecord);\n                            // do not do anything with current point\n                            // correct turn not found\n                        }\n                        else if (lastHullPoint.equals(currentPoint) ||\n                            secondLastHullPoint.equals(lastHullPoint)) {\n                            // if the cross product is 0 because two points are the same\n                            // discard last hull point (add to insidePoints)\n                            // insidePoints.unshift(lastHullPoint);\n                            insidePoints[getKey(lastHullRecord)] = lastHullPoint;\n                            // reenter second-to-last hull point (will be last at next iter)\n                            hullRecords.push(secondLastHullRecord);\n                            // do not do anything with current point\n                            // correct turn not found\n                        }\n                        else if (Math.abs(((angleBetween + 1) % 360) - 1) < THRESHOLD) {\n                            // rounding around 0 and 360 to 0\n                            // if the cross product is 0 because the angle is 0 degrees\n                            // remove last hull point from hull BUT do not discard it\n                            // reenter second-to-last hull point (will be last at next iter)\n                            hullRecords.push(secondLastHullRecord);\n                            // put last hull point back into the sorted point records list\n                            sortedRecords.push(lastHullRecord);\n                            // we are switching the order of the 0deg and 180deg points\n                            // correct turn not found\n                        }\n                    }\n                    else {\n                        // found a left turn\n                        // discard last hull point (add to insidePoints)\n                        // insidePoints.unshift(lastHullPoint);\n                        insidePoints[getKey(lastHullRecord)] = lastHullPoint;\n                        // reenter second-to-last hull point (will be last at next iter of loop)\n                        hullRecords.push(secondLastHullRecord);\n                        // do not do anything with current point\n                        // correct turn not found\n                    }\n                }\n            }\n        }\n        // At this point, hullPointRecords contains the output points in clockwise order\n        // the points start with lowest-y,highest-x startPoint, and end at the same point\n        // Step 3b: remove duplicated startPointRecord from the end of the array\n        if (hullRecords.length > 2) {\n            hullRecords.pop();\n        }\n        // Step 4: find the lowest originalIndex record and put it at the beginning of hull\n        var lowestHullIndex; // the lowest originalIndex on the hull\n        var indexOfLowestHullIndexRecord = -1; // the index of the record with lowestHullIndex\n        for (var i = 0, n = hullRecords.length; i < n; i += 1) {\n            var currentHullIndex = hullRecords[i][1];\n            if (lowestHullIndex === undefined || currentHullIndex < lowestHullIndex) {\n                lowestHullIndex = currentHullIndex;\n                indexOfLowestHullIndexRecord = i;\n            }\n        }\n        var hullPointRecordsReordered = [];\n        if (indexOfLowestHullIndexRecord > 0) {\n            var newFirstChunk = hullRecords.slice(indexOfLowestHullIndexRecord);\n            var newSecondChunk = hullRecords.slice(0, indexOfLowestHullIndexRecord);\n            hullPointRecordsReordered = newFirstChunk.concat(newSecondChunk);\n        }\n        else {\n            hullPointRecordsReordered = hullRecords;\n        }\n        var hullPoints = [];\n        for (var i = 0, n = hullPointRecordsReordered.length; i < n; i += 1) {\n            hullPoints.push(hullPointRecordsReordered[i][0]);\n        }\n        return new Polyline(hullPoints);\n    };\n    Polyline.prototype.equals = function (p) {\n        var _this = this;\n        if (p == null) {\n            return false;\n        }\n        if (p.points.length !== this.points.length) {\n            return false;\n        }\n        return p.points.every(function (a, i) { return a.equals(_this.points[i]); });\n    };\n    Polyline.prototype.clone = function () {\n        return new Polyline(this.points.map(function (p) { return p.clone(); }));\n    };\n    Polyline.prototype.toJSON = function () {\n        return this.points.map(function (p) { return p.toJSON(); });\n    };\n    Polyline.prototype.serialize = function () {\n        return this.points.map(function (p) { return p.x + \", \" + p.y; }).join(' ');\n    };\n    return Polyline;\n}(geometry_1.Geometry));\nexports.Polyline = Polyline;\n(function (Polyline) {\n    Polyline.toStringTag = \"X6.Geometry.\" + Polyline.name;\n    function isPolyline(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Polyline) {\n            return true;\n        }\n        var tag = instance[Symbol.toStringTag];\n        var polyline = instance;\n        if ((tag == null || tag === Polyline.toStringTag) &&\n            typeof polyline.toHull === 'function' &&\n            typeof polyline.simplify === 'function') {\n            return true;\n        }\n        return false;\n    }\n    Polyline.isPolyline = isPolyline;\n})(Polyline = exports.Polyline || (exports.Polyline = {}));\nexports.Polyline = Polyline;\n(function (Polyline) {\n    function parse(svgString) {\n        var str = svgString.trim();\n        if (str === '') {\n            return new Polyline();\n        }\n        var points = [];\n        var coords = str.split(/\\s*,\\s*|\\s+/);\n        for (var i = 0, ii = coords.length; i < ii; i += 2) {\n            points.push({ x: +coords[i], y: +coords[i + 1] });\n        }\n        return new Polyline(points);\n    }\n    Polyline.parse = parse;\n})(Polyline = exports.Polyline || (exports.Polyline = {}));\nexports.Polyline = Polyline;\n//# sourceMappingURL=polyline.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Rectangle = void 0;\nvar util = __importStar(require(\"./util\"));\nvar angle_1 = require(\"./angle\");\nvar line_1 = require(\"./line\");\nvar point_1 = require(\"./point\");\nvar geometry_1 = require(\"./geometry\");\nvar Rectangle = /** @class */ (function (_super) {\n    __extends(Rectangle, _super);\n    function Rectangle(x, y, width, height) {\n        var _this = _super.call(this) || this;\n        _this.x = x == null ? 0 : x;\n        _this.y = y == null ? 0 : y;\n        _this.width = width == null ? 0 : width;\n        _this.height = height == null ? 0 : height;\n        return _this;\n    }\n    Object.defineProperty(Rectangle.prototype, Symbol.toStringTag, {\n        get: function () {\n            return Rectangle.toStringTag;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Rectangle.prototype, \"left\", {\n        get: function () {\n            return this.x;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Rectangle.prototype, \"top\", {\n        get: function () {\n            return this.y;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Rectangle.prototype, \"right\", {\n        get: function () {\n            return this.x + this.width;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Rectangle.prototype, \"botom\", {\n        get: function () {\n            return this.y + this.height;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Rectangle.prototype, \"origin\", {\n        get: function () {\n            return new point_1.Point(this.x, this.y);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Rectangle.prototype, \"topLeft\", {\n        get: function () {\n            return new point_1.Point(this.x, this.y);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Rectangle.prototype, \"topCenter\", {\n        get: function () {\n            return new point_1.Point(this.x + this.width / 2, this.y);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Rectangle.prototype, \"topRight\", {\n        get: function () {\n            return new point_1.Point(this.x + this.width, this.y);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Rectangle.prototype, \"center\", {\n        get: function () {\n            return new point_1.Point(this.x + this.width / 2, this.y + this.height / 2);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Rectangle.prototype, \"bottomLeft\", {\n        get: function () {\n            return new point_1.Point(this.x, this.y + this.height);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Rectangle.prototype, \"bottomCenter\", {\n        get: function () {\n            return new point_1.Point(this.x + this.width / 2, this.y + this.height);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Rectangle.prototype, \"bottomRight\", {\n        get: function () {\n            return new point_1.Point(this.x + this.width, this.y + this.height);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Rectangle.prototype, \"corner\", {\n        get: function () {\n            return new point_1.Point(this.x + this.width, this.y + this.height);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Rectangle.prototype, \"rightMiddle\", {\n        get: function () {\n            return new point_1.Point(this.x + this.width, this.y + this.height / 2);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Rectangle.prototype, \"leftMiddle\", {\n        get: function () {\n            return new point_1.Point(this.x, this.y + this.height / 2);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Rectangle.prototype, \"topLine\", {\n        get: function () {\n            return new line_1.Line(this.topLeft, this.topRight);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Rectangle.prototype, \"rightLine\", {\n        get: function () {\n            return new line_1.Line(this.topRight, this.bottomRight);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Rectangle.prototype, \"bottomLine\", {\n        get: function () {\n            return new line_1.Line(this.bottomLeft, this.bottomRight);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Rectangle.prototype, \"leftLine\", {\n        get: function () {\n            return new line_1.Line(this.topLeft, this.bottomLeft);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Rectangle.prototype.getOrigin = function () {\n        return this.origin;\n    };\n    Rectangle.prototype.getTopLeft = function () {\n        return this.topLeft;\n    };\n    Rectangle.prototype.getTopCenter = function () {\n        return this.topCenter;\n    };\n    Rectangle.prototype.getTopRight = function () {\n        return this.topRight;\n    };\n    Rectangle.prototype.getCenter = function () {\n        return this.center;\n    };\n    Rectangle.prototype.getCenterX = function () {\n        return this.x + this.width / 2;\n    };\n    Rectangle.prototype.getCenterY = function () {\n        return this.y + this.height / 2;\n    };\n    Rectangle.prototype.getBottomLeft = function () {\n        return this.bottomLeft;\n    };\n    Rectangle.prototype.getBottomCenter = function () {\n        return this.bottomCenter;\n    };\n    Rectangle.prototype.getBottomRight = function () {\n        return this.bottomRight;\n    };\n    Rectangle.prototype.getCorner = function () {\n        return this.corner;\n    };\n    Rectangle.prototype.getRightMiddle = function () {\n        return this.rightMiddle;\n    };\n    Rectangle.prototype.getLeftMiddle = function () {\n        return this.leftMiddle;\n    };\n    Rectangle.prototype.getTopLine = function () {\n        return this.topLine;\n    };\n    Rectangle.prototype.getRightLine = function () {\n        return this.rightLine;\n    };\n    Rectangle.prototype.getBottomLine = function () {\n        return this.bottomLine;\n    };\n    Rectangle.prototype.getLeftLine = function () {\n        return this.leftLine;\n    };\n    /**\n     * Returns a rectangle that is the bounding box of the rectangle.\n     *\n     * If `angle` is specified, the bounding box calculation will take into\n     * account the rotation of the rectangle by angle degrees around its center.\n     */\n    Rectangle.prototype.bbox = function (angle) {\n        if (!angle) {\n            return this.clone();\n        }\n        var rad = angle_1.Angle.toRad(angle);\n        var st = Math.abs(Math.sin(rad));\n        var ct = Math.abs(Math.cos(rad));\n        var w = this.width * ct + this.height * st;\n        var h = this.width * st + this.height * ct;\n        return new Rectangle(this.x + (this.width - w) / 2, this.y + (this.height - h) / 2, w, h);\n    };\n    Rectangle.prototype.round = function (precision) {\n        if (precision === void 0) { precision = 0; }\n        this.x = util.round(this.x, precision);\n        this.y = util.round(this.y, precision);\n        this.width = util.round(this.width, precision);\n        this.height = util.round(this.height, precision);\n        return this;\n    };\n    Rectangle.prototype.add = function (x, y, width, height) {\n        var rect = Rectangle.create(x, y, width, height);\n        var minX = Math.min(this.x, rect.x);\n        var minY = Math.min(this.y, rect.y);\n        var maxX = Math.max(this.x + this.width, rect.x + rect.width);\n        var maxY = Math.max(this.y + this.height, rect.y + rect.height);\n        this.x = minX;\n        this.y = minY;\n        this.width = maxX - minX;\n        this.height = maxY - minY;\n        return this;\n    };\n    Rectangle.prototype.update = function (x, y, width, height) {\n        var rect = Rectangle.create(x, y, width, height);\n        this.x = rect.x;\n        this.y = rect.y;\n        this.width = rect.width;\n        this.height = rect.height;\n        return this;\n    };\n    Rectangle.prototype.inflate = function (dx, dy) {\n        var w = dx;\n        var h = dy != null ? dy : dx;\n        this.x -= w;\n        this.y -= h;\n        this.width += 2 * w;\n        this.height += 2 * h;\n        return this;\n    };\n    Rectangle.prototype.snapToGrid = function (gx, gy) {\n        var origin = this.origin.snapToGrid(gx, gy);\n        var corner = this.corner.snapToGrid(gx, gy);\n        this.x = origin.x;\n        this.y = origin.y;\n        this.width = corner.x - origin.x;\n        this.height = corner.y - origin.y;\n        return this;\n    };\n    Rectangle.prototype.translate = function (tx, ty) {\n        var p = point_1.Point.create(tx, ty);\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    };\n    Rectangle.prototype.scale = function (sx, sy, origin) {\n        if (origin === void 0) { origin = new point_1.Point(); }\n        var pos = this.origin.scale(sx, sy, origin);\n        this.x = pos.x;\n        this.y = pos.y;\n        this.width *= sx;\n        this.height *= sy;\n        return this;\n    };\n    Rectangle.prototype.rotate = function (degree, center) {\n        if (center === void 0) { center = this.getCenter(); }\n        if (degree !== 0) {\n            var rad = angle_1.Angle.toRad(degree);\n            var cos = Math.cos(rad);\n            var sin = Math.sin(rad);\n            var p1 = this.getOrigin();\n            var p2 = this.getTopRight();\n            var p3 = this.getBottomRight();\n            var p4 = this.getBottomLeft();\n            p1 = point_1.Point.rotateEx(p1, cos, sin, center);\n            p2 = point_1.Point.rotateEx(p2, cos, sin, center);\n            p3 = point_1.Point.rotateEx(p3, cos, sin, center);\n            p4 = point_1.Point.rotateEx(p4, cos, sin, center);\n            var rect = new Rectangle(p1.x, p1.y, 0, 0);\n            rect.add(p2.x, p2.y, 0, 0);\n            rect.add(p3.x, p3.y, 0, 0);\n            rect.add(p4.x, p4.y, 0, 0);\n            this.update(rect);\n        }\n        return this;\n    };\n    Rectangle.prototype.rotate90 = function () {\n        var t = (this.width - this.height) / 2;\n        this.x += t;\n        this.y -= t;\n        var tmp = this.width;\n        this.width = this.height;\n        this.height = tmp;\n        return this;\n    };\n    /**\n     * Translates the rectangle by `rect.x` and `rect.y` and expand it by\n     * `rect.width` and `rect.height`.\n     */\n    Rectangle.prototype.moveAndExpand = function (rect) {\n        var ref = Rectangle.clone(rect);\n        this.x += ref.x || 0;\n        this.y += ref.y || 0;\n        this.width += ref.width || 0;\n        this.height += ref.height || 0;\n        return this;\n    };\n    /**\n     * Returns an object where `sx` and `sy` give the maximum scaling that can be\n     * applied to the rectangle so that it would still fit into `limit`. If\n     * `origin` is specified, the rectangle is scaled around it; otherwise, it is\n     * scaled around its center.\n     */\n    Rectangle.prototype.getMaxScaleToFit = function (limit, origin) {\n        if (origin === void 0) { origin = this.center; }\n        var rect = Rectangle.clone(limit);\n        var ox = origin.x;\n        var oy = origin.y;\n        // Find the maximal possible scale for all corners, so when the scale\n        // is applied the point is still inside the rectangle.\n        var sx1 = Infinity;\n        var sx2 = Infinity;\n        var sx3 = Infinity;\n        var sx4 = Infinity;\n        var sy1 = Infinity;\n        var sy2 = Infinity;\n        var sy3 = Infinity;\n        var sy4 = Infinity;\n        // Top Left\n        var p1 = rect.topLeft;\n        if (p1.x < ox) {\n            sx1 = (this.x - ox) / (p1.x - ox);\n        }\n        if (p1.y < oy) {\n            sy1 = (this.y - oy) / (p1.y - oy);\n        }\n        // Bottom Right\n        var p2 = rect.bottomRight;\n        if (p2.x > ox) {\n            sx2 = (this.x + this.width - ox) / (p2.x - ox);\n        }\n        if (p2.y > oy) {\n            sy2 = (this.y + this.height - oy) / (p2.y - oy);\n        }\n        // Top Right\n        var p3 = rect.topRight;\n        if (p3.x > ox) {\n            sx3 = (this.x + this.width - ox) / (p3.x - ox);\n        }\n        if (p3.y < oy) {\n            sy3 = (this.y - oy) / (p3.y - oy);\n        }\n        // Bottom Left\n        var p4 = rect.bottomLeft;\n        if (p4.x < ox) {\n            sx4 = (this.x - ox) / (p4.x - ox);\n        }\n        if (p4.y > oy) {\n            sy4 = (this.y + this.height - oy) / (p4.y - oy);\n        }\n        return {\n            sx: Math.min(sx1, sx2, sx3, sx4),\n            sy: Math.min(sy1, sy2, sy3, sy4),\n        };\n    };\n    /**\n     * Returns a number that specifies the maximum scaling that can be applied to\n     * the rectangle along both axes so that it would still fit into `limit`. If\n     * `origin` is specified, the rectangle is scaled around it; otherwise, it is\n     * scaled around its center.\n     */\n    Rectangle.prototype.getMaxUniformScaleToFit = function (limit, origin) {\n        if (origin === void 0) { origin = this.center; }\n        var scale = this.getMaxScaleToFit(limit, origin);\n        return Math.min(scale.sx, scale.sy);\n    };\n    Rectangle.prototype.containsPoint = function (x, y) {\n        return util.containsPoint(this, point_1.Point.create(x, y));\n    };\n    Rectangle.prototype.containsRect = function (x, y, width, height) {\n        var b = Rectangle.create(x, y, width, height);\n        var x1 = this.x;\n        var y1 = this.y;\n        var w1 = this.width;\n        var h1 = this.height;\n        var x2 = b.x;\n        var y2 = b.y;\n        var w2 = b.width;\n        var h2 = b.height;\n        // one of the dimensions is 0\n        if (w1 === 0 || h1 === 0 || w2 === 0 || h2 === 0) {\n            return false;\n        }\n        return x2 >= x1 && y2 >= y1 && x2 + w2 <= x1 + w1 && y2 + h2 <= y1 + h1;\n    };\n    /**\n     * Returns an array of the intersection points of the rectangle and the line.\n     * Return `null` if no intersection exists.\n     */\n    Rectangle.prototype.intersectsWithLine = function (line) {\n        var rectLines = [\n            this.topLine,\n            this.rightLine,\n            this.bottomLine,\n            this.leftLine,\n        ];\n        var points = [];\n        var dedupeArr = [];\n        rectLines.forEach(function (l) {\n            var p = line.intersectsWithLine(l);\n            if (p !== null && dedupeArr.indexOf(p.toString()) < 0) {\n                points.push(p);\n                dedupeArr.push(p.toString());\n            }\n        });\n        return points.length > 0 ? points : null;\n    };\n    /**\n     * Returns the point on the boundary of the rectangle that is the intersection\n     * of the rectangle with a line starting in the center the rectangle ending in\n     * the point `p`.\n     *\n     * If `angle` is specified, the intersection will take into account the\n     * rotation of the rectangle by `angle` degrees around its center.\n     */\n    Rectangle.prototype.intersectsWithLineFromCenterToPoint = function (p, angle) {\n        var ref = point_1.Point.clone(p);\n        var center = this.center;\n        var result = null;\n        if (angle != null && angle !== 0) {\n            ref.rotate(angle, center);\n        }\n        var sides = [this.topLine, this.rightLine, this.bottomLine, this.leftLine];\n        var connector = new line_1.Line(center, ref);\n        for (var i = sides.length - 1; i >= 0; i -= 1) {\n            var intersection = sides[i].intersectsWithLine(connector);\n            if (intersection !== null) {\n                result = intersection;\n                break;\n            }\n        }\n        if (result && angle != null && angle !== 0) {\n            result.rotate(-angle, center);\n        }\n        return result;\n    };\n    Rectangle.prototype.intersectsWithRect = function (x, y, width, height) {\n        var ref = Rectangle.create(x, y, width, height);\n        // no intersection\n        if (!this.isIntersectWithRect(ref)) {\n            return null;\n        }\n        var myOrigin = this.origin;\n        var myCorner = this.corner;\n        var rOrigin = ref.origin;\n        var rCorner = ref.corner;\n        var xx = Math.max(myOrigin.x, rOrigin.x);\n        var yy = Math.max(myOrigin.y, rOrigin.y);\n        return new Rectangle(xx, yy, Math.min(myCorner.x, rCorner.x) - xx, Math.min(myCorner.y, rCorner.y) - yy);\n    };\n    Rectangle.prototype.isIntersectWithRect = function (x, y, width, height) {\n        var ref = Rectangle.create(x, y, width, height);\n        var myOrigin = this.origin;\n        var myCorner = this.corner;\n        var rOrigin = ref.origin;\n        var rCorner = ref.corner;\n        if (rCorner.x <= myOrigin.x ||\n            rCorner.y <= myOrigin.y ||\n            rOrigin.x >= myCorner.x ||\n            rOrigin.y >= myCorner.y) {\n            return false;\n        }\n        return true;\n    };\n    /**\n     * Normalize the rectangle, i.e. make it so that it has non-negative\n     * width and height. If width is less than `0`, the function swaps left and\n     * right corners and if height is less than `0`, the top and bottom corners\n     * are swapped.\n     */\n    Rectangle.prototype.normalize = function () {\n        var newx = this.x;\n        var newy = this.y;\n        var newwidth = this.width;\n        var newheight = this.height;\n        if (this.width < 0) {\n            newx = this.x + this.width;\n            newwidth = -this.width;\n        }\n        if (this.height < 0) {\n            newy = this.y + this.height;\n            newheight = -this.height;\n        }\n        this.x = newx;\n        this.y = newy;\n        this.width = newwidth;\n        this.height = newheight;\n        return this;\n    };\n    /**\n     * Returns a rectangle that is a union of this rectangle and rectangle `rect`.\n     */\n    Rectangle.prototype.union = function (rect) {\n        var ref = Rectangle.clone(rect);\n        var myOrigin = this.origin;\n        var myCorner = this.corner;\n        var rOrigin = ref.origin;\n        var rCorner = ref.corner;\n        var originX = Math.min(myOrigin.x, rOrigin.x);\n        var originY = Math.min(myOrigin.y, rOrigin.y);\n        var cornerX = Math.max(myCorner.x, rCorner.x);\n        var cornerY = Math.max(myCorner.y, rCorner.y);\n        return new Rectangle(originX, originY, cornerX - originX, cornerY - originY);\n    };\n    /**\n     * Returns a string (\"top\", \"left\", \"right\" or \"bottom\") denoting the side of\n     * the rectangle which is nearest to the point `p`.\n     */\n    Rectangle.prototype.getNearestSideToPoint = function (p) {\n        var ref = point_1.Point.clone(p);\n        var distLeft = ref.x - this.x;\n        var distRight = this.x + this.width - ref.x;\n        var distTop = ref.y - this.y;\n        var distBottom = this.y + this.height - ref.y;\n        var closest = distLeft;\n        var side = 'left';\n        if (distRight < closest) {\n            closest = distRight;\n            side = 'right';\n        }\n        if (distTop < closest) {\n            closest = distTop;\n            side = 'top';\n        }\n        if (distBottom < closest) {\n            side = 'bottom';\n        }\n        return side;\n    };\n    /**\n     * Returns a point on the boundary of the rectangle nearest to the point `p`.\n     */\n    Rectangle.prototype.getNearestPointToPoint = function (p) {\n        var ref = point_1.Point.clone(p);\n        if (this.containsPoint(ref)) {\n            var side = this.getNearestSideToPoint(ref);\n            switch (side) {\n                case 'right':\n                    return new point_1.Point(this.x + this.width, ref.y);\n                case 'left':\n                    return new point_1.Point(this.x, ref.y);\n                case 'bottom':\n                    return new point_1.Point(ref.x, this.y + this.height);\n                case 'top':\n                    return new point_1.Point(ref.x, this.y);\n            }\n        }\n        return ref.adhereToRect(this);\n    };\n    Rectangle.prototype.equals = function (rect) {\n        return (rect != null &&\n            rect.x === this.x &&\n            rect.y === this.y &&\n            rect.width === this.width &&\n            rect.height === this.height);\n    };\n    Rectangle.prototype.clone = function () {\n        return new Rectangle(this.x, this.y, this.width, this.height);\n    };\n    Rectangle.prototype.toJSON = function () {\n        return { x: this.x, y: this.y, width: this.width, height: this.height };\n    };\n    Rectangle.prototype.serialize = function () {\n        return this.x + \" \" + this.y + \" \" + this.width + \" \" + this.height;\n    };\n    return Rectangle;\n}(geometry_1.Geometry));\nexports.Rectangle = Rectangle;\n(function (Rectangle) {\n    Rectangle.toStringTag = \"X6.Geometry.\" + Rectangle.name;\n    function isRectangle(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Rectangle) {\n            return true;\n        }\n        var tag = instance[Symbol.toStringTag];\n        var rect = instance;\n        if ((tag == null || tag === Rectangle.toStringTag) &&\n            typeof rect.x === 'number' &&\n            typeof rect.y === 'number' &&\n            typeof rect.width === 'number' &&\n            typeof rect.height === 'number' &&\n            typeof rect.inflate === 'function' &&\n            typeof rect.moveAndExpand === 'function') {\n            return true;\n        }\n        return false;\n    }\n    Rectangle.isRectangle = isRectangle;\n})(Rectangle = exports.Rectangle || (exports.Rectangle = {}));\nexports.Rectangle = Rectangle;\n(function (Rectangle) {\n    function isRectangleLike(o) {\n        return (o != null &&\n            typeof o === 'object' &&\n            typeof o.x === 'number' &&\n            typeof o.y === 'number' &&\n            typeof o.width === 'number' &&\n            typeof o.height === 'number');\n    }\n    Rectangle.isRectangleLike = isRectangleLike;\n})(Rectangle = exports.Rectangle || (exports.Rectangle = {}));\nexports.Rectangle = Rectangle;\n(function (Rectangle) {\n    function create(x, y, width, height) {\n        if (x == null || typeof x === 'number') {\n            return new Rectangle(x, y, width, height);\n        }\n        return clone(x);\n    }\n    Rectangle.create = create;\n    function clone(rect) {\n        if (Rectangle.isRectangle(rect)) {\n            return rect.clone();\n        }\n        if (Array.isArray(rect)) {\n            return new Rectangle(rect[0], rect[1], rect[2], rect[3]);\n        }\n        return new Rectangle(rect.x, rect.y, rect.width, rect.height);\n    }\n    Rectangle.clone = clone;\n    function fromSize(size) {\n        return new Rectangle(0, 0, size.width, size.height);\n    }\n    Rectangle.fromSize = fromSize;\n    function fromPositionAndSize(pos, size) {\n        return new Rectangle(pos.x, pos.y, size.width, size.height);\n    }\n    Rectangle.fromPositionAndSize = fromPositionAndSize;\n    /**\n     * Returns a new rectangle from the given ellipse.\n     */\n    function fromEllipse(ellipse) {\n        return new Rectangle(ellipse.x - ellipse.a, ellipse.y - ellipse.b, 2 * ellipse.a, 2 * ellipse.b);\n    }\n    Rectangle.fromEllipse = fromEllipse;\n})(Rectangle = exports.Rectangle || (exports.Rectangle = {}));\nexports.Rectangle = Rectangle;\n//# sourceMappingURL=rectangle.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.squaredLength = exports.containsPoint = exports.snapToGrid = exports.clamp = exports.random = exports.round = void 0;\nfunction round(num, precision) {\n    if (precision === void 0) { precision = 0; }\n    return Number.isInteger(num) ? num : +num.toFixed(precision);\n}\nexports.round = round;\nfunction random(min, max) {\n    var mmin;\n    var mmax;\n    if (max == null) {\n        mmax = min == null ? 1 : min;\n        mmin = 0;\n    }\n    else {\n        mmax = max;\n        mmin = min == null ? 0 : min;\n    }\n    if (mmax < mmin) {\n        var temp = mmin;\n        mmin = mmax;\n        mmax = temp;\n    }\n    return Math.floor(Math.random() * (mmax - mmin + 1) + mmin);\n}\nexports.random = random;\nfunction clamp(value, min, max) {\n    if (isNaN(value)) {\n        return NaN;\n    }\n    if (isNaN(min) || isNaN(max)) {\n        return 0;\n    }\n    return min < max\n        ? value < min\n            ? min\n            : value > max\n                ? max\n                : value\n        : value < max\n            ? max\n            : value > min\n                ? min\n                : value;\n}\nexports.clamp = clamp;\nfunction snapToGrid(value, gridSize) {\n    return gridSize * Math.round(value / gridSize);\n}\nexports.snapToGrid = snapToGrid;\nfunction containsPoint(rect, point) {\n    return (point != null &&\n        rect != null &&\n        point.x >= rect.x &&\n        point.x <= rect.x + rect.width &&\n        point.y >= rect.y &&\n        point.y <= rect.y + rect.height);\n}\nexports.containsPoint = containsPoint;\nfunction squaredLength(p1, p2) {\n    var dx = p1.x - p2.x;\n    var dy = p1.y - p2.y;\n    return dx * dx + dy * dy;\n}\nexports.squaredLength = squaredLength;\n//# sourceMappingURL=util.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cancelAnimationFrame = exports.requestAnimationFrame = void 0;\nexports.requestAnimationFrame = (function () {\n    var raf;\n    var win = window;\n    if (win != null) {\n        raf =\n            win.requestAnimationFrame ||\n                win.webkitRequestAnimationFrame ||\n                win.mozRequestAnimationFrame ||\n                win.oRequestAnimationFrame ||\n                win.msRequestAnimationFrame;\n        if (raf != null) {\n            raf = raf.bind(win);\n        }\n    }\n    if (raf == null) {\n        var lastTime_1 = 0;\n        raf = function (callback) {\n            var currTime = new Date().getTime();\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime_1));\n            var id = setTimeout(function () {\n                callback(currTime + timeToCall);\n            }, timeToCall);\n            lastTime_1 = currTime + timeToCall;\n            return id;\n        };\n    }\n    return raf;\n})();\nexports.cancelAnimationFrame = (function () {\n    var caf;\n    var win = window;\n    if (win != null) {\n        caf =\n            win.cancelAnimationFrame ||\n                win.webkitCancelAnimationFrame ||\n                win.webkitCancelRequestAnimationFrame ||\n                win.msCancelAnimationFrame ||\n                win.msCancelRequestAnimationFrame ||\n                win.oCancelAnimationFrame ||\n                win.oCancelRequestAnimationFrame ||\n                win.mozCancelAnimationFrame ||\n                win.mozCancelRequestAnimationFrame;\n        if (caf) {\n            caf = caf.bind(win);\n        }\n    }\n    if (caf == null) {\n        caf = clearTimeout;\n    }\n    return caf;\n})();\n//# sourceMappingURL=af.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mergeAttrs = exports.styleToObject = exports.kebablizeAttrs = exports.qualifyAttr = exports.attr = exports.setAttributes = exports.setAttribute = exports.removeAttribute = exports.getAttribute = void 0;\nvar elem_1 = require(\"./elem\");\nfunction getAttribute(elem, name) {\n    return elem.getAttribute(name);\n}\nexports.getAttribute = getAttribute;\nfunction removeAttribute(elem, name) {\n    var qualified = qualifyAttr(name);\n    if (qualified.ns) {\n        if (elem.hasAttributeNS(qualified.ns, qualified.local)) {\n            elem.removeAttributeNS(qualified.ns, qualified.local);\n        }\n    }\n    else if (elem.hasAttribute(name)) {\n        elem.removeAttribute(name);\n    }\n}\nexports.removeAttribute = removeAttribute;\nfunction setAttribute(elem, name, value) {\n    if (value == null) {\n        return removeAttribute(elem, name);\n    }\n    var qualified = qualifyAttr(name);\n    if (qualified.ns && typeof value === 'string') {\n        elem.setAttributeNS(qualified.ns, name, value);\n    }\n    else if (name === 'id') {\n        elem.id = \"\" + value;\n    }\n    else {\n        elem.setAttribute(name, \"\" + value);\n    }\n}\nexports.setAttribute = setAttribute;\nfunction setAttributes(elem, attrs) {\n    Object.keys(attrs).forEach(function (name) {\n        setAttribute(elem, name, attrs[name]);\n    });\n}\nexports.setAttributes = setAttributes;\nfunction attr(elem, name, value) {\n    if (name == null) {\n        var attrs = elem.attributes;\n        var ret = {};\n        for (var i = 0; i < attrs.length; i += 1) {\n            ret[attrs[i].name] = attrs[i].value;\n        }\n        return ret;\n    }\n    if (typeof name === 'string' && value === undefined) {\n        return elem.getAttribute(name);\n    }\n    if (typeof name === 'object') {\n        setAttributes(elem, name);\n    }\n    else {\n        setAttribute(elem, name, value);\n    }\n}\nexports.attr = attr;\nfunction qualifyAttr(name) {\n    if (name.indexOf(':') !== -1) {\n        var combinedKey = name.split(':');\n        return {\n            ns: elem_1.ns[combinedKey[0]],\n            local: combinedKey[1],\n        };\n    }\n    return {\n        ns: null,\n        local: name,\n    };\n}\nexports.qualifyAttr = qualifyAttr;\nfunction kebablizeAttrs(attrs) {\n    var result = {};\n    Object.keys(attrs).forEach(function (key) {\n        var name = key.replace(/[A-Z]/g, '-$&').toLowerCase();\n        result[name] = attrs[key];\n    });\n    return result;\n}\nexports.kebablizeAttrs = kebablizeAttrs;\nfunction styleToObject(styleString) {\n    var ret = {};\n    var styles = styleString.split(';');\n    styles.forEach(function (item) {\n        var section = item.trim();\n        if (section) {\n            var pair = section.split('=');\n            if (pair.length) {\n                ret[pair[0].trim()] = pair[1] ? pair[1].trim() : '';\n            }\n        }\n    });\n    return ret;\n}\nexports.styleToObject = styleToObject;\nfunction mergeAttrs(target, source) {\n    Object.keys(source).forEach(function (attr) {\n        if (attr === 'class') {\n            target[attr] = target[attr]\n                ? target[attr] + \" \" + source[attr]\n                : source[attr];\n        }\n        else if (attr === 'style') {\n            var to = typeof target[attr] === 'object';\n            var so = typeof source[attr] === 'object';\n            var tt = void 0;\n            var ss = void 0;\n            if (to && so) {\n                tt = target[attr];\n                ss = source[attr];\n            }\n            else if (to) {\n                tt = target[attr];\n                ss = styleToObject(source[attr]);\n            }\n            else if (so) {\n                tt = styleToObject(target[attr]);\n                ss = source[attr];\n            }\n            else {\n                tt = styleToObject(target[attr]);\n                ss = styleToObject(source[attr]);\n            }\n            target[attr] = mergeAttrs(tt, ss);\n        }\n        else {\n            target[attr] = source[attr];\n        }\n    });\n    return target;\n}\nexports.mergeAttrs = mergeAttrs;\n//# sourceMappingURL=attr.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.toggleClass = exports.removeClass = exports.addClass = exports.hasClass = exports.getClass = void 0;\nvar rclass = /[\\t\\r\\n\\f]/g;\nvar rnotwhite = /\\S+/g;\nvar fillSpaces = function (str) { return \" \" + str + \" \"; };\nfunction getClass(elem) {\n    return (elem && elem.getAttribute && elem.getAttribute('class')) || '';\n}\nexports.getClass = getClass;\nfunction hasClass(elem, selector) {\n    if (elem == null || selector == null) {\n        return false;\n    }\n    var classNames = fillSpaces(getClass(elem));\n    var className = fillSpaces(selector);\n    return elem.nodeType === 1\n        ? classNames.replace(rclass, ' ').includes(className)\n        : false;\n}\nexports.hasClass = hasClass;\nfunction addClass(elem, selector) {\n    if (elem == null || selector == null) {\n        return;\n    }\n    if (typeof selector === 'function') {\n        return addClass(elem, selector(getClass(elem)));\n    }\n    if (typeof selector === 'string' && elem.nodeType === 1) {\n        var classes = selector.match(rnotwhite) || [];\n        var oldValue = fillSpaces(getClass(elem)).replace(rclass, ' ');\n        var newValue = classes.reduce(function (memo, cls) {\n            if (memo.indexOf(fillSpaces(cls)) < 0) {\n                return \"\" + memo + cls + \" \";\n            }\n            return memo;\n        }, oldValue);\n        newValue = newValue.trim();\n        if (oldValue !== newValue) {\n            elem.setAttribute('class', newValue);\n        }\n    }\n}\nexports.addClass = addClass;\nfunction removeClass(elem, selector) {\n    if (elem == null) {\n        return;\n    }\n    if (typeof selector === 'function') {\n        return removeClass(elem, selector(getClass(elem)));\n    }\n    if ((!selector || typeof selector === 'string') && elem.nodeType === 1) {\n        var classes = (selector || '').match(rnotwhite) || [];\n        var oldValue = fillSpaces(getClass(elem)).replace(rclass, ' ');\n        var newValue = classes.reduce(function (memo, cls) {\n            var className = fillSpaces(cls);\n            if (memo.indexOf(className) > -1) {\n                return memo.replace(className, ' ');\n            }\n            return memo;\n        }, oldValue);\n        newValue = selector ? newValue.trim() : '';\n        if (oldValue !== newValue) {\n            elem.setAttribute('class', newValue);\n        }\n    }\n}\nexports.removeClass = removeClass;\nfunction toggleClass(elem, selector, stateVal) {\n    if (elem == null || selector == null) {\n        return;\n    }\n    if (stateVal != null && typeof selector === 'string') {\n        stateVal ? addClass(elem, selector) : removeClass(elem, selector);\n        return;\n    }\n    if (typeof selector === 'function') {\n        return toggleClass(elem, selector(getClass(elem), stateVal), stateVal);\n    }\n    if (typeof selector === 'string') {\n        var metches = selector.match(rnotwhite) || [];\n        metches.forEach(function (cls) {\n            hasClass(elem, cls) ? removeClass(elem, cls) : addClass(elem, cls);\n        });\n    }\n}\nexports.toggleClass = toggleClass;\n//# sourceMappingURL=class.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./af\"), exports);\n__exportStar(require(\"./attr\"), exports);\n__exportStar(require(\"./elem\"), exports);\n__exportStar(require(\"./class\"), exports);\n__exportStar(require(\"./style\"), exports);\n__exportStar(require(\"./prefix\"), exports);\n__exportStar(require(\"./selection\"), exports);\n// svg\n// ---\n__exportStar(require(\"./text\"), exports);\n__exportStar(require(\"./path\"), exports);\n__exportStar(require(\"./geom\"), exports);\n__exportStar(require(\"./matrix\"), exports);\n__exportStar(require(\"./transform\"), exports);\n//# sourceMappingURL=core.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isHTMLElement = exports.appendTo = exports.before = exports.prepend = exports.append = exports.empty = exports.remove = exports.contains = exports.findParentByClass = exports.findOne = exports.find = exports.index = exports.tagName = exports.parseXML = exports.createSvgDocument = exports.createSvgElement = exports.createElementNS = exports.createElement = exports.svgVersion = exports.ns = exports.isSVGGraphicsElement = exports.ensureId = exports.uniqueId = void 0;\nvar class_1 = require(\"./class\");\nvar idCounter = 0;\nfunction uniqueId() {\n    idCounter += 1;\n    return \"v\" + idCounter;\n}\nexports.uniqueId = uniqueId;\nfunction ensureId(elem) {\n    if (elem.id == null || elem.id === '') {\n        elem.id = uniqueId();\n    }\n    return elem.id;\n}\nexports.ensureId = ensureId;\n/**\n * Returns true if object is an instance of SVGGraphicsElement.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGGraphicsElement\n */\nfunction isSVGGraphicsElement(elem) {\n    if (elem == null) {\n        return false;\n    }\n    return typeof elem.getScreenCTM === 'function' && elem instanceof SVGElement;\n}\nexports.isSVGGraphicsElement = isSVGGraphicsElement;\nexports.ns = {\n    svg: 'http://www.w3.org/2000/svg',\n    xmlns: 'http://www.w3.org/2000/xmlns/',\n    xml: 'http://www.w3.org/XML/1998/namespace',\n    xlink: 'http://www.w3.org/1999/xlink',\n    xhtml: 'http://www.w3.org/1999/xhtml',\n};\nexports.svgVersion = '1.1';\nfunction createElement(tagName, doc) {\n    if (doc === void 0) { doc = document; }\n    return doc.createElement(tagName);\n}\nexports.createElement = createElement;\nfunction createElementNS(tagName, namespaceURI, doc) {\n    if (namespaceURI === void 0) { namespaceURI = exports.ns.xhtml; }\n    if (doc === void 0) { doc = document; }\n    return doc.createElementNS(namespaceURI, tagName);\n}\nexports.createElementNS = createElementNS;\nfunction createSvgElement(tagName, doc) {\n    if (doc === void 0) { doc = document; }\n    return createElementNS(tagName, exports.ns.svg, doc);\n}\nexports.createSvgElement = createSvgElement;\nfunction createSvgDocument(content) {\n    if (content) {\n        var xml = \"<svg xmlns=\\\"\" + exports.ns.svg + \"\\\" xmlns:xlink=\\\"\" + exports.ns.xlink + \"\\\" version=\\\"\" + exports.svgVersion + \"\\\">\" + content + \"</svg>\";\n        var documentElement = parseXML(xml, { async: false }).documentElement;\n        return documentElement;\n    }\n    var svg = document.createElementNS(exports.ns.svg, 'svg');\n    svg.setAttributeNS(exports.ns.xmlns, 'xmlns:xlink', exports.ns.xlink);\n    svg.setAttribute('version', exports.svgVersion);\n    return svg;\n}\nexports.createSvgDocument = createSvgDocument;\nfunction parseXML(data, options) {\n    if (options === void 0) { options = {}; }\n    var xml;\n    try {\n        var parser = new DOMParser();\n        if (options.async != null) {\n            var instance = parser;\n            instance.async = options.async;\n        }\n        xml = parser.parseFromString(data, options.mimeType || 'text/xml');\n    }\n    catch (error) {\n        xml = undefined;\n    }\n    if (!xml || xml.getElementsByTagName('parsererror').length) {\n        throw new Error(\"Invalid XML: \" + data);\n    }\n    return xml;\n}\nexports.parseXML = parseXML;\nfunction tagName(node, lowercase) {\n    if (lowercase === void 0) { lowercase = true; }\n    var nodeName = node.nodeName;\n    return lowercase ? nodeName.toLowerCase() : nodeName.toUpperCase();\n}\nexports.tagName = tagName;\nfunction index(elem) {\n    var index = 0;\n    var node = elem.previousSibling;\n    while (node) {\n        if (node.nodeType === 1) {\n            index += 1;\n        }\n        node = node.previousSibling;\n    }\n    return index;\n}\nexports.index = index;\nfunction find(elem, selector) {\n    return elem.querySelectorAll(selector);\n}\nexports.find = find;\nfunction findOne(elem, selector) {\n    return elem.querySelector(selector);\n}\nexports.findOne = findOne;\nfunction findParentByClass(elem, className, terminator) {\n    var ownerSVGElement = elem.ownerSVGElement;\n    var node = elem.parentNode;\n    while (node && node !== terminator && node !== ownerSVGElement) {\n        if (class_1.hasClass(node, className)) {\n            return node;\n        }\n        node = node.parentNode;\n    }\n    return null;\n}\nexports.findParentByClass = findParentByClass;\nfunction contains(parent, child) {\n    var bup = child && child.parentNode;\n    return (parent === bup ||\n        !!(bup && bup.nodeType === 1 && parent.compareDocumentPosition(bup) & 16));\n}\nexports.contains = contains;\nfunction remove(elem) {\n    if (elem.parentNode) {\n        elem.parentNode.removeChild(elem);\n    }\n}\nexports.remove = remove;\nfunction empty(elem) {\n    while (elem.firstChild) {\n        elem.removeChild(elem.firstChild);\n    }\n}\nexports.empty = empty;\nfunction append(elem, elems) {\n    var arr = Array.isArray(elems) ? elems : [elems];\n    arr.forEach(function (child) {\n        if (child != null) {\n            elem.appendChild(child);\n        }\n    });\n}\nexports.append = append;\nfunction prepend(elem, elems) {\n    var child = elem.firstChild;\n    return child ? before(child, elems) : append(elem, elems);\n}\nexports.prepend = prepend;\nfunction before(elem, elems) {\n    var parent = elem.parentNode;\n    if (parent) {\n        var arr = Array.isArray(elems) ? elems : [elems];\n        arr.forEach(function (child) {\n            if (child != null) {\n                parent.insertBefore(child, elem);\n            }\n        });\n    }\n}\nexports.before = before;\nfunction appendTo(elem, target) {\n    if (target != null) {\n        target.appendChild(elem);\n    }\n}\nexports.appendTo = appendTo;\n// Determines whether a node is an HTML node\nfunction isHTMLElement(elem) {\n    try {\n        // Using W3 DOM2 (works for FF, Opera and Chrome)\n        return elem instanceof HTMLElement;\n    }\n    catch (e) {\n        // Browsers not supporting W3 DOM2 don't have HTMLElement and\n        // an exception is thrown and we end up here. Testing some\n        // properties that all elements have (works on IE7)\n        return (typeof elem === 'object' &&\n            elem.nodeType === 1 &&\n            typeof elem.style === 'object' &&\n            typeof elem.ownerDocument === 'object');\n    }\n}\nexports.isHTMLElement = isHTMLElement;\n//# sourceMappingURL=elem.js.map","\"use strict\";\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getBoundingOffsetRect = exports.animateAlongPath = exports.animateTransform = exports.animate = exports.getIntersection = exports.toGeometryShape = exports.toLocalPoint = exports.getTransformToElement = exports.getBBox = exports.bbox = void 0;\nvar geometry_1 = require(\"../../geometry\");\nvar attr_1 = require(\"./attr\");\nvar path_1 = require(\"./path\");\nvar elem_1 = require(\"./elem\");\nvar style_1 = require(\"./style\");\nvar matrix_1 = require(\"./matrix\");\n/**\n * Returns the bounding box of the element after transformations are\n * applied. If `withoutTransformations` is `true`, transformations of\n * the element will not be considered when computing the bounding box.\n * If `target` is specified, bounding box will be computed relatively\n * to the `target` element.\n */\nfunction bbox(elem, withoutTransformations, target) {\n    var box;\n    var ownerSVGElement = elem.ownerSVGElement;\n    // If the element is not in the live DOM, it does not have a bounding\n    // box defined and so fall back to 'zero' dimension element.\n    if (!ownerSVGElement) {\n        return new geometry_1.Rectangle(0, 0, 0, 0);\n    }\n    try {\n        box = elem.getBBox();\n    }\n    catch (e) {\n        // Fallback for IE.\n        box = {\n            x: elem.clientLeft,\n            y: elem.clientTop,\n            width: elem.clientWidth,\n            height: elem.clientHeight,\n        };\n    }\n    if (withoutTransformations) {\n        return geometry_1.Rectangle.create(box);\n    }\n    var matrix = getTransformToElement(elem, target || ownerSVGElement);\n    return matrix_1.transformRectangle(box, matrix);\n}\nexports.bbox = bbox;\n/**\n * Returns the bounding box of the element after transformations are\n * applied. Unlike `bbox()`, this function fixes a browser implementation\n * bug to return the correct bounding box if this elemenent is a group of\n * svg elements (if `options.recursive` is specified).\n */\nfunction getBBox(elem, options) {\n    if (options === void 0) { options = {}; }\n    var outputBBox;\n    var ownerSVGElement = elem.ownerSVGElement;\n    // If the element is not in the live DOM, it does not have a bounding box\n    // defined and so fall back to 'zero' dimension element.\n    // If the element is not an SVGGraphicsElement, we could not measure the\n    // bounding box either\n    if (!ownerSVGElement || !elem_1.isSVGGraphicsElement(elem)) {\n        if (elem_1.isHTMLElement(elem)) {\n            // If the element is a HTMLElement, return the position relative to the body\n            var _a = getBoundingOffsetRect(elem), left = _a.left, top_1 = _a.top, width = _a.width, height = _a.height;\n            return new geometry_1.Rectangle(left, top_1, width, height);\n        }\n        return new geometry_1.Rectangle(0, 0, 0, 0);\n    }\n    var target = options.target;\n    var recursive = options.recursive;\n    if (!recursive) {\n        try {\n            outputBBox = elem.getBBox();\n        }\n        catch (e) {\n            outputBBox = {\n                x: elem.clientLeft,\n                y: elem.clientTop,\n                width: elem.clientWidth,\n                height: elem.clientHeight,\n            };\n        }\n        if (!target) {\n            return geometry_1.Rectangle.create(outputBBox);\n        }\n        // transform like target\n        var matrix = getTransformToElement(elem, target);\n        return matrix_1.transformRectangle(outputBBox, matrix);\n    }\n    // recursive\n    {\n        var children = elem.childNodes;\n        var n = children.length;\n        if (n === 0) {\n            return getBBox(elem, { target: target });\n        }\n        if (!target) {\n            target = elem; // tslint:disable-line\n        }\n        for (var i = 0; i < n; i += 1) {\n            var child = children[i];\n            var childBBox = void 0;\n            if (child.childNodes.length === 0) {\n                childBBox = getBBox(child, { target: target });\n            }\n            else {\n                // if child is a group element, enter it with a recursive call\n                childBBox = getBBox(child, { target: target, recursive: true });\n            }\n            if (!outputBBox) {\n                outputBBox = childBBox;\n            }\n            else {\n                outputBBox = outputBBox.union(childBBox);\n            }\n        }\n        return outputBBox;\n    }\n}\nexports.getBBox = getBBox;\n/**\n * Returns an DOMMatrix that specifies the transformation necessary\n * to convert `elem` coordinate system into `target` coordinate system.\n */\nfunction getTransformToElement(elem, target) {\n    if (elem_1.isSVGGraphicsElement(target) && elem_1.isSVGGraphicsElement(elem)) {\n        var targetCTM = target.getScreenCTM();\n        var nodeCTM = elem.getScreenCTM();\n        if (targetCTM && nodeCTM) {\n            return targetCTM.inverse().multiply(nodeCTM);\n        }\n    }\n    // Could not get actual transformation matrix\n    return matrix_1.createSVGMatrix();\n}\nexports.getTransformToElement = getTransformToElement;\n/**\n * Converts a global point with coordinates `x` and `y` into the\n * coordinate space of the element.\n */\nfunction toLocalPoint(elem, x, y) {\n    var svg = elem instanceof SVGSVGElement\n        ? elem\n        : elem.ownerSVGElement;\n    var p = svg.createSVGPoint();\n    p.x = x;\n    p.y = y;\n    try {\n        var ctm = svg.getScreenCTM();\n        var globalPoint = p.matrixTransform(ctm.inverse());\n        var globalToLocalMatrix = getTransformToElement(elem, svg).inverse();\n        return globalPoint.matrixTransform(globalToLocalMatrix);\n    }\n    catch (e) {\n        return p;\n    }\n}\nexports.toLocalPoint = toLocalPoint;\n/**\n * Convert the SVGElement to an equivalent geometric shape. The element's\n * transformations are not taken into account.\n *\n * SVGRectElement      => Rectangle\n *\n * SVGLineElement      => Line\n *\n * SVGCircleElement    => Ellipse\n *\n * SVGEllipseElement   => Ellipse\n *\n * SVGPolygonElement   => Polyline\n *\n * SVGPolylineElement  => Polyline\n *\n * SVGPathElement      => Path\n *\n * others              => Rectangle\n */\nfunction toGeometryShape(elem) {\n    var attr = function (name) {\n        var s = elem.getAttribute(name);\n        var v = s ? parseFloat(s) : 0;\n        return isNaN(v) ? 0 : v;\n    };\n    switch (elem instanceof SVGElement && elem.nodeName.toLowerCase()) {\n        case 'rect':\n            return new geometry_1.Rectangle(attr('x'), attr('y'), attr('width'), attr('height'));\n        case 'circle':\n            return new geometry_1.Ellipse(attr('cx'), attr('cy'), attr('r'), attr('r'));\n        case 'ellipse':\n            return new geometry_1.Ellipse(attr('cx'), attr('cy'), attr('rx'), attr('ry'));\n        case 'polyline': {\n            var points = path_1.getPointsFromSvgElement(elem);\n            return new geometry_1.Polyline(points);\n        }\n        case 'polygon': {\n            var points = path_1.getPointsFromSvgElement(elem);\n            if (points.length > 1) {\n                points.push(points[0]);\n            }\n            return new geometry_1.Polyline(points);\n        }\n        case 'path': {\n            var d = elem.getAttribute('d');\n            if (!geometry_1.Path.isValid(d)) {\n                d = geometry_1.Path.normalize(d);\n            }\n            return geometry_1.Path.parse(d);\n        }\n        case 'line':\n            return new geometry_1.Line(attr('x1'), attr('y1'), attr('x2'), attr('y2'));\n    }\n    // Anything else is a rectangle\n    return getBBox(elem);\n}\nexports.toGeometryShape = toGeometryShape;\nfunction getIntersection(elem, ref, target) {\n    var svg = elem instanceof SVGSVGElement ? elem : elem.ownerSVGElement;\n    target = target || svg; // tslint:disable-line\n    var bbox = getBBox(target);\n    var center = bbox.getCenter();\n    if (!bbox.intersectsWithLineFromCenterToPoint(ref)) {\n        return null;\n    }\n    var spot = null;\n    var tagName = elem.tagName.toLowerCase();\n    // Little speed up optimization for `<rect>` element. We do not do convert\n    // to path element and sampling but directly calculate the intersection\n    // through a transformed geometrical rectangle.\n    if (tagName === 'rect') {\n        var gRect = new geometry_1.Rectangle(parseFloat(elem.getAttribute('x') || '0'), parseFloat(elem.getAttribute('y') || '0'), parseFloat(elem.getAttribute('width') || '0'), parseFloat(elem.getAttribute('height') || '0'));\n        // Get the rect transformation matrix with regards to the SVG document.\n        var rectMatrix = getTransformToElement(elem, target);\n        var rectMatrixComponents = matrix_1.decomposeMatrix(rectMatrix);\n        // Rotate the rectangle back so that we can use\n        // `intersectsWithLineFromCenterToPoint()`.\n        var reseted = svg.createSVGTransform();\n        reseted.setRotate(-rectMatrixComponents.rotation, center.x, center.y);\n        var rect = matrix_1.transformRectangle(gRect, reseted.matrix.multiply(rectMatrix));\n        spot = geometry_1.Rectangle.create(rect).intersectsWithLineFromCenterToPoint(ref, rectMatrixComponents.rotation);\n    }\n    else if (tagName === 'path' ||\n        tagName === 'polygon' ||\n        tagName === 'polyline' ||\n        tagName === 'circle' ||\n        tagName === 'ellipse') {\n        var pathNode = tagName === 'path' ? elem : path_1.toPath(elem);\n        var samples = path_1.sample(pathNode);\n        var minDistance = Infinity;\n        var closestSamples = [];\n        for (var i = 0, ii = samples.length; i < ii; i += 1) {\n            var sample_1 = samples[i];\n            // Convert the sample point in the local coordinate system\n            // to the global coordinate system.\n            var gp = matrix_1.createSVGPoint(sample_1.x, sample_1.y);\n            gp = gp.matrixTransform(getTransformToElement(elem, target));\n            var ggp = geometry_1.Point.create(gp);\n            var centerDistance = ggp.distance(center);\n            // Penalize a higher distance to the reference point by 10%.\n            // This gives better results. This is due to\n            // inaccuracies introduced by rounding errors and getPointAtLength() returns.\n            var refDistance = ggp.distance(ref) * 1.1;\n            var distance = centerDistance + refDistance;\n            if (distance < minDistance) {\n                minDistance = distance;\n                closestSamples = [{ sample: sample_1, refDistance: refDistance }];\n            }\n            else if (distance < minDistance + 1) {\n                closestSamples.push({ sample: sample_1, refDistance: refDistance });\n            }\n        }\n        closestSamples.sort(function (a, b) { return a.refDistance - b.refDistance; });\n        if (closestSamples[0]) {\n            spot = geometry_1.Point.create(closestSamples[0].sample);\n        }\n    }\n    return spot;\n}\nexports.getIntersection = getIntersection;\nfunction animate(elem, options) {\n    return createAnimation(elem, options, 'animate');\n}\nexports.animate = animate;\nfunction animateTransform(elem, options) {\n    return createAnimation(elem, options, 'animateTransform');\n}\nexports.animateTransform = animateTransform;\nfunction createAnimation(elem, options, type) {\n    // @see\n    // https://www.w3.org/TR/SVG11/animate.html#AnimateElement\n    // https://developer.mozilla.org/en-US/docs/Web/API/SVGAnimateElement\n    // https://developer.mozilla.org/en-US/docs/Web/API/SVGAnimateTransformElement\n    var animate = elem_1.createSvgElement(type);\n    elem.appendChild(animate);\n    try {\n        return setupAnimation(animate, options);\n    }\n    catch (error) { }\n    return function () { };\n}\nfunction setupAnimation(animate, options) {\n    var start = options.start, complete = options.complete, repeat = options.repeat, attrs = __rest(options, [\"start\", \"complete\", \"repeat\"]);\n    attr_1.attr(animate, attrs);\n    start && animate.addEventListener('beginEvent', start);\n    complete && animate.addEventListener('endEvent', complete);\n    repeat && animate.addEventListener('repeatEvent', repeat);\n    var ani = animate;\n    ani.beginElement();\n    return function () { return ani.endElement(); };\n}\n/**\n * Animate the element along the path SVG element (or Vector object).\n * `attrs` contain Animation Timing attributes describing the animation.\n */\nfunction animateAlongPath(elem, options, path) {\n    var id = elem_1.ensureId(path);\n    // https://developer.mozilla.org/en-US/docs/Web/API/SVGAnimationElement\n    var animate = elem_1.createSvgElement('animateMotion');\n    var mpath = elem_1.createSvgElement('mpath');\n    attr_1.attr(mpath, { 'xlink:href': \"#\" + id });\n    animate.appendChild(mpath);\n    elem.appendChild(animate);\n    try {\n        return setupAnimation(animate, options);\n    }\n    catch (e) {\n        // Fallback for IE 9.\n        if (document.documentElement.getAttribute('smiling') === 'fake') {\n            // Register the animation. (See `https://answers.launchpad.net/smil/+question/203333`)\n            var ani = animate;\n            ani.animators = [];\n            var win = window;\n            var animationID = ani.getAttribute('id');\n            if (animationID) {\n                win.id2anim[animationID] = ani;\n            }\n            var targets = win.getTargets(ani);\n            for (var i = 0, ii = targets.length; i < ii; i += 1) {\n                var target = targets[i];\n                var animator = new win.Animator(ani, target, i);\n                win.animators.push(animator);\n                ani.animators[i] = animator;\n                animator.register();\n            }\n        }\n    }\n    return function () { };\n}\nexports.animateAlongPath = animateAlongPath;\nfunction getBoundingOffsetRect(elem) {\n    var left = 0;\n    var top = 0;\n    var width = 0;\n    var height = 0;\n    if (elem) {\n        var current = elem;\n        while (current) {\n            left += current.offsetLeft;\n            top += current.offsetTop;\n            current = current.offsetParent;\n            if (current) {\n                left += parseInt(style_1.getComputedStyle(current, 'borderLeft'), 10);\n                top += parseInt(style_1.getComputedStyle(current, 'borderTop'), 10);\n            }\n        }\n        width = elem.offsetWidth;\n        height = elem.offsetHeight;\n    }\n    return { left: left, top: top, width: width, height: height };\n}\nexports.getBoundingOffsetRect = getBoundingOffsetRect;\n//# sourceMappingURL=geom.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.transformRectangle = exports.transformPolyline = exports.transformLine = exports.transformPoint = exports.matrixToTranslation = exports.matrixToRotation = exports.matrixToScale = exports.decomposeMatrix = exports.parseTransformString = exports.matrixToTransformString = exports.transformStringToMatrix = exports.createSVGTransform = exports.createSVGMatrix = exports.createSVGPoint = void 0;\nvar geometry_1 = require(\"../../geometry\");\nvar elem_1 = require(\"./elem\");\nvar svgDocument = elem_1.createSvgElement('svg');\nvar transformRegex = /(\\w+)\\(([^,)]+),?([^)]+)?\\)/gi;\nvar transformSeparatorRegex = /[ ,]+/;\nvar transformationListRegex = /^(\\w+)\\((.*)\\)/;\n/**\n * Returns a SVG point object initialized with the `x` and `y` coordinates.\n * @see https://developer.mozilla.org/en/docs/Web/API/SVGPoint\n */\nfunction createSVGPoint(x, y) {\n    var p = svgDocument.createSVGPoint();\n    p.x = x;\n    p.y = y;\n    return p;\n}\nexports.createSVGPoint = createSVGPoint;\n/**\n * Returns the SVG transformation matrix initialized with the given matrix.\n *\n * The given matrix is an object of the form:\n * {\n *   a: number\n *   b: number\n *   c: number\n *   d: number\n *   e: number\n *   f: number\n * }\n *\n * @see https://developer.mozilla.org/en/docs/Web/API/SVGMatrix\n */\nfunction createSVGMatrix(matrix) {\n    var mat = svgDocument.createSVGMatrix();\n    if (matrix != null) {\n        var source = matrix;\n        var target = mat;\n        for (var key in source) {\n            target[key] = source[key];\n        }\n    }\n    return mat;\n}\nexports.createSVGMatrix = createSVGMatrix;\n/**\n * Returns a SVG transform object.\n * @see https://developer.mozilla.org/en/docs/Web/API/SVGTransform\n */\nfunction createSVGTransform(matrix) {\n    if (matrix != null) {\n        if (!(matrix instanceof DOMMatrix)) {\n            matrix = createSVGMatrix(matrix); // tslint:disable-line\n        }\n        return svgDocument.createSVGTransformFromMatrix(matrix);\n    }\n    return svgDocument.createSVGTransform();\n}\nexports.createSVGTransform = createSVGTransform;\n/**\n * Returns the SVG transformation matrix built from the `transformString`.\n *\n * E.g. 'translate(10,10) scale(2,2)' will result in matrix:\n * `{ a: 2, b: 0, c: 0, d: 2, e: 10, f: 10}`\n */\nfunction transformStringToMatrix(transform) {\n    var mat = createSVGMatrix();\n    var matches = transform != null && transform.match(transformRegex);\n    if (!matches) {\n        return mat;\n    }\n    for (var i = 0, n = matches.length; i < n; i += 1) {\n        var transformationString = matches[i];\n        var transformationMatch = transformationString.match(transformationListRegex);\n        if (transformationMatch) {\n            var sx = void 0;\n            var sy = void 0;\n            var tx = void 0;\n            var ty = void 0;\n            var angle = void 0;\n            var ctm = createSVGMatrix();\n            var args = transformationMatch[2].split(transformSeparatorRegex);\n            switch (transformationMatch[1].toLowerCase()) {\n                case 'scale':\n                    sx = parseFloat(args[0]);\n                    sy = args[1] === undefined ? sx : parseFloat(args[1]);\n                    ctm = ctm.scaleNonUniform(sx, sy);\n                    break;\n                case 'translate':\n                    tx = parseFloat(args[0]);\n                    ty = parseFloat(args[1]);\n                    ctm = ctm.translate(tx, ty);\n                    break;\n                case 'rotate':\n                    angle = parseFloat(args[0]);\n                    tx = parseFloat(args[1]) || 0;\n                    ty = parseFloat(args[2]) || 0;\n                    if (tx !== 0 || ty !== 0) {\n                        ctm = ctm.translate(tx, ty).rotate(angle).translate(-tx, -ty);\n                    }\n                    else {\n                        ctm = ctm.rotate(angle);\n                    }\n                    break;\n                case 'skewx':\n                    angle = parseFloat(args[0]);\n                    ctm = ctm.skewX(angle);\n                    break;\n                case 'skewy':\n                    angle = parseFloat(args[0]);\n                    ctm = ctm.skewY(angle);\n                    break;\n                case 'matrix':\n                    ctm.a = parseFloat(args[0]);\n                    ctm.b = parseFloat(args[1]);\n                    ctm.c = parseFloat(args[2]);\n                    ctm.d = parseFloat(args[3]);\n                    ctm.e = parseFloat(args[4]);\n                    ctm.f = parseFloat(args[5]);\n                    break;\n                default:\n                    continue;\n            }\n            mat = mat.multiply(ctm);\n        }\n    }\n    return mat;\n}\nexports.transformStringToMatrix = transformStringToMatrix;\nfunction matrixToTransformString(matrix) {\n    var m = matrix || {};\n    var a = m.a != null ? m.a : 1;\n    var b = m.b != null ? m.b : 0;\n    var c = m.c != null ? m.c : 0;\n    var d = m.d != null ? m.d : 1;\n    var e = m.e != null ? m.e : 0;\n    var f = m.f != null ? m.f : 0;\n    return \"matrix(\" + a + \",\" + b + \",\" + c + \",\" + d + \",\" + e + \",\" + f + \")\";\n}\nexports.matrixToTransformString = matrixToTransformString;\nfunction parseTransformString(transform) {\n    var translation;\n    var rotation;\n    var scale;\n    if (transform) {\n        var separator = transformSeparatorRegex;\n        // Allow reading transform string with a single matrix\n        if (transform.trim().indexOf('matrix') >= 0) {\n            var matrix = transformStringToMatrix(transform);\n            var decomposedMatrix = decomposeMatrix(matrix);\n            translation = [decomposedMatrix.translateX, decomposedMatrix.translateY];\n            rotation = [decomposedMatrix.rotation];\n            scale = [decomposedMatrix.scaleX, decomposedMatrix.scaleY];\n            var transformations = [];\n            if (translation[0] !== 0 || translation[1] !== 0) {\n                transformations.push(\"translate(\" + translation.join(',') + \")\");\n            }\n            if (scale[0] !== 1 || scale[1] !== 1) {\n                transformations.push(\"scale(\" + scale.join(',') + \")\");\n            }\n            if (rotation[0] !== 0) {\n                transformations.push(\"rotate(\" + rotation[0] + \")\");\n            }\n            transform = transformations.join(' '); // tslint:disable-line\n        }\n        else {\n            var translateMatch = transform.match(/translate\\((.*?)\\)/);\n            if (translateMatch) {\n                translation = translateMatch[1].split(separator);\n            }\n            var rotateMatch = transform.match(/rotate\\((.*?)\\)/);\n            if (rotateMatch) {\n                rotation = rotateMatch[1].split(separator);\n            }\n            var scaleMatch = transform.match(/scale\\((.*?)\\)/);\n            if (scaleMatch) {\n                scale = scaleMatch[1].split(separator);\n            }\n        }\n    }\n    var sx = scale && scale[0] ? parseFloat(scale[0]) : 1;\n    return {\n        raw: transform || '',\n        translation: {\n            tx: translation && translation[0]\n                ? parseInt(translation[0], 10)\n                : 0,\n            ty: translation && translation[1]\n                ? parseInt(translation[1], 10)\n                : 0,\n        },\n        rotation: {\n            angle: rotation && rotation[0] ? parseInt(rotation[0], 10) : 0,\n            cx: rotation && rotation[1]\n                ? parseInt(rotation[1], 10)\n                : undefined,\n            cy: rotation && rotation[2]\n                ? parseInt(rotation[2], 10)\n                : undefined,\n        },\n        scale: {\n            sx: sx,\n            sy: scale && scale[1] ? parseFloat(scale[1]) : sx,\n        },\n    };\n}\nexports.parseTransformString = parseTransformString;\nfunction deltaTransformPoint(matrix, point) {\n    var dx = point.x * matrix.a + point.y * matrix.c + 0;\n    var dy = point.x * matrix.b + point.y * matrix.d + 0;\n    return { x: dx, y: dy };\n}\n/**\n * Decomposes the SVG transformation matrix into separate transformations.\n *\n * Returns an object of the form:\n * {\n *   translateX: number\n *   translateY: number\n *   scaleX: number\n *   scaleY: number\n *   skewX: number\n *   skewY: number\n *   rotation: number\n * }\n *\n * @see https://developer.mozilla.org/en/docs/Web/API/SVGMatrix\n */\nfunction decomposeMatrix(matrix) {\n    // @see https://gist.github.com/2052247\n    var px = deltaTransformPoint(matrix, { x: 0, y: 1 });\n    var py = deltaTransformPoint(matrix, { x: 1, y: 0 });\n    var skewX = (180 / Math.PI) * Math.atan2(px.y, px.x) - 90;\n    var skewY = (180 / Math.PI) * Math.atan2(py.y, py.x);\n    return {\n        skewX: skewX,\n        skewY: skewY,\n        translateX: matrix.e,\n        translateY: matrix.f,\n        scaleX: Math.sqrt(matrix.a * matrix.a + matrix.b * matrix.b),\n        scaleY: Math.sqrt(matrix.c * matrix.c + matrix.d * matrix.d),\n        rotation: skewX,\n    };\n}\nexports.decomposeMatrix = decomposeMatrix;\nfunction matrixToScale(matrix) {\n    var a;\n    var b;\n    var c;\n    var d;\n    if (matrix) {\n        a = matrix.a == null ? 1 : matrix.a;\n        d = matrix.d == null ? 1 : matrix.d;\n        b = matrix.b;\n        c = matrix.c;\n    }\n    else {\n        a = d = 1;\n    }\n    return {\n        sx: b ? Math.sqrt(a * a + b * b) : a,\n        sy: c ? Math.sqrt(c * c + d * d) : d,\n    };\n}\nexports.matrixToScale = matrixToScale;\nfunction matrixToRotation(matrix) {\n    var p = { x: 0, y: 1 };\n    if (matrix) {\n        p = deltaTransformPoint(matrix, p);\n    }\n    return {\n        angle: geometry_1.Angle.normalize(geometry_1.Angle.toDeg(Math.atan2(p.y, p.x)) - 90),\n    };\n}\nexports.matrixToRotation = matrixToRotation;\nfunction matrixToTranslation(matrix) {\n    return {\n        tx: (matrix && matrix.e) || 0,\n        ty: (matrix && matrix.f) || 0,\n    };\n}\nexports.matrixToTranslation = matrixToTranslation;\n/**\n * Transforms point by an SVG transformation represented by `matrix`.\n */\nfunction transformPoint(point, matrix) {\n    var ret = createSVGPoint(point.x, point.y).matrixTransform(matrix);\n    return new geometry_1.Point(ret.x, ret.y);\n}\nexports.transformPoint = transformPoint;\n/**\n * Transforms line by an SVG transformation represented by `matrix`.\n */\nfunction transformLine(line, matrix) {\n    return new geometry_1.Line(transformPoint(line.start, matrix), transformPoint(line.end, matrix));\n}\nexports.transformLine = transformLine;\n/**\n * Transforms polyline by an SVG transformation represented by `matrix`.\n */\nfunction transformPolyline(polyline, matrix) {\n    var points = polyline instanceof geometry_1.Polyline ? polyline.points : polyline;\n    if (!Array.isArray(points)) {\n        points = [];\n    }\n    return new geometry_1.Polyline(points.map(function (p) { return transformPoint(p, matrix); }));\n}\nexports.transformPolyline = transformPolyline;\nfunction transformRectangle(rect, matrix) {\n    var p = svgDocument.createSVGPoint();\n    p.x = rect.x;\n    p.y = rect.y;\n    var corner1 = p.matrixTransform(matrix);\n    p.x = rect.x + rect.width;\n    p.y = rect.y;\n    var corner2 = p.matrixTransform(matrix);\n    p.x = rect.x + rect.width;\n    p.y = rect.y + rect.height;\n    var corner3 = p.matrixTransform(matrix);\n    p.x = rect.x;\n    p.y = rect.y + rect.height;\n    var corner4 = p.matrixTransform(matrix);\n    var minX = Math.min(corner1.x, corner2.x, corner3.x, corner4.x);\n    var maxX = Math.max(corner1.x, corner2.x, corner3.x, corner4.x);\n    var minY = Math.min(corner1.y, corner2.y, corner3.y, corner4.y);\n    var maxY = Math.max(corner1.y, corner2.y, corner3.y, corner4.y);\n    return new geometry_1.Rectangle(minX, minY, maxX - minX, maxY - minY);\n}\nexports.transformRectangle = transformRectangle;\n//# sourceMappingURL=matrix.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createSlicePathData = exports.toPathData = exports.toPath = exports.rectToPathData = exports.rectangleToPathData = exports.ellipseToPathData = exports.circleToPathData = exports.getPointsFromSvgElement = exports.polylineToPathData = exports.polygonToPathData = exports.lineToPathData = exports.sample = exports.KAPPA = void 0;\nvar attr_1 = require(\"./attr\");\nvar elem_1 = require(\"./elem\");\nexports.KAPPA = 0.551784;\nfunction getNumbericAttribute(elem, attr, defaultValue) {\n    if (defaultValue === void 0) { defaultValue = NaN; }\n    var v = elem.getAttribute(attr);\n    if (v == null) {\n        return defaultValue;\n    }\n    var n = parseFloat(v);\n    return isNaN(n) ? defaultValue : n;\n}\nfunction sample(elem, interval) {\n    if (interval === void 0) { interval = 1; }\n    var length = elem.getTotalLength();\n    var samples = [];\n    var distance = 0;\n    var sample;\n    while (distance < length) {\n        sample = elem.getPointAtLength(distance);\n        samples.push({ distance: distance, x: sample.x, y: sample.y });\n        distance += interval;\n    }\n    return samples;\n}\nexports.sample = sample;\nfunction lineToPathData(line) {\n    return [\n        'M',\n        getNumbericAttribute(line, 'x1'),\n        getNumbericAttribute(line, 'y1'),\n        'L',\n        getNumbericAttribute(line, 'x2'),\n        getNumbericAttribute(line, 'y2'),\n    ].join(' ');\n}\nexports.lineToPathData = lineToPathData;\nfunction polygonToPathData(polygon) {\n    var points = getPointsFromSvgElement(polygon);\n    if (points.length === 0) {\n        return null;\n    }\n    return svgPointsToPath(points) + \" Z\";\n}\nexports.polygonToPathData = polygonToPathData;\nfunction polylineToPathData(polyline) {\n    var points = getPointsFromSvgElement(polyline);\n    if (points.length === 0) {\n        return null;\n    }\n    return svgPointsToPath(points);\n}\nexports.polylineToPathData = polylineToPathData;\nfunction svgPointsToPath(points) {\n    var arr = points.map(function (p) { return p.x + \" \" + p.y; });\n    return \"M \" + arr.join(' L');\n}\nfunction getPointsFromSvgElement(elem) {\n    var points = [];\n    var nodePoints = elem.points;\n    if (nodePoints) {\n        for (var i = 0, ii = nodePoints.numberOfItems; i < ii; i += 1) {\n            points.push(nodePoints.getItem(i));\n        }\n    }\n    return points;\n}\nexports.getPointsFromSvgElement = getPointsFromSvgElement;\nfunction circleToPathData(circle) {\n    var cx = getNumbericAttribute(circle, 'cx', 0);\n    var cy = getNumbericAttribute(circle, 'cy', 0);\n    var r = getNumbericAttribute(circle, 'r');\n    var cd = r * exports.KAPPA; // Control distance.\n    return [\n        'M',\n        cx,\n        cy - r,\n        'C',\n        cx + cd,\n        cy - r,\n        cx + r,\n        cy - cd,\n        cx + r,\n        cy,\n        'C',\n        cx + r,\n        cy + cd,\n        cx + cd,\n        cy + r,\n        cx,\n        cy + r,\n        'C',\n        cx - cd,\n        cy + r,\n        cx - r,\n        cy + cd,\n        cx - r,\n        cy,\n        'C',\n        cx - r,\n        cy - cd,\n        cx - cd,\n        cy - r,\n        cx,\n        cy - r,\n        'Z',\n    ].join(' ');\n}\nexports.circleToPathData = circleToPathData;\nfunction ellipseToPathData(ellipse) {\n    var cx = getNumbericAttribute(ellipse, 'cx', 0);\n    var cy = getNumbericAttribute(ellipse, 'cy', 0);\n    var rx = getNumbericAttribute(ellipse, 'rx');\n    var ry = getNumbericAttribute(ellipse, 'ry') || rx;\n    var cdx = rx * exports.KAPPA; // Control distance x.\n    var cdy = ry * exports.KAPPA; // Control distance y.\n    var d = [\n        'M',\n        cx,\n        cy - ry,\n        'C',\n        cx + cdx,\n        cy - ry,\n        cx + rx,\n        cy - cdy,\n        cx + rx,\n        cy,\n        'C',\n        cx + rx,\n        cy + cdy,\n        cx + cdx,\n        cy + ry,\n        cx,\n        cy + ry,\n        'C',\n        cx - cdx,\n        cy + ry,\n        cx - rx,\n        cy + cdy,\n        cx - rx,\n        cy,\n        'C',\n        cx - rx,\n        cy - cdy,\n        cx - cdx,\n        cy - ry,\n        cx,\n        cy - ry,\n        'Z',\n    ].join(' ');\n    return d;\n}\nexports.ellipseToPathData = ellipseToPathData;\nfunction rectangleToPathData(rect) {\n    return rectToPathData({\n        x: getNumbericAttribute(rect, 'x', 0),\n        y: getNumbericAttribute(rect, 'y', 0),\n        width: getNumbericAttribute(rect, 'width', 0),\n        height: getNumbericAttribute(rect, 'height', 0),\n        rx: getNumbericAttribute(rect, 'rx', 0),\n        ry: getNumbericAttribute(rect, 'ry', 0),\n    });\n}\nexports.rectangleToPathData = rectangleToPathData;\nfunction rectToPathData(r) {\n    var d;\n    var x = r.x;\n    var y = r.y;\n    var width = r.width;\n    var height = r.height;\n    var topRx = Math.min(r.rx || r['top-rx'] || 0, width / 2);\n    var bottomRx = Math.min(r.rx || r['bottom-rx'] || 0, width / 2);\n    var topRy = Math.min(r.ry || r['top-ry'] || 0, height / 2);\n    var bottomRy = Math.min(r.ry || r['bottom-ry'] || 0, height / 2);\n    if (topRx || bottomRx || topRy || bottomRy) {\n        d = [\n            'M',\n            x,\n            y + topRy,\n            'v',\n            height - topRy - bottomRy,\n            'a',\n            bottomRx,\n            bottomRy,\n            0,\n            0,\n            0,\n            bottomRx,\n            bottomRy,\n            'h',\n            width - 2 * bottomRx,\n            'a',\n            bottomRx,\n            bottomRy,\n            0,\n            0,\n            0,\n            bottomRx,\n            -bottomRy,\n            'v',\n            -(height - bottomRy - topRy),\n            'a',\n            topRx,\n            topRy,\n            0,\n            0,\n            0,\n            -topRx,\n            -topRy,\n            'h',\n            -(width - 2 * topRx),\n            'a',\n            topRx,\n            topRy,\n            0,\n            0,\n            0,\n            -topRx,\n            topRy,\n            'Z',\n        ];\n    }\n    else {\n        d = ['M', x, y, 'H', x + width, 'V', y + height, 'H', x, 'V', y, 'Z'];\n    }\n    return d.join(' ');\n}\nexports.rectToPathData = rectToPathData;\nfunction toPath(elem) {\n    var path = elem_1.createSvgElement('path');\n    attr_1.attr(path, attr_1.attr(elem));\n    var d = toPathData(elem);\n    if (d) {\n        path.setAttribute('d', d);\n    }\n    return path;\n}\nexports.toPath = toPath;\nfunction toPathData(elem) {\n    var tagName = elem.tagName.toLowerCase();\n    switch (tagName) {\n        case 'path':\n            return elem.getAttribute('d');\n        case 'line':\n            return lineToPathData(elem);\n        case 'polygon':\n            return polygonToPathData(elem);\n        case 'polyline':\n            return polylineToPathData(elem);\n        case 'ellipse':\n            return ellipseToPathData(elem);\n        case 'circle':\n            return circleToPathData(elem);\n        case 'rect':\n            return rectangleToPathData(elem);\n    }\n    throw new Error(\"\\\"\" + tagName + \"\\\" cannot be converted to svg path element.\");\n}\nexports.toPathData = toPathData;\n// Inspired by d3.js https://github.com/mbostock/d3/blob/master/src/svg/arc.js\nfunction createSlicePathData(innerRadius, outerRadius, startAngle, endAngle) {\n    var svgArcMax = 2 * Math.PI - 1e-6;\n    var r0 = innerRadius;\n    var r1 = outerRadius;\n    var a0 = startAngle;\n    var a1 = endAngle;\n    if (a1 < a0) {\n        var tmp = a0;\n        a0 = a1;\n        a1 = tmp;\n    }\n    var da = a1 - a0;\n    var df = da < Math.PI ? '0' : '1';\n    var c0 = Math.cos(a0);\n    var s0 = Math.sin(a0);\n    var c1 = Math.cos(a1);\n    var s1 = Math.sin(a1);\n    return da >= svgArcMax\n        ? r0\n            ? // tslint:disable-next-line\n                'M0,' +\n                    r1 +\n                    'A' +\n                    r1 +\n                    ',' +\n                    r1 +\n                    ' 0 1,1 0,' +\n                    -r1 +\n                    'A' +\n                    r1 +\n                    ',' +\n                    r1 +\n                    ' 0 1,1 0,' +\n                    r1 +\n                    'M0,' +\n                    r0 +\n                    'A' +\n                    r0 +\n                    ',' +\n                    r0 +\n                    ' 0 1,0 0,' +\n                    -r0 +\n                    'A' +\n                    r0 +\n                    ',' +\n                    r0 +\n                    ' 0 1,0 0,' +\n                    r0 +\n                    'Z'\n            : // tslint:disable-next-line\n                'M0,' +\n                    r1 +\n                    'A' +\n                    r1 +\n                    ',' +\n                    r1 +\n                    ' 0 1,1 0,' +\n                    -r1 +\n                    'A' +\n                    r1 +\n                    ',' +\n                    r1 +\n                    ' 0 1,1 0,' +\n                    r1 +\n                    'Z'\n        : r0\n            ? // tslint:disable-next-line\n                'M' +\n                    r1 * c0 +\n                    ',' +\n                    r1 * s0 +\n                    'A' +\n                    r1 +\n                    ',' +\n                    r1 +\n                    ' 0 ' +\n                    df +\n                    ',1 ' +\n                    r1 * c1 +\n                    ',' +\n                    r1 * s1 +\n                    'L' +\n                    r0 * c1 +\n                    ',' +\n                    r0 * s1 +\n                    'A' +\n                    r0 +\n                    ',' +\n                    r0 +\n                    ' 0 ' +\n                    df +\n                    ',0 ' +\n                    r0 * c0 +\n                    ',' +\n                    r0 * s0 +\n                    'Z'\n            : // tslint:disable-next-line\n                'M' +\n                    r1 * c0 +\n                    ',' +\n                    r1 * s0 +\n                    'A' +\n                    r1 +\n                    ',' +\n                    r1 +\n                    ' 0 ' +\n                    df +\n                    ',1 ' +\n                    r1 * c1 +\n                    ',' +\n                    r1 * s1 +\n                    'L0,0' +\n                    'Z';\n}\nexports.createSlicePathData = createSlicePathData;\n//# sourceMappingURL=path.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getVendorPrefixedName = void 0;\nvar hyphenPattern = /-(.)/g;\nfunction camelize(str) {\n    return str.replace(hyphenPattern, function (_, char) { return char.toUpperCase(); });\n}\nvar memoized = {};\nvar prefixes = ['Webkit', 'ms', 'Moz', 'O'];\nvar testStyle = document ? document.createElement('div').style : {};\nfunction getWithPrefix(name) {\n    for (var i = 0; i < prefixes.length; i += 1) {\n        var prefixedName = prefixes[i] + name;\n        if (prefixedName in testStyle) {\n            return prefixedName;\n        }\n    }\n    return null;\n}\nfunction getVendorPrefixedName(property) {\n    var name = camelize(property);\n    if (memoized[name] == null) {\n        var capitalizedName = name.charAt(0).toUpperCase() + name.slice(1);\n        memoized[name] = name in testStyle ? name : getWithPrefix(capitalizedName);\n    }\n    return memoized[name];\n}\nexports.getVendorPrefixedName = getVendorPrefixedName;\n//# sourceMappingURL=prefix.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.clearSelection = void 0;\nexports.clearSelection = (function () {\n    var doc = document;\n    if (doc.selection) {\n        return function () {\n            doc.selection.empty();\n        };\n    }\n    if (window.getSelection) {\n        return function () {\n            var selection = window.getSelection();\n            if (selection) {\n                if (selection.empty) {\n                    selection.empty();\n                }\n                else if (selection.removeAllRanges) {\n                    selection.removeAllRanges();\n                }\n            }\n        };\n    }\n    return function () { };\n})();\n//# sourceMappingURL=selection.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hasScrollbars = exports.getComputedStyle = exports.setPrefixedStyle = void 0;\nvar prefix_1 = require(\"./prefix\");\nfunction setPrefixedStyle(style, name, value) {\n    var vendor = prefix_1.getVendorPrefixedName(name);\n    if (vendor != null) {\n        style[vendor] = value;\n    }\n    style[name] = value;\n}\nexports.setPrefixedStyle = setPrefixedStyle;\nfunction getComputedStyle(elem, name) {\n    // IE9+\n    var computed = elem.ownerDocument &&\n        elem.ownerDocument.defaultView &&\n        elem.ownerDocument.defaultView.opener\n        ? elem.ownerDocument.defaultView.getComputedStyle(elem, null)\n        : window.getComputedStyle(elem, null);\n    if (computed && name) {\n        return computed.getPropertyValue(name) || computed[name];\n    }\n    return computed;\n}\nexports.getComputedStyle = getComputedStyle;\nfunction hasScrollbars(container) {\n    var style = getComputedStyle(container);\n    return (style != null && (style.overflow === 'scroll' || style.overflow === 'auto'));\n}\nexports.hasScrollbars = hasScrollbars;\n//# sourceMappingURL=style.js.map","\"use strict\";\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.breakText = exports.text = void 0;\nvar number_1 = require(\"../number\");\nvar text_1 = require(\"../text\");\nvar attr_1 = require(\"./attr\");\nvar vector_1 = require(\"../vector\");\nvar elem_1 = require(\"./elem\");\nfunction createTextPathNode(attrs, elem) {\n    var vel = vector_1.Vector.create(elem);\n    var textPath = vector_1.Vector.create('textPath');\n    var d = attrs.d;\n    if (d && attrs['xlink:href'] === undefined) {\n        var path = vector_1.Vector.create('path').attr('d', d).appendTo(vel.defs());\n        textPath.attr('xlink:href', \"#\" + path.id);\n    }\n    if (typeof attrs === 'object') {\n        textPath.attr(attrs);\n    }\n    return textPath.node;\n}\nfunction annotateTextLine(lineNode, lineAnnotations, options) {\n    var eol = options.eol;\n    var baseSize = options.baseSize;\n    var lineHeight = options.lineHeight;\n    var maxFontSize = 0;\n    var tspanNode;\n    var fontMetrics = {};\n    var lastJ = lineAnnotations.length - 1;\n    for (var j = 0; j <= lastJ; j += 1) {\n        var annotation = lineAnnotations[j];\n        var fontSize = null;\n        if (typeof annotation === 'object') {\n            var annotationAttrs = annotation.attrs;\n            var vTSpan = vector_1.Vector.create('tspan', annotationAttrs);\n            tspanNode = vTSpan.node;\n            var t = annotation.t;\n            if (eol && j === lastJ) {\n                t += eol;\n            }\n            tspanNode.textContent = t;\n            // Per annotation className\n            var annotationClass = annotationAttrs['class'];\n            if (annotationClass) {\n                vTSpan.addClass(annotationClass);\n            }\n            // set the list of indices of all the applied annotations\n            // in the `annotations` attribute. This list is a comma\n            // separated list of indices.\n            if (options.includeAnnotationIndices) {\n                vTSpan.attr('annotations', annotation.annotations.join(','));\n            }\n            // Check for max font size\n            fontSize = parseFloat(annotationAttrs['font-size']);\n            if (fontSize === undefined)\n                fontSize = baseSize;\n            if (fontSize && fontSize > maxFontSize)\n                maxFontSize = fontSize;\n        }\n        else {\n            if (eol && j === lastJ) {\n                annotation += eol;\n            }\n            tspanNode = document.createTextNode(annotation || ' ');\n            if (baseSize && baseSize > maxFontSize) {\n                maxFontSize = baseSize;\n            }\n        }\n        lineNode.appendChild(tspanNode);\n    }\n    if (maxFontSize) {\n        fontMetrics.maxFontSize = maxFontSize;\n    }\n    if (lineHeight) {\n        fontMetrics.lineHeight = lineHeight;\n    }\n    else if (maxFontSize) {\n        fontMetrics.lineHeight = maxFontSize * 1.2;\n    }\n    return fontMetrics;\n}\nvar emRegex = /em$/;\nfunction emToPx(em, fontSize) {\n    var numerical = parseFloat(em);\n    if (emRegex.test(em)) {\n        return numerical * fontSize;\n    }\n    return numerical;\n}\nfunction calculateDY(alignment, linesMetrics, baseSizePx, lineHeight) {\n    if (!Array.isArray(linesMetrics)) {\n        return 0;\n    }\n    var n = linesMetrics.length;\n    if (!n)\n        return 0;\n    var lineMetrics = linesMetrics[0];\n    var flMaxFont = emToPx(lineMetrics.maxFontSize, baseSizePx) || baseSizePx;\n    var rLineHeights = 0;\n    var lineHeightPx = emToPx(lineHeight, baseSizePx);\n    for (var i = 1; i < n; i += 1) {\n        lineMetrics = linesMetrics[i];\n        var iLineHeight = emToPx(lineMetrics.lineHeight, baseSizePx) || lineHeightPx;\n        rLineHeights += iLineHeight;\n    }\n    var llMaxFont = emToPx(lineMetrics.maxFontSize, baseSizePx) || baseSizePx;\n    var dy;\n    switch (alignment) {\n        case 'middle':\n            dy = flMaxFont / 2 - 0.15 * llMaxFont - rLineHeights / 2;\n            break;\n        case 'bottom':\n            dy = -(0.25 * llMaxFont) - rLineHeights;\n            break;\n        default:\n        case 'top':\n            dy = 0.8 * flMaxFont;\n            break;\n    }\n    return dy;\n}\nfunction text(elem, content, options) {\n    if (options === void 0) { options = {}; }\n    content = text_1.Text.sanitize(content); // tslint:disable-line\n    var eol = options.eol;\n    var textPath = options.textPath;\n    var verticalAnchor = options.textVerticalAnchor;\n    var namedVerticalAnchor = verticalAnchor === 'middle' ||\n        verticalAnchor === 'bottom' ||\n        verticalAnchor === 'top';\n    // Horizontal shift applied to all the lines but the first.\n    var x = options.x;\n    if (x === undefined) {\n        x = elem.getAttribute('x') || 0;\n    }\n    // Annotations\n    var iai = options.includeAnnotationIndices;\n    var annotations = options.annotations;\n    if (annotations && !Array.isArray(annotations)) {\n        annotations = [annotations];\n    }\n    // Shift all the <tspan> but first by one line (`1em`)\n    var defaultLineHeight = options.lineHeight;\n    var autoLineHeight = defaultLineHeight === 'auto';\n    var lineHeight = autoLineHeight ? '1.5em' : defaultLineHeight || '1em';\n    elem_1.empty(elem);\n    attr_1.attr(elem, {\n        // Preserve spaces, do not consecutive spaces to get collapsed to one.\n        'xml:space': 'preserve',\n        // An empty text gets rendered into the DOM in webkit-based browsers.\n        // In order to unify this behaviour across all browsers\n        // we rather hide the text element when it's empty.\n        display: content || options.displayEmpty ? null : 'none',\n    });\n    // Set default font-size if none\n    var fontSize = parseFloat(attr_1.attr(elem, 'font-size'));\n    if (!fontSize) {\n        fontSize = 16;\n        if (namedVerticalAnchor || annotations) {\n            attr_1.attr(elem, 'font-size', \"\" + fontSize);\n        }\n    }\n    var containerNode;\n    if (textPath) {\n        // Now all the `<tspan>`s will be inside the `<textPath>`.\n        if (typeof textPath === 'string') {\n            textPath = { d: textPath };\n        }\n        containerNode = createTextPathNode(textPath, elem);\n    }\n    else {\n        containerNode = document.createDocumentFragment();\n    }\n    var dy;\n    var offset = 0;\n    var annotatedY;\n    var lines = content.split('\\n');\n    var linesMetrics = [];\n    var lastI = lines.length - 1;\n    for (var i = 0; i <= lastI; i += 1) {\n        dy = lineHeight;\n        var lineClassName = 'v-line';\n        var lineNode = elem_1.createSvgElement('tspan');\n        var lineMetrics = void 0;\n        var line = lines[i];\n        if (line) {\n            if (annotations) {\n                // Find the *compacted* annotations for this line.\n                var lineAnnotations = text_1.Text.annotate(line, annotations, {\n                    offset: -offset,\n                    includeAnnotationIndices: iai,\n                });\n                lineMetrics = annotateTextLine(lineNode, lineAnnotations, {\n                    eol: i !== lastI && eol,\n                    baseSize: fontSize,\n                    lineHeight: autoLineHeight ? null : lineHeight,\n                    includeAnnotationIndices: iai,\n                });\n                // Get the line height based on the biggest font size\n                // in the annotations for this line.\n                var iLineHeight = lineMetrics.lineHeight;\n                if (iLineHeight && autoLineHeight && i !== 0) {\n                    dy = iLineHeight;\n                }\n                if (i === 0) {\n                    annotatedY = lineMetrics.maxFontSize * 0.8;\n                }\n            }\n            else {\n                if (eol && i !== lastI) {\n                    line += eol;\n                }\n                lineNode.textContent = line;\n            }\n        }\n        else {\n            // Make sure the textContent is never empty. If it is, add a dummy\n            // character and make it invisible, making the following lines correctly\n            // relatively positioned. `dy=1em` won't work with empty lines otherwise.\n            lineNode.textContent = '-';\n            lineClassName += ' v-empty-line';\n            var lineNodeStyle = lineNode.style;\n            lineNodeStyle.fillOpacity = 0;\n            lineNodeStyle.strokeOpacity = 0;\n            if (annotations) {\n                lineMetrics = {};\n            }\n        }\n        if (lineMetrics) {\n            linesMetrics.push(lineMetrics);\n        }\n        if (i > 0) {\n            lineNode.setAttribute('dy', dy);\n        }\n        // Firefox requires 'x' to be set on the first line\n        if (i > 0 || textPath) {\n            lineNode.setAttribute('x', x);\n        }\n        lineNode.className.baseVal = lineClassName;\n        containerNode.appendChild(lineNode);\n        offset += line.length + 1; // + 1 = newline character.\n    }\n    // Y Alignment calculation\n    if (namedVerticalAnchor) {\n        if (annotations) {\n            dy = calculateDY(verticalAnchor, linesMetrics, fontSize, lineHeight);\n        }\n        else if (verticalAnchor === 'top') {\n            // A shortcut for top alignment. It does not depend on font-size nor line-height\n            dy = '0.8em';\n        }\n        else {\n            var rh = void 0; // remaining height\n            if (lastI > 0) {\n                rh = parseFloat(lineHeight) || 1;\n                rh *= lastI;\n                if (!emRegex.test(lineHeight))\n                    rh /= fontSize;\n            }\n            else {\n                // Single-line text\n                rh = 0;\n            }\n            switch (verticalAnchor) {\n                case 'middle':\n                    dy = 0.3 - rh / 2 + \"em\";\n                    break;\n                case 'bottom':\n                    dy = -rh - 0.3 + \"em\";\n                    break;\n            }\n        }\n    }\n    else {\n        if (verticalAnchor === 0) {\n            dy = '0em';\n        }\n        else if (verticalAnchor) {\n            dy = verticalAnchor;\n        }\n        else {\n            // No vertical anchor is defined\n            dy = 0;\n            // Backwards compatibility - we change the `y` attribute instead of `dy`.\n            if (elem.getAttribute('y') == null) {\n                elem.setAttribute('y', \"\" + (annotatedY || '0.8em'));\n            }\n        }\n    }\n    var firstLine = containerNode.firstChild;\n    firstLine.setAttribute('dy', dy);\n    elem.appendChild(containerNode);\n}\nexports.text = text;\nfunction breakText(text, size, styles, options) {\n    if (styles === void 0) { styles = {}; }\n    if (options === void 0) { options = {}; }\n    var width = size.width;\n    var height = size.height;\n    var svgDocument = options.svgDocument || elem_1.createSvgElement('svg');\n    var textSpan = elem_1.createSvgElement('tspan');\n    var textElement = elem_1.createSvgElement('text');\n    attr_1.attr(textElement, styles);\n    elem_1.append(textElement, textSpan);\n    var textNode = document.createTextNode('');\n    // Prevent flickering\n    textElement.style.opacity = '0';\n    // Prevent FF from throwing an uncaught exception when `getBBox()`\n    // called on element that is not in the render tree (is not measurable).\n    // <tspan>.getComputedTextLength() returns always 0 in this case.\n    // Note that the `textElement` resp. `textSpan` can become hidden\n    // when it's appended to the DOM and a `display: none` CSS stylesheet\n    // rule gets applied.\n    textElement.style.display = 'block';\n    textSpan.style.display = 'block';\n    textSpan.appendChild(textNode);\n    svgDocument.appendChild(textElement);\n    if (!options.svgDocument) {\n        document.body.appendChild(svgDocument);\n    }\n    var eol = options.eol || '\\n';\n    var separator = options.separator || ' ';\n    var hyphen = options.hyphen ? new RegExp(options.hyphen) : /[^\\w\\d]/;\n    var words = text.split(separator);\n    var full = [];\n    var lines = [];\n    var p;\n    var h;\n    var lineHeight;\n    for (var i = 0, l = 0, len = words.length; i < len; i += 1) {\n        var word = words[i];\n        if (!word) {\n            continue;\n        }\n        if (eol && word.indexOf(eol) >= 0) {\n            // word contains end-of-line character\n            if (word.length > 1) {\n                // separate word and continue cycle\n                var eolWords = word.split(eol);\n                for (var j = 0, jl = eolWords.length - 1; j < jl; j += 1) {\n                    eolWords.splice(2 * j + 1, 0, eol);\n                }\n                words.splice.apply(words, __spreadArrays([i, 1], eolWords.filter(function (word) { return word !== ''; })));\n                i -= 1;\n                len = words.length;\n            }\n            else {\n                // creates a new line\n                l += 1;\n                lines[l] = '';\n            }\n            continue;\n        }\n        textNode.data = lines[l] ? lines[l] + \" \" + word : word;\n        if (textSpan.getComputedTextLength() <= width) {\n            // the current line fits\n            lines[l] = textNode.data;\n            if (p || h) {\n                // We were partitioning. Put rest of the word onto next line\n                full[l] = true;\n                l += 1;\n                // cancel partitioning and splitting by hyphens\n                p = 0;\n                h = 0;\n            }\n        }\n        else {\n            if (!lines[l] || p) {\n                var partition = !!p;\n                p = word.length - 1;\n                if (partition || !p) {\n                    // word has only one character.\n                    if (!p) {\n                        if (!lines[l]) {\n                            // we won't fit this text within our rect\n                            lines = [];\n                            break;\n                        }\n                        // partitioning didn't help on the non-empty line\n                        // try again, but this time start with a new line\n                        // cancel partitions created\n                        words.splice(i, 2, word + words[i + 1]);\n                        // adjust word length\n                        len -= 1;\n                        full[l] = true;\n                        l += 1;\n                        i -= 1;\n                        continue;\n                    }\n                    // move last letter to the beginning of the next word\n                    words[i] = word.substring(0, p);\n                    words[i + 1] = word.substring(p) + words[i + 1];\n                }\n                else {\n                    if (h) {\n                        // cancel splitting and put the words together again\n                        words.splice(i, 2, words[i] + words[i + 1]);\n                        h = 0;\n                    }\n                    else {\n                        var hyphenIndex = word.search(hyphen);\n                        if (hyphenIndex > -1 &&\n                            hyphenIndex !== word.length - 1 &&\n                            hyphenIndex !== 0) {\n                            h = hyphenIndex + 1;\n                            p = 0;\n                        }\n                        // We initiate partitioning or splitting\n                        // split the long word into two words\n                        words.splice(i, 1, word.substring(0, h || p), word.substring(h || p));\n                        // adjust words length\n                        len += 1;\n                    }\n                    if (l && !full[l - 1]) {\n                        // if the previous line is not full, try to fit max part of\n                        // the current word there\n                        l -= 1;\n                    }\n                }\n                i -= 1;\n                continue;\n            }\n            l += 1;\n            i -= 1;\n        }\n        // if size.height is defined we have to check whether the height of the entire\n        // text exceeds the rect height\n        if (height !== undefined) {\n            if (lineHeight === undefined) {\n                var heightValue \n                // use the same defaults as in V.prototype.text\n                = void 0;\n                // use the same defaults as in V.prototype.text\n                if (styles.lineHeight === 'auto') {\n                    heightValue = { value: 1.5, unit: 'em' };\n                }\n                else {\n                    heightValue = number_1.NumberExt.parseCssNumeric(styles.lineHeight, [\n                        'em',\n                    ]) || {\n                        value: 1,\n                        unit: 'em',\n                    };\n                }\n                lineHeight = heightValue.value;\n                if (heightValue.unit === 'em') {\n                    lineHeight *= textElement.getBBox().height;\n                }\n            }\n            if (lineHeight * lines.length > height) {\n                // remove overflowing lines\n                var lastL = Math.floor(height / lineHeight) - 1;\n                lines.splice(lastL + 1);\n                // add ellipsis\n                var ellipsis = options.ellipsis;\n                if (!ellipsis || lastL < 0)\n                    break;\n                if (typeof ellipsis !== 'string')\n                    ellipsis = '\\u2026';\n                var lastLine = lines[lastL];\n                if (!lastLine)\n                    break;\n                var k = lastLine.length;\n                var lastLineWithOmission = void 0;\n                var lastChar = void 0;\n                var separatorChar = void 0;\n                do {\n                    lastChar = lastLine[k];\n                    lastLineWithOmission = lastLine.substring(0, k);\n                    if (!lastChar) {\n                        separatorChar = typeof separator === 'string' ? separator : ' ';\n                        lastLineWithOmission += separatorChar;\n                    }\n                    else if (lastChar.match(separator)) {\n                        lastLineWithOmission += lastChar;\n                    }\n                    lastLineWithOmission += ellipsis;\n                    textNode.data = lastLineWithOmission;\n                    if (textSpan.getComputedTextLength() <= width) {\n                        lines[lastL] = lastLineWithOmission;\n                        break;\n                    }\n                    k -= 1;\n                } while (k >= 0);\n                break;\n            }\n        }\n    }\n    if (options.svgDocument) {\n        // svg document was provided, remove the text element only\n        svgDocument.removeChild(textElement);\n    }\n    else {\n        // clean svg document\n        document.body.removeChild(svgDocument);\n    }\n    return lines.join(eol);\n}\nexports.breakText = breakText;\n//# sourceMappingURL=text.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.translateAndAutoOrient = exports.scale = exports.rotate = exports.translate = exports.transform = void 0;\nvar geometry_1 = require(\"../../geometry\");\nvar attr_1 = require(\"./attr\");\nvar geom_1 = require(\"./geom\");\nvar matrix_1 = require(\"./matrix\");\nfunction transform(elem, matrix, options) {\n    if (options === void 0) { options = {}; }\n    if (matrix == null) {\n        return matrix_1.transformStringToMatrix(attr_1.attr(elem, 'transform'));\n    }\n    if (options.absolute) {\n        elem.setAttribute('transform', matrix_1.matrixToTransformString(matrix));\n        return;\n    }\n    var transformList = elem.transform;\n    var svgTransform = matrix_1.createSVGTransform(matrix);\n    transformList.baseVal.appendItem(svgTransform);\n}\nexports.transform = transform;\nfunction translate(elem, tx, ty, options) {\n    if (ty === void 0) { ty = 0; }\n    if (options === void 0) { options = {}; }\n    var transformAttr = attr_1.attr(elem, 'transform');\n    var transform = matrix_1.parseTransformString(transformAttr);\n    if (tx == null) {\n        return transform.translation;\n    }\n    transformAttr = transform.raw;\n    transformAttr = transformAttr.replace(/translate\\([^)]*\\)/g, '').trim();\n    var newTx = options.absolute ? tx : transform.translation.tx + tx;\n    var newTy = options.absolute ? ty : transform.translation.ty + ty;\n    var newTranslate = \"translate(\" + newTx + \",\" + newTy + \")\";\n    // Note that `translate()` is always the first transformation. This is\n    // usually the desired case.\n    elem.setAttribute('transform', (newTranslate + \" \" + transformAttr).trim());\n}\nexports.translate = translate;\nfunction rotate(elem, angle, cx, cy, options) {\n    if (options === void 0) { options = {}; }\n    var transformAttr = attr_1.attr(elem, 'transform');\n    var transform = matrix_1.parseTransformString(transformAttr);\n    if (angle == null) {\n        return transform.rotation;\n    }\n    transformAttr = transform.raw;\n    transformAttr = transformAttr.replace(/rotate\\([^)]*\\)/g, '').trim();\n    angle %= 360; // tslint:disable-line\n    var newAngle = options.absolute ? angle : transform.rotation.angle + angle;\n    var newOrigin = cx != null && cy != null ? \",\" + cx + \",\" + cy : '';\n    var newRotate = \"rotate(\" + newAngle + newOrigin + \")\";\n    elem.setAttribute('transform', (transformAttr + \" \" + newRotate).trim());\n}\nexports.rotate = rotate;\nfunction scale(elem, sx, sy) {\n    var transformAttr = attr_1.attr(elem, 'transform');\n    var transform = matrix_1.parseTransformString(transformAttr);\n    if (sx == null) {\n        return transform.scale;\n    }\n    sy = sy == null ? sx : sy; //tslint:disable-line\n    transformAttr = transform.raw;\n    transformAttr = transformAttr.replace(/scale\\([^)]*\\)/g, '').trim();\n    var newScale = \"scale(\" + sx + \",\" + sy + \")\";\n    elem.setAttribute('transform', (transformAttr + \" \" + newScale).trim());\n}\nexports.scale = scale;\nfunction translateAndAutoOrient(elem, position, reference, target) {\n    var pos = geometry_1.Point.create(position);\n    var ref = geometry_1.Point.create(reference);\n    if (!target) {\n        var svg = elem instanceof SVGSVGElement ? elem : elem.ownerSVGElement;\n        target = svg; // tslint:disable-line\n    }\n    // Clean-up previously set transformations except the scale.\n    // If we didn't clean up the previous transformations then they'd\n    // add up with the old ones. Scale is an exception as it doesn't\n    // add up, consider: `this.scale(2).scale(2).scale(2)`. The result\n    // is that the element is scaled by the factor 2, not 8.\n    var s = scale(elem);\n    elem.setAttribute('transform', '');\n    var bbox = geom_1.getBBox(elem, { target: target }).scale(s.sx, s.sy);\n    // 1. Translate to origin.\n    var translateToOrigin = matrix_1.createSVGTransform();\n    translateToOrigin.setTranslate(-bbox.x - bbox.width / 2, -bbox.y - bbox.height / 2);\n    // 2. Rotate around origin.\n    var rotateAroundOrigin = matrix_1.createSVGTransform();\n    var angle = pos.angleBetween(ref, pos.clone().translate(1, 0));\n    if (angle)\n        rotateAroundOrigin.setRotate(angle, 0, 0);\n    // 3. Translate to the `position` + the offset (half my width)\n    //    towards the `reference` point.\n    var translateFromOrigin = matrix_1.createSVGTransform();\n    var finalPosition = pos.clone().move(ref, bbox.width / 2);\n    translateFromOrigin.setTranslate(2 * pos.x - finalPosition.x, 2 * pos.y - finalPosition.y);\n    // 4. Get the current transformation matrix of this node\n    var ctm = geom_1.getTransformToElement(elem, target);\n    // 5. Apply transformations and the scale\n    var transform = matrix_1.createSVGTransform();\n    transform.setMatrix(translateFromOrigin.matrix.multiply(rotateAroundOrigin.matrix.multiply(translateToOrigin.matrix.multiply(ctm.scale(s.sx, s.sy)))));\n    elem.setAttribute('transform', matrix_1.matrixToTransformString(transform.matrix));\n}\nexports.translateAndAutoOrient = translateAndAutoOrient;\n//# sourceMappingURL=transform.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isNumeric = exports.isWindow = exports.isFunction = exports.isArrayLike = exports.isArray = exports.isObject = exports.isBoolean = exports.isNumber = exports.isString = exports.isUndefined = exports.isNil = exports.isNull = void 0;\nvar lodash_es_1 = require(\"lodash-es\");\nObject.defineProperty(exports, \"isNull\", { enumerable: true, get: function () { return lodash_es_1.isNull; } });\nObject.defineProperty(exports, \"isNil\", { enumerable: true, get: function () { return lodash_es_1.isNil; } });\nObject.defineProperty(exports, \"isUndefined\", { enumerable: true, get: function () { return lodash_es_1.isUndefined; } });\nObject.defineProperty(exports, \"isString\", { enumerable: true, get: function () { return lodash_es_1.isString; } });\nObject.defineProperty(exports, \"isNumber\", { enumerable: true, get: function () { return lodash_es_1.isNumber; } });\nObject.defineProperty(exports, \"isBoolean\", { enumerable: true, get: function () { return lodash_es_1.isBoolean; } });\nObject.defineProperty(exports, \"isObject\", { enumerable: true, get: function () { return lodash_es_1.isObject; } });\nObject.defineProperty(exports, \"isArray\", { enumerable: true, get: function () { return lodash_es_1.isArray; } });\nObject.defineProperty(exports, \"isArrayLike\", { enumerable: true, get: function () { return lodash_es_1.isArrayLike; } });\nObject.defineProperty(exports, \"isFunction\", { enumerable: true, get: function () { return lodash_es_1.isFunction; } });\nvar isWindow = function (value) {\n    return value && value === value.window;\n};\nexports.isWindow = isWindow;\nvar isNumeric = function (value) {\n    return !Array.isArray(value) && value - parseFloat(value) + 1 >= 0;\n};\nexports.isNumeric = isNumeric;\n//# sourceMappingURL=lang.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NumberExt = void 0;\nvar NumberExt = __importStar(require(\"./number\"));\nexports.NumberExt = NumberExt;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.normalizeSides = exports.parseCssNumeric = exports.normalizePercentage = exports.isPercentage = exports.random = exports.mod = exports.isNumeric = exports.parseInt = exports.toSafeInteger = exports.toInteger = exports.toNumber = exports.toFinite = exports.inRange = exports.clamp = exports.isSafeInteger = exports.isInteger = exports.isFinite = exports.isNumber = exports.isNaN = void 0;\nvar lodash_es_1 = require(\"lodash-es\");\nObject.defineProperty(exports, \"isNaN\", { enumerable: true, get: function () { return lodash_es_1.isNaN; } });\nObject.defineProperty(exports, \"isNumber\", { enumerable: true, get: function () { return lodash_es_1.isNumber; } });\nObject.defineProperty(exports, \"isFinite\", { enumerable: true, get: function () { return lodash_es_1.isFinite; } });\nObject.defineProperty(exports, \"isInteger\", { enumerable: true, get: function () { return lodash_es_1.isInteger; } });\nObject.defineProperty(exports, \"isSafeInteger\", { enumerable: true, get: function () { return lodash_es_1.isSafeInteger; } });\nObject.defineProperty(exports, \"clamp\", { enumerable: true, get: function () { return lodash_es_1.clamp; } });\nObject.defineProperty(exports, \"inRange\", { enumerable: true, get: function () { return lodash_es_1.inRange; } });\nObject.defineProperty(exports, \"toFinite\", { enumerable: true, get: function () { return lodash_es_1.toFinite; } });\nObject.defineProperty(exports, \"toNumber\", { enumerable: true, get: function () { return lodash_es_1.toNumber; } });\nObject.defineProperty(exports, \"toInteger\", { enumerable: true, get: function () { return lodash_es_1.toInteger; } });\nObject.defineProperty(exports, \"toSafeInteger\", { enumerable: true, get: function () { return lodash_es_1.toSafeInteger; } });\nObject.defineProperty(exports, \"parseInt\", { enumerable: true, get: function () { return lodash_es_1.parseInt; } });\nvar lang_1 = require(\"../lang/lang\");\nObject.defineProperty(exports, \"isNumeric\", { enumerable: true, get: function () { return lang_1.isNumeric; } });\n/**\n * Returns the remainder of division of `n` by `m`. You should use this\n * instead of the built-in operation as the built-in operation does not\n * properly handle negative numbers.\n */\nfunction mod(n, m) {\n    return ((n % m) + m) % m;\n}\nexports.mod = mod;\nfunction random(lower, upper) {\n    if (upper == null) {\n        upper = lower == null ? 1 : lower; // tslint:disable-line\n        lower = 0; // tslint:disable-line\n    }\n    else {\n        if (upper < lower) {\n            var tmp = lower;\n            lower = upper; // tslint:disable-line\n            upper = tmp; // tslint:disable-line\n        }\n    }\n    return Math.floor(Math.random() * (upper - lower + 1) + lower);\n}\nexports.random = random;\nfunction isPercentage(val) {\n    return typeof val === 'string' && val.slice(-1) === '%';\n}\nexports.isPercentage = isPercentage;\nfunction normalizePercentage(num, ref) {\n    if (num == null) {\n        return 0;\n    }\n    var raw;\n    if (typeof num === 'string') {\n        raw = parseFloat(num);\n        if (isPercentage(num)) {\n            raw /= 100;\n            if (isFinite(raw)) {\n                return raw * ref;\n            }\n        }\n    }\n    else {\n        raw = num;\n    }\n    if (!isFinite(raw)) {\n        return 0;\n    }\n    if (raw > 0 && raw < 1) {\n        return raw * ref;\n    }\n    return raw;\n}\nexports.normalizePercentage = normalizePercentage;\nfunction parseCssNumeric(val, units) {\n    function getUnit(regexp) {\n        var matches = new RegExp(\"(?:\\\\d+(?:\\\\.\\\\d+)*)(\" + regexp + \")$\").exec(val);\n        if (!matches) {\n            return null;\n        }\n        return matches[1];\n    }\n    var number = parseFloat(val);\n    if (Number.isNaN(number)) {\n        return null;\n    }\n    // determine the unit\n    var regexp;\n    if (units == null) {\n        // accept any unit, as well as no unit\n        regexp = '[A-Za-z]*';\n    }\n    else if (Array.isArray(units)) {\n        if (units.length === 0) {\n            return null;\n        }\n        regexp = units.join('|');\n    }\n    else if (typeof units === 'string') {\n        regexp = units;\n    }\n    var unit = getUnit(regexp);\n    if (unit === null) {\n        return null;\n    }\n    return {\n        unit: unit,\n        value: number,\n    };\n}\nexports.parseCssNumeric = parseCssNumeric;\nfunction normalizeSides(box) {\n    if (typeof box === 'object') {\n        var left = 0;\n        var top_1 = 0;\n        var right = 0;\n        var bottom = 0;\n        if (box.vertical != null && isFinite(box.vertical)) {\n            top_1 = bottom = box.vertical;\n        }\n        if (box.horizontal != null && isFinite(box.horizontal)) {\n            right = left = box.horizontal;\n        }\n        if (box.left != null && isFinite(box.left))\n            left = box.left;\n        if (box.top != null && isFinite(box.top))\n            top_1 = box.top;\n        if (box.right != null && isFinite(box.right))\n            right = box.right;\n        if (box.bottom != null && isFinite(box.bottom))\n            bottom = box.bottom;\n        return { top: top_1, right: right, bottom: bottom, left: left };\n    }\n    var val = 0;\n    if (box != null && isFinite(box)) {\n        val = box;\n    }\n    return { top: val, right: val, bottom: val, left: val };\n}\nexports.normalizeSides = normalizeSides;\n//# sourceMappingURL=number.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ObjectExt = void 0;\nvar ObjectExt = __importStar(require(\"./object\"));\nexports.ObjectExt = ObjectExt;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createClass = exports.inherit = void 0;\nvar extendStatics = Object.setPrototypeOf ||\n    ({ __proto__: [] } instanceof Array &&\n        function (d, b) {\n            d.__proto__ = b;\n        }) ||\n    function (d, b) {\n        for (var p in b) {\n            if (b.hasOwnProperty(p)) {\n                d[p] = b[p];\n            }\n        }\n    };\n/**\n * @see https://github.com/microsoft/TypeScript/blob/5c85febb0ce9d6088cbe9b09cb42f73f9ee8ea05/src/compiler/transformers/es2015.ts#L4309\n */\nfunction inherit(cls, base) {\n    extendStatics(cls, base);\n    function tmp() {\n        this.constructor = cls;\n    }\n    cls.prototype =\n        base === null\n            ? Object.create(base)\n            : ((tmp.prototype = base.prototype), new tmp());\n}\nexports.inherit = inherit;\nvar A = /** @class */ (function () {\n    function A() {\n    }\n    return A;\n}());\nvar isNativeClass = /^\\s*class\\s+/.test(\"\" + A) || /^\\s*class\\s*\\{/.test(\"\" + /** @class */ (function () {\n    function class_1() {\n    }\n    return class_1;\n}()));\n/**\n * Extends class with specified class name.\n */\nfunction createClass(className, base) {\n    // tslint:disable-next-line\n    var cls = new Function('base', \"\\n      return \" + isNativeClass + \"\\n        ? class \" + className + \" extends base { }\\n        : function \" + className + \"() { return base.apply(this, arguments) }\\n    \")(base);\n    if (!isNativeClass) {\n        inherit(cls, base);\n    }\n    return cls;\n}\nexports.createClass = createClass;\n//# sourceMappingURL=inherit.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.applyMixins = void 0;\n/**\n * @see https://www.typescriptlang.org/docs/handbook/mixins.html\n */\nfunction applyMixins(derivedCtor) {\n    var baseCtors = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        baseCtors[_i - 1] = arguments[_i];\n    }\n    baseCtors.forEach(function (baseCtor) {\n        Object.getOwnPropertyNames(baseCtor.prototype).forEach(function (name) {\n            if (name !== 'constructor') {\n                Object.defineProperty(derivedCtor.prototype, name, Object.getOwnPropertyDescriptor(baseCtor.prototype, name));\n            }\n        });\n    });\n}\nexports.applyMixins = applyMixins;\n//# sourceMappingURL=mixins.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.flatten = exports.unsetByPath = exports.setByPath = exports.getByPath = exports.getBoolean = exports.getNumber = exports.getValue = exports.ensure = exports.defaultsDeep = exports.defaults = exports.cloneDeep = exports.clone = exports.isPlainObject = exports.isObject = exports.isEmpty = exports.isEqual = exports.extend = exports.merge = exports.forIn = exports.pick = exports.has = void 0;\nvar lodash_es_1 = require(\"lodash-es\");\nObject.defineProperty(exports, \"has\", { enumerable: true, get: function () { return lodash_es_1.has; } });\nObject.defineProperty(exports, \"pick\", { enumerable: true, get: function () { return lodash_es_1.pick; } });\nObject.defineProperty(exports, \"forIn\", { enumerable: true, get: function () { return lodash_es_1.forIn; } });\nObject.defineProperty(exports, \"merge\", { enumerable: true, get: function () { return lodash_es_1.merge; } });\nObject.defineProperty(exports, \"extend\", { enumerable: true, get: function () { return lodash_es_1.extend; } });\nObject.defineProperty(exports, \"isEqual\", { enumerable: true, get: function () { return lodash_es_1.isEqual; } });\nObject.defineProperty(exports, \"isEmpty\", { enumerable: true, get: function () { return lodash_es_1.isEmpty; } });\nObject.defineProperty(exports, \"isObject\", { enumerable: true, get: function () { return lodash_es_1.isObject; } });\nObject.defineProperty(exports, \"isPlainObject\", { enumerable: true, get: function () { return lodash_es_1.isPlainObject; } });\nObject.defineProperty(exports, \"clone\", { enumerable: true, get: function () { return lodash_es_1.clone; } });\nObject.defineProperty(exports, \"cloneDeep\", { enumerable: true, get: function () { return lodash_es_1.cloneDeep; } });\nObject.defineProperty(exports, \"defaults\", { enumerable: true, get: function () { return lodash_es_1.defaults; } });\nObject.defineProperty(exports, \"defaultsDeep\", { enumerable: true, get: function () { return lodash_es_1.defaultsDeep; } });\n__exportStar(require(\"./mixins\"), exports);\n__exportStar(require(\"./inherit\"), exports);\nfunction ensure(value, defaultValue) {\n    return value != null ? value : defaultValue;\n}\nexports.ensure = ensure;\nfunction getValue(obj, key, defaultValue) {\n    var value = obj != null ? obj[key] : null;\n    return defaultValue !== undefined ? ensure(value, defaultValue) : value;\n}\nexports.getValue = getValue;\nfunction getNumber(obj, key, defaultValue) {\n    var value = obj != null ? obj[key] : null;\n    if (value == null) {\n        return defaultValue;\n    }\n    value = +value;\n    if (isNaN(value) || !isFinite(value)) {\n        return defaultValue;\n    }\n    return value;\n}\nexports.getNumber = getNumber;\nfunction getBoolean(obj, key, defaultValue) {\n    var value = obj != null ? obj[key] : null;\n    if (value == null) {\n        return defaultValue;\n    }\n    return !!value;\n}\nexports.getBoolean = getBoolean;\nfunction getByPath(obj, path, delimiter) {\n    if (delimiter === void 0) { delimiter = '/'; }\n    var ret;\n    var keys = Array.isArray(path) ? path : path.split(delimiter);\n    if (keys.length) {\n        ret = obj;\n        while (keys.length) {\n            var key = keys.shift();\n            if (Object(ret) === ret && key && key in ret) {\n                ret = ret[key];\n            }\n            else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n}\nexports.getByPath = getByPath;\nfunction setByPath(obj, path, value, delimiter) {\n    if (delimiter === void 0) { delimiter = '/'; }\n    var keys = Array.isArray(path) ? path : path.split(delimiter);\n    var lastKey = keys.pop();\n    if (lastKey) {\n        var diver_1 = obj;\n        keys.forEach(function (key) {\n            if (diver_1[key] == null) {\n                diver_1[key] = {};\n            }\n            diver_1 = diver_1[key];\n        });\n        diver_1[lastKey] = value;\n    }\n    return obj;\n}\nexports.setByPath = setByPath;\nfunction unsetByPath(obj, path, delimiter) {\n    if (delimiter === void 0) { delimiter = '/'; }\n    var keys = Array.isArray(path) ? path.slice() : path.split(delimiter);\n    var propertyToRemove = keys.pop();\n    if (propertyToRemove) {\n        if (keys.length > 0) {\n            var parent_1 = getByPath(obj, keys);\n            if (parent_1) {\n                delete parent_1[propertyToRemove];\n            }\n        }\n        else {\n            delete obj[propertyToRemove];\n        }\n    }\n    return obj;\n}\nexports.unsetByPath = unsetByPath;\nfunction flatten(obj, delim, stop) {\n    if (delim === void 0) { delim = '/'; }\n    var ret = {};\n    Object.keys(obj).forEach(function (key) {\n        var val = obj[key];\n        var deep = typeof val === 'object' || Array.isArray(val);\n        if (deep && stop && stop(val)) {\n            deep = false;\n        }\n        if (deep) {\n            var flatObject_1 = flatten(val, delim, stop);\n            Object.keys(flatObject_1).forEach(function (flatKey) {\n                ret[key + delim + flatKey] = flatObject_1[flatKey];\n            });\n        }\n        else {\n            ret[key] = val;\n        }\n    });\n    for (var key in obj) {\n        if (!obj.hasOwnProperty(key))\n            continue;\n    }\n    return ret;\n}\nexports.flatten = flatten;\n//# sourceMappingURL=object.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.shiftAnnotations = exports.findAnnotationsBetweenIndexes = exports.findAnnotationsAtIndex = exports.annotate = void 0;\nvar object_1 = require(\"../object\");\nvar attr_1 = require(\"../dom/attr\");\nfunction annotate(t, annotations, opt) {\n    if (opt === void 0) { opt = {}; }\n    var offset = opt.offset || 0;\n    var compacted = [];\n    var ret = [];\n    var curr;\n    var prev;\n    var batch = null;\n    for (var i = 0; i < t.length; i += 1) {\n        curr = ret[i] = t[i];\n        for (var j = 0, jj = annotations.length; j < jj; j += 1) {\n            var annotation = annotations[j];\n            var start = annotation.start + offset;\n            var end = annotation.end + offset;\n            if (i >= start && i < end) {\n                if (typeof curr === 'string') {\n                    curr = ret[i] = {\n                        t: t[i],\n                        attrs: annotation.attrs,\n                    };\n                }\n                else {\n                    curr.attrs = attr_1.mergeAttrs(attr_1.mergeAttrs({}, curr.attrs), annotation.attrs);\n                }\n                if (opt.includeAnnotationIndices) {\n                    if (curr.annotations == null) {\n                        curr.annotations = [];\n                    }\n                    curr.annotations.push(j);\n                }\n            }\n        }\n        prev = ret[i - 1];\n        if (!prev) {\n            batch = curr;\n        }\n        else if (object_1.ObjectExt.isObject(curr) && object_1.ObjectExt.isObject(prev)) {\n            batch = batch;\n            // Both previous item and the current one are annotations.\n            // If the attributes didn't change, merge the text.\n            if (JSON.stringify(curr.attrs) === JSON.stringify(prev.attrs)) {\n                batch.t += curr.t;\n            }\n            else {\n                compacted.push(batch);\n                batch = curr;\n            }\n        }\n        else if (object_1.ObjectExt.isObject(curr)) {\n            // Previous item was a string, current item is an annotation.\n            batch = batch;\n            compacted.push(batch);\n            batch = curr;\n        }\n        else if (object_1.ObjectExt.isObject(prev)) {\n            // Previous item was an annotation, current item is a string.\n            batch = batch;\n            compacted.push(batch);\n            batch = curr;\n        }\n        else {\n            // Both previous and current item are strings.\n            batch = (batch || '') + curr;\n        }\n    }\n    if (batch != null) {\n        compacted.push(batch);\n    }\n    return compacted;\n}\nexports.annotate = annotate;\nfunction findAnnotationsAtIndex(annotations, index) {\n    return annotations\n        ? annotations.filter(function (a) { return a.start < index && index <= a.end; })\n        : [];\n}\nexports.findAnnotationsAtIndex = findAnnotationsAtIndex;\nfunction findAnnotationsBetweenIndexes(annotations, start, end) {\n    return annotations\n        ? annotations.filter(function (a) {\n            return (start >= a.start && start < a.end) ||\n                (end > a.start && end <= a.end) ||\n                (a.start >= start && a.end < end);\n        })\n        : [];\n}\nexports.findAnnotationsBetweenIndexes = findAnnotationsBetweenIndexes;\nfunction shiftAnnotations(annotations, index, offset) {\n    if (annotations) {\n        annotations.forEach(function (a) {\n            if (a.start < index && a.end >= index) {\n                a.end += offset;\n            }\n            else if (a.start >= index) {\n                a.start += offset;\n                a.end += offset;\n            }\n        });\n    }\n    return annotations;\n}\nexports.shiftAnnotations = shiftAnnotations;\n//# sourceMappingURL=annotate.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Text = void 0;\nvar Text = __importStar(require(\"./main\"));\nexports.Text = Text;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./annotate\"), exports);\n__exportStar(require(\"./sanitize\"), exports);\n//# sourceMappingURL=main.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sanitize = void 0;\n/**\n * Replaces all spaces with the Unicode No-break space.\n * ref: http://www.fileformat.info/info/unicode/char/a0/index.htm\n *\n * IE would otherwise collapse all spaces into one. This is useful\n * e.g. in tests when you want to compare the actual DOM text content\n * without having to add the unicode character in the place of all spaces.\n */\nfunction sanitize(text) {\n    return text.replace(/ /g, '\\u00A0');\n}\nexports.sanitize = sanitize;\n//# sourceMappingURL=sanitize.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Vector = void 0;\nvar geometry_1 = require(\"../../geometry\");\nvar Dom = __importStar(require(\"../dom/core\"));\nvar Vector = /** @class */ (function () {\n    function Vector(elem, attrs, children) {\n        if (!elem) {\n            throw new TypeError('Invalid element to create vector');\n        }\n        var node;\n        if (Vector.isVector(elem)) {\n            node = elem.node;\n        }\n        else if (typeof elem === 'string') {\n            if (elem.toLowerCase() === 'svg') {\n                node = Dom.createSvgDocument();\n            }\n            else if (elem[0] === '<') {\n                var doc = Dom.createSvgDocument(elem);\n                // only import the first child\n                node = document.importNode(doc.firstChild, true);\n            }\n            else {\n                node = document.createElementNS(Dom.ns.svg, elem);\n            }\n        }\n        else {\n            node = elem;\n        }\n        this.node = node;\n        if (attrs) {\n            this.setAttributes(attrs);\n        }\n        if (children) {\n            this.append(children);\n        }\n    }\n    Object.defineProperty(Vector.prototype, Symbol.toStringTag, {\n        get: function () {\n            return Vector.toStringTag;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Vector.prototype, \"type\", {\n        get: function () {\n            return this.node.nodeName;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Vector.prototype, \"id\", {\n        get: function () {\n            return this.node.id;\n        },\n        set: function (id) {\n            this.node.id = id;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Vector.prototype.transform = function (matrix, options) {\n        if (matrix == null) {\n            return Dom.transform(this.node);\n        }\n        Dom.transform(this.node, matrix, options);\n        return this;\n    };\n    Vector.prototype.translate = function (tx, ty, options) {\n        if (ty === void 0) { ty = 0; }\n        if (options === void 0) { options = {}; }\n        if (tx == null) {\n            return Dom.translate(this.node);\n        }\n        Dom.translate(this.node, tx, ty, options);\n        return this;\n    };\n    Vector.prototype.rotate = function (angle, cx, cy, options) {\n        if (options === void 0) { options = {}; }\n        if (angle == null) {\n            return Dom.rotate(this.node);\n        }\n        Dom.rotate(this.node, angle, cx, cy, options);\n        return this;\n    };\n    Vector.prototype.scale = function (sx, sy) {\n        if (sx == null) {\n            return Dom.scale(this.node);\n        }\n        Dom.scale(this.node, sx, sy);\n        return this;\n    };\n    /**\n     * Returns an SVGMatrix that specifies the transformation necessary\n     * to convert this coordinate system into `target` coordinate system.\n     */\n    Vector.prototype.getTransformToElement = function (target) {\n        var ref = Vector.toNode(target);\n        return Dom.getTransformToElement(this.node, ref);\n    };\n    Vector.prototype.removeAttribute = function (name) {\n        Dom.removeAttribute(this.node, name);\n        return this;\n    };\n    Vector.prototype.getAttribute = function (name) {\n        return Dom.getAttribute(this.node, name);\n    };\n    Vector.prototype.setAttribute = function (name, value) {\n        Dom.setAttribute(this.node, name, value);\n        return this;\n    };\n    Vector.prototype.setAttributes = function (attrs) {\n        Dom.setAttributes(this.node, attrs);\n        return this;\n    };\n    Vector.prototype.attr = function (name, value) {\n        if (name == null) {\n            return Dom.attr(this.node);\n        }\n        if (typeof name === 'string' && value === undefined) {\n            return Dom.attr(this.node, name);\n        }\n        if (typeof name === 'object') {\n            Dom.attr(this.node, name);\n        }\n        else {\n            Dom.attr(this.node, name, value);\n        }\n        return this;\n    };\n    Vector.prototype.svg = function () {\n        return this.node instanceof SVGSVGElement\n            ? this\n            : Vector.create(this.node.ownerSVGElement);\n    };\n    Vector.prototype.defs = function () {\n        var context = this.svg() || this;\n        var defsNode = context.node.getElementsByTagName('defs')[0];\n        if (defsNode) {\n            return Vector.create(defsNode);\n        }\n        return Vector.create('defs').appendTo(context);\n    };\n    Vector.prototype.text = function (content, options) {\n        if (options === void 0) { options = {}; }\n        Dom.text(this.node, content, options);\n        return this;\n    };\n    Vector.prototype.tagName = function () {\n        return Dom.tagName(this.node);\n    };\n    Vector.prototype.clone = function () {\n        return Vector.create(this.node.cloneNode(true));\n    };\n    Vector.prototype.remove = function () {\n        Dom.remove(this.node);\n        return this;\n    };\n    Vector.prototype.empty = function () {\n        Dom.empty(this.node);\n        return this;\n    };\n    Vector.prototype.append = function (elems) {\n        Dom.append(this.node, Vector.toNodes(elems));\n        return this;\n    };\n    Vector.prototype.appendTo = function (target) {\n        Dom.appendTo(this.node, Vector.isVector(target) ? target.node : target);\n        return this;\n    };\n    Vector.prototype.prepend = function (elems) {\n        Dom.prepend(this.node, Vector.toNodes(elems));\n        return this;\n    };\n    Vector.prototype.before = function (elems) {\n        Dom.before(this.node, Vector.toNodes(elems));\n        return this;\n    };\n    Vector.prototype.replace = function (elem) {\n        if (this.node.parentNode) {\n            this.node.parentNode.replaceChild(Vector.toNode(elem), this.node);\n        }\n        return Vector.create(elem);\n    };\n    Vector.prototype.first = function () {\n        return this.node.firstChild\n            ? Vector.create(this.node.firstChild)\n            : null;\n    };\n    Vector.prototype.last = function () {\n        return this.node.lastChild\n            ? Vector.create(this.node.lastChild)\n            : null;\n    };\n    Vector.prototype.get = function (index) {\n        var child = this.node.childNodes[index];\n        return child ? Vector.create(child) : null;\n    };\n    Vector.prototype.indexOf = function (elem) {\n        var children = Array.prototype.slice.call(this.node.childNodes);\n        return children.indexOf(Vector.toNode(elem));\n    };\n    Vector.prototype.find = function (selector) {\n        var vels = [];\n        var nodes = Dom.find(this.node, selector);\n        if (nodes) {\n            for (var i = 0, ii = nodes.length; i < ii; i += 1) {\n                vels.push(Vector.create(nodes[i]));\n            }\n        }\n        return vels;\n    };\n    Vector.prototype.findOne = function (selector) {\n        var found = Dom.findOne(this.node, selector);\n        return found ? Vector.create(found) : null;\n    };\n    Vector.prototype.findParentByClass = function (className, terminator) {\n        var node = Dom.findParentByClass(this.node, className, terminator);\n        return node ? Vector.create(node) : null;\n    };\n    Vector.prototype.matches = function (selector) {\n        var node = this.node;\n        var matches = this.node.matches;\n        var matcher = node.matches ||\n            node.matchesSelector ||\n            node.msMatchesSelector ||\n            node.mozMatchesSelector ||\n            node.webkitMatchesSelector ||\n            node.oMatchesSelector ||\n            null;\n        return matcher && matcher.call(node, selector);\n    };\n    Vector.prototype.contains = function (child) {\n        return Dom.contains(this.node, Vector.isVector(child) ? child.node : child);\n    };\n    Vector.prototype.wrap = function (node) {\n        var vel = Vector.create(node);\n        var parentNode = this.node.parentNode;\n        if (parentNode != null) {\n            parentNode.insertBefore(vel.node, this.node);\n        }\n        return vel.append(this);\n    };\n    Vector.prototype.parent = function (type) {\n        var parent = this; // tslint:disable-line\n        // check for parent\n        if (parent.node.parentNode == null) {\n            return null;\n        }\n        // get parent element\n        parent = Vector.create(parent.node.parentNode);\n        if (type == null) {\n            return parent;\n        }\n        // loop trough ancestors if type is given\n        do {\n            if (typeof type === 'string' ? parent.matches(type) : parent instanceof type) {\n                return parent;\n            }\n        } while ((parent = Vector.create(parent.node.parentNode)));\n        return parent;\n    };\n    Vector.prototype.children = function () {\n        var children = this.node.childNodes;\n        var vels = [];\n        for (var i = 0; i < children.length; i += 1) {\n            var currentChild = children[i];\n            if (currentChild.nodeType === 1) {\n                vels.push(Vector.create(children[i]));\n            }\n        }\n        return vels;\n    };\n    Vector.prototype.eachChild = function (fn, deep) {\n        var children = this.children();\n        for (var i = 0, l = children.length; i < l; i += 1) {\n            fn.call(children[i], children[i], i, children);\n            if (deep) {\n                children[i].eachChild(fn, deep);\n            }\n        }\n        return this;\n    };\n    Vector.prototype.index = function () {\n        return Dom.index(this.node);\n    };\n    Vector.prototype.hasClass = function (className) {\n        return Dom.hasClass(this.node, className);\n    };\n    Vector.prototype.addClass = function (className) {\n        Dom.addClass(this.node, className);\n        return this;\n    };\n    Vector.prototype.removeClass = function (className) {\n        Dom.removeClass(this.node, className);\n        return this;\n    };\n    Vector.prototype.toggleClass = function (className, stateVal) {\n        Dom.toggleClass(this.node, className, stateVal);\n        return this;\n    };\n    Vector.prototype.toLocalPoint = function (x, y) {\n        return Dom.toLocalPoint(this.node, x, y);\n    };\n    Vector.prototype.toGeometryShape = function () {\n        return Dom.toGeometryShape(this.node);\n    };\n    Vector.prototype.translateCenterToPoint = function (p) {\n        var bbox = this.getBBox({ target: this.svg() });\n        var center = bbox.getCenter();\n        this.translate(p.x - center.x, p.y - center.y);\n        return this;\n    };\n    Vector.prototype.translateAndAutoOrient = function (position, reference, target) {\n        Dom.translateAndAutoOrient(this.node, position, reference, target);\n        return this;\n    };\n    Vector.prototype.animate = function (options) {\n        return Dom.animate(this.node, options);\n    };\n    Vector.prototype.animateTransform = function (options) {\n        return Dom.animateTransform(this.node, options);\n    };\n    Vector.prototype.animateAlongPath = function (options, path) {\n        return Dom.animateAlongPath(this.node, options, path);\n    };\n    /**\n     * Normalize this element's d attribute. SVGPathElements without\n     * a path data attribute obtain a value of 'M 0 0'.\n     */\n    Vector.prototype.normalizePath = function () {\n        var tagName = this.tagName();\n        if (tagName === 'path') {\n            this.attr('d', geometry_1.Path.normalize(this.attr('d')));\n        }\n        return this;\n    };\n    /**\n     * Returns the bounding box of the element after transformations are applied.\n     * If `withoutTransformations` is `true`, transformations of the element\n     * will not be considered when computing the bounding box. If `target` is\n     * specified, bounding box will be computed relatively to the target element.\n     */\n    Vector.prototype.bbox = function (withoutTransformations, target) {\n        return Dom.bbox(this.node, withoutTransformations, target);\n    };\n    Vector.prototype.getBBox = function (options) {\n        if (options === void 0) { options = {}; }\n        return Dom.getBBox(this.node, {\n            recursive: options.recursive,\n            target: options.target ? Vector.toNode(options.target) : null,\n        });\n    };\n    /**\n     * Samples the underlying SVG element (it currently works only on\n     * paths - where it is most useful anyway). Returns an array of objects\n     * of the form `{ x: Number, y: Number, distance: Number }`. Each of these\n     * objects represent a point on the path. This basically creates a discrete\n     * representation of the path (which is possible a curve). The sampling\n     * interval defines the accuracy of the sampling. In other words, we travel\n     * from the beginning of the path to the end by interval distance (on the\n     * path, not between the resulting points) and collect the discrete points\n     * on the path. This is very useful in many situations. For example, SVG\n     * does not provide a built-in mechanism to find intersections between two\n     * paths. Using sampling, we can just generate bunch of points for each of\n     * the path and find the closest ones from each set.\n     */\n    Vector.prototype.sample = function (interval) {\n        if (interval === void 0) { interval = 1; }\n        if (this.node instanceof SVGPathElement) {\n            return Dom.sample(this.node, interval);\n        }\n        return [];\n    };\n    Vector.prototype.toPath = function () {\n        return Vector.create(Dom.toPath(this.node));\n    };\n    Vector.prototype.toPathData = function () {\n        return Dom.toPathData(this.node);\n    };\n    return Vector;\n}());\nexports.Vector = Vector;\n(function (Vector) {\n    Vector.toStringTag = \"X6.\" + Vector.name;\n    function isVector(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Vector) {\n            return true;\n        }\n        var tag = instance[Symbol.toStringTag];\n        var vector = instance;\n        if ((tag == null || tag === Vector.toStringTag) &&\n            vector.node instanceof SVGElement &&\n            typeof vector.animate === 'function' &&\n            typeof vector.sample === 'function' &&\n            typeof vector.normalizePath === 'function' &&\n            typeof vector.toPath === 'function') {\n            return true;\n        }\n        return false;\n    }\n    Vector.isVector = isVector;\n    function create(elem, attrs, children) {\n        return new Vector(elem, attrs, children);\n    }\n    Vector.create = create;\n    function createVectors(markup) {\n        if (markup[0] === '<') {\n            var svgDoc = Dom.createSvgDocument(markup);\n            var vels = [];\n            for (var i = 0, ii = svgDoc.childNodes.length; i < ii; i += 1) {\n                var childNode = svgDoc.childNodes[i];\n                vels.push(create(document.importNode(childNode, true)));\n            }\n            return vels;\n        }\n        return [create(markup)];\n    }\n    Vector.createVectors = createVectors;\n    function toNode(elem) {\n        if (isVector(elem)) {\n            return elem.node;\n        }\n        return elem;\n    }\n    Vector.toNode = toNode;\n    function toNodes(elems) {\n        if (Array.isArray(elems)) {\n            return elems.map(function (elem) { return toNode(elem); });\n        }\n        return [toNode(elems)];\n    }\n    Vector.toNodes = toNodes;\n})(Vector = exports.Vector || (exports.Vector = {}));\nexports.Vector = Vector;\n//# sourceMappingURL=index.js.map"],"names":["exports","Angle","toDeg","rad","deg","over360","d","normalize","angle","__extends","extendStatics","b","p","__","point_1","line_1","rectangle_1","polyline_1","geometry_1","Curve","_super","start","controlPoint1","controlPoint2","end","_this","x0","y0","x1","y1","x2","y2","x3","y3","points","tvalues","bounds","a","c","t","t1","t2","b2ac","sqrtb2ac","i","x","y","mt","j","jlen","left","top","right","bottom","options","opts","cpLength","length","precision","subdivisions","precisionRatio","investigatedSubdivision","investigatedSubdivisionStartT","investigatedSubdivisionEndT","distFromStart","distFromEnd","chordLength","minSumDist","count","piece","division","startDist","endDist","sumDist","startPrecisionRatio","endPrecisionRatio","hasRequiredPrecision","hasMiniStartDistance","hasMiniEndDistance","hasMiniDistance","divided","startDist1","endDist1","sumDist1","startDist2","endDist2","sumDist2","polyline","ratio","dividerPoints","startControl1","startControl2","divider","dividerControl1","dividerControl2","control1","control2","midpoint1","midpoint2","midpoint3","subControl1","subControl2","divideLine","previousLength","iteration","_loop_1","divisions","length_1","memo","state_1","subCurve","skeletonPoints","p1","p2","tangentStart","tangentLine","total","fromStart","baselinePointDistFromStart","baselinePointDistFromEnd","index","dist","newBaselinePointDistFromStart","newBaselinePointDistFromEnd","baseline1Length","baseline2Length","sx","sy","origin","tx","ty","isCurve","instance","tag","curve","getFirstControlPoints","rhs","n","tmp","getCurveControlPoints","knots","firstControlPoints","secondControlPoints","throughPoints","controlPoints","curves","ii","Ellipse","dx","dy","w","h","ref","line","intersections","rx","ry","a1","a2","dir","diff","mDir","mDiff","root","ta","tb","result","m","mSquared","aSquared","bSquared","center","cx","cy","refPointDelta","q1","q3","rect","ellipse","isEllipse","create","parse","e","fromRect","Geometry","__createBinding","o","k","k2","__exportStar","Line","scale","distance","eRef","sRef","horizontal","product","normalized","rate","dividerPoint","shape","ret","pt1Dir","pt2Dir","det","deltaPt","alpha","beta","determinant","dx1","dy1","dx2","dy2","ccw","l","isLine","lineto_1","segment_1","Close","s","curve_1","CurveTo","arg0","arg1","arg2","arg3","arg4","arg5","c1","c2","args","_i","len","segments_1","segments","LineTo","arg","MoveTo","__spreadArrays","il","r","jl","util_1","rotate","q2c","ax","ay","v13","v23","a2c","largeArcFlag","sweepFlag","recursive","v120","res","xy","f1","f2","rx2","ry2","df","f2old","x2old","y2old","s1","s2","hx","hy","m1","m2","m3","m4","newres","pathData","spaces","segmentReg","commandParamReg","paramsCount","segmetns","input","cmd","params","command","abs","pathString","pathArray","mx","my","segment","jj","path","attrs","processPath","pcom","nx","ny","fixArc","pp","pi","commands","prevCommand","seg","seglen","normalizePathData","item","__setModuleDefault","v","__importStar","mod","close_1","moveto_1","curveto_1","normalize_1","Util","Path","previousObj_1","arr","point","_a","xAxisRotation","endX","endY","data","raw","sub","bbox","segmentBBox","lastSegment","previousSegment","currentSegment","nextSegment","idx","removedSegment","replacedSegment","updateSubpathStart","opt","segmentSubdivisions","lastVisibleIndex","previous","current","closestPointT","minSquaredDistance","segmentClosestPointT","segmentClosestPoint","squaredDistance","closestPointTangent","polylines","numIntersections","pathLength","lastVisibleSegment","numSegments","segmentIndex","tValue","dividedSegmentIndex","lastValidSegment","lastValidSegmentIndex","index_1","pathCopy","divisionStartIndex","divisionMidIndex","divisionEndIndex","movetoEnd","secondPathSegmentIndexConversion","originalSegment","convertedSegment","firstPath","secondPath","intersection","isValid","subdivisions_1","partialPoints","otherSegments","isPath","commandRe","argRe","type","coords","createSegment","_b","_c","Segment","regexSupportedData","draw","round","initialMove","close","exclude","rounded","arcSize","p0","wp","pt","nx1","ny1","next","nx2","ny2","drawPoints","pts","arcToCurves","r1","r2","ctx","cty","cpsi","spsi","rxd","ryd","rxdd","rydd","r1x","r2y","lamda","sds","seif","txd","tyd","dr","sse","segr","cpsir1","cpsir2","spsir1","spsir2","mc","ms","num","drawArc","startX","startY","stopX","stopY","util","angle_1","Point","degree","min","zero","lat1","lat2","lon1","lon2","dLon","brng","bearings","gx","gy","isPoint","isPointLike","isPointData","clone","toJSON","fromPolar","org","toPolar","equals","equalPoints","random","sin","cos","rotateEx","source","Polyline","minSqrDistance","lineLength","cpNormalizedLength","cp","sqrDistance","startIndex","intersectionCount","endIndex","xDifference","rayEnd","ray","int","lastPoint","lastValidLine","threshold","currentIndex","firstIndex","middleIndex","lastIndex","firstPoint","middlePoint","chord","closestPoint","closestPointDistance","startPoint","sortedRecords","record1","record2","startPoint_1","insidePoints","hullRecords","getKey","record","currentRecord","currentPoint","correctTurnFound","lastHullRecord","lastHullPoint","secondLastHullRecord","secondLastHullPoint","crossProduct","THRESHOLD","angleBetween","lowestHullIndex","indexOfLowestHullIndexRecord","currentHullIndex","hullPointRecordsReordered","newFirstChunk","newSecondChunk","hullPoints","isPolyline","svgString","str","Rectangle","width","height","st","ct","minX","minY","maxX","maxY","corner","pos","p3","p4","limit","ox","oy","sx1","sx2","sx3","sx4","sy1","sy2","sy3","sy4","w1","h1","w2","h2","rectLines","dedupeArr","sides","connector","myOrigin","myCorner","rOrigin","rCorner","xx","yy","newx","newy","newwidth","newheight","originX","originY","cornerX","cornerY","distLeft","distRight","distTop","distBottom","closest","side","isRectangle","isRectangleLike","fromSize","size","fromPositionAndSize","fromEllipse","max","mmin","mmax","temp","clamp","value","snapToGrid","gridSize","containsPoint","squaredLength","raf","win","lastTime_1","callback","currTime","timeToCall","id","caf","elem_1","getAttribute","elem","name","removeAttribute","qualified","qualifyAttr","setAttribute","setAttributes","attr","combinedKey","kebablizeAttrs","key","styleToObject","styleString","styles","section","pair","mergeAttrs","target","to","so","tt","ss","rclass","rnotwhite","fillSpaces","getClass","hasClass","selector","classNames","className","addClass","classes","oldValue","newValue","cls","removeClass","toggleClass","stateVal","metches","class_1","idCounter","uniqueId","ensureId","isSVGGraphicsElement","createElement","tagName","doc","createElementNS","namespaceURI","createSvgElement","createSvgDocument","content","xml","documentElement","parseXML","svg","parser","error","node","lowercase","nodeName","find","findOne","findParentByClass","terminator","ownerSVGElement","contains","parent","child","bup","remove","empty","append","elems","prepend","before","appendTo","isHTMLElement","__rest","attr_1","path_1","style_1","matrix_1","withoutTransformations","box","matrix","getTransformToElement","getBBox","outputBBox","getBoundingOffsetRect","top_1","children","childBBox","targetCTM","nodeCTM","toLocalPoint","ctm","globalPoint","globalToLocalMatrix","toGeometryShape","getIntersection","spot","gRect","rectMatrix","rectMatrixComponents","reseted","pathNode","samples","minDistance","closestSamples","sample_1","gp","ggp","centerDistance","refDistance","animate","createAnimation","animateTransform","setupAnimation","complete","repeat","ani","animateAlongPath","mpath","animationID","targets","animator","svgDocument","transformRegex","transformSeparatorRegex","transformationListRegex","createSVGPoint","createSVGMatrix","mat","createSVGTransform","transformStringToMatrix","transform","matches","transformationString","transformationMatch","matrixToTransformString","f","parseTransformString","translation","rotation","separator","decomposedMatrix","decomposeMatrix","transformations","translateMatch","rotateMatch","scaleMatch","deltaTransformPoint","px","py","skewX","skewY","matrixToScale","matrixToRotation","matrixToTranslation","transformPoint","transformLine","transformPolyline","transformRectangle","corner1","corner2","corner3","corner4","getNumbericAttribute","defaultValue","sample","interval","lineToPathData","polygonToPathData","polygon","getPointsFromSvgElement","svgPointsToPath","polylineToPathData","nodePoints","circleToPathData","circle","cd","ellipseToPathData","cdx","cdy","rectangleToPathData","rectToPathData","topRx","bottomRx","topRy","bottomRy","toPath","toPathData","createSlicePathData","innerRadius","outerRadius","startAngle","endAngle","svgArcMax","r0","a0","da","c0","s0","hyphenPattern","camelize","_","char","memoized","prefixes","testStyle","getWithPrefix","prefixedName","getVendorPrefixedName","property","capitalizedName","selection","prefix_1","setPrefixedStyle","style","vendor","getComputedStyle","computed","hasScrollbars","container","number_1","text_1","vector_1","createTextPathNode","vel","textPath","annotateTextLine","lineNode","lineAnnotations","eol","baseSize","lineHeight","maxFontSize","tspanNode","fontMetrics","lastJ","annotation","fontSize","annotationAttrs","vTSpan","annotationClass","emRegex","emToPx","em","numerical","calculateDY","alignment","linesMetrics","baseSizePx","lineMetrics","flMaxFont","rLineHeights","lineHeightPx","iLineHeight","llMaxFont","text","verticalAnchor","namedVerticalAnchor","iai","annotations","defaultLineHeight","autoLineHeight","containerNode","offset","annotatedY","lines","lastI","lineClassName","lineNodeStyle","rh","firstLine","breakText","textSpan","textElement","textNode","hyphen","words","full","word","eolWords","partition","hyphenIndex","heightValue","lastL","ellipsis","lastLine","lastLineWithOmission","lastChar","separatorChar","geom_1","transformList","svgTransform","translate","transformAttr","newTx","newTy","newTranslate","newAngle","newOrigin","newRotate","newScale","translateAndAutoOrient","position","reference","translateToOrigin","rotateAroundOrigin","translateFromOrigin","finalPosition","lodash_es_1","isWindow","isNumeric","NumberExt","lang_1","lower","upper","isPercentage","val","normalizePercentage","parseCssNumeric","units","getUnit","regexp","number","unit","normalizeSides","ObjectExt","inherit","base","A","isNativeClass","createClass","applyMixins","derivedCtor","baseCtors","baseCtor","ensure","getValue","obj","getNumber","getBoolean","getByPath","delimiter","keys","setByPath","lastKey","diver_1","unsetByPath","propertyToRemove","parent_1","flatten","delim","stop","deep","flatObject_1","flatKey","object_1","annotate","compacted","curr","prev","batch","findAnnotationsAtIndex","findAnnotationsBetweenIndexes","shiftAnnotations","Text","sanitize","Dom","Vector","context","defsNode","vels","nodes","found","matcher","parentNode","currentChild","fn","isVector","vector","createVectors","markup","svgDoc","childNode","toNode","toNodes"],"sourceRoot":""}